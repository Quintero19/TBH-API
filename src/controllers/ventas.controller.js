function a0_0x2956(){const _0x2c72bc=['verificarInsumosProducto','TEWZq','Id_Producto_Tamano_Insumos_Producto_Tamano_Insumo','eQous','zTRea','Stock\x20insuficiente\x20para\x20talla\x20','WQcKg','\x20\x20\x20Cantidad\x20total\x20necesaria:\x20','insuficiente','Total','10VLjUyo','AQIgG','status','tieneTamanos','Agendamiento\x20no\x20encontrado','getMonth','descripcionTallas','poStT','Cantidad_Maxima','iSpOO','LHYsB','qSKRD','El\x20producto\x20','qpbyp','fytSt','verificarConfiguracionInsumosProducto','vrnIA','xowgX','anularVenta','ynVCy','Fecha_Anulacion','no\x20encontrado','\x20no\x20encontrada','XoLkR','Subtotal','GjRBx','Producto\x20no\x20encontrado','ONtML','KldVp','Detalle\x20de\x20venta\x20es\x20requerido\x20y\x20debe\x20ser\x20un\x20array\x20no\x20vacío','SDZAE','update','Tallas_Data_Original','vMsUo','Error\x20al\x20verificar\x20configuración\x20de\x20insumos:','wXPsx','Producto\x20ID:','DWhFE','Tamanos','Error\x20al\x20generar\x20reporte\x20mensual:','🔍\x20DIAGNÓSTICO:\x20Verificando\x20insumos\x20para\x20producto\x20','pRFDa','FEzNV','Error\x20al\x20verificar\x20insumos\x20del\x20producto','Talla\x20','no\x20coincide','Fecha','slice','ZJPDv','Tamanos_Data_Original','huXqw','M_Pago','wwBtx','NDBCP','Id_Agendamientos','EVOFJ','pOPAt','oFKnY','Tamaño\x20','37895814DprFBz','Referencia','MZLNP','✅\x20Tamaño\x20encontrado:\x20','Error\x20al\x20obtener\x20tamaño\x20por\x20nombre','forEach','XBhtl','\x20tamaño(s)\x20sin\x20insumos\x20configurados:\x20','success','DtkpG','PGxAi','stringify','YtNjY','cmolH','Tamaños\x20recibidos:','XTlTv','Tallas_Original','sPsvH','slVED','Error\x20al\x20verificar\x20insumos:','xNRXv','krUZj','Id_Tamano','iAHfw','rollback','Venta\x20marcada\x20como\x20completada\x20correctamente','rtvzT','Sjkvf','Error\x20al\x20obtener\x20tamaño\x20por\x20nombre:','WzvCr','isArray','Nombre\x20de\x20talla\x20no\x20válido','Error\x20al\x20marcar\x20venta\x20como\x20completada:','validarStockVenta','talla','commit','yapRs','Producto_Tamano_Insumos','uXKCz',',\x20Solicitado:\x20','PSE','filter','Tallas','Efectivo','detalleTalla','Error\x20de\x20validación','producto','EwQJa','Precio_Venta','Producto\x20con\x20ID\x20','findByPk','Fecha_Completado','uCgxE','Configuración\x20de\x20insumos\x20para\x20producto\x20','Error\x20al\x20generar\x20reporte\x20diario:','toJSON','tamaño','hvNhL','nhEqA','pHZaZ','QdlYD','Id_Insumos_Insumo','Cantidad','Error\x20al\x20obtener\x20venta','bXxKs','XtPuq','\x20→\x20','Error\x20inesperado\x20al\x20crear\x20venta','EWVoL','sort','Nombre\x20de\x20tamaño\x20no\x20válido','toISOString','env','NuFTx','Error\x20al\x20crear\x20venta:','TfPWp','Completada','Id_Empleados','mGzrj','\x20no\x20encontrada\x20para\x20el\x20producto\x20','toString','Error\x20al\x20generar\x20reporte\x20diario','PaXGu','vjsKE','push','\x20x\x20Talla\x20','create','Uonci','.\x20Disponible:\x20','uZUaF','Qmmsb','xbuye','Nombre\x20de\x20talla\x20no\x20válido\x20para\x20el\x20producto\x20','Tamaño\x20no\x20encontrado','zfUaw','FKXuj','Error\x20al\x20actualizar\x20stock:\x20','\x20-\x20Cantidad:\x20','Id_Insumos','FIlSb','📦\x20Cantidad\x20de\x20productos\x20a\x20fabricar:\x20','Estado','Error\x20al\x20validar\x20stock','KmaFb','Desconocido','9SRZDNZ','WATMo','ZWGgf','Servicio','includes','UDNRv','trim','Error\x20al\x20anular\x20venta:','params','reYwY','nDrIB','✅\x20Stock\x20actualizado:\x20','yfzoa','VMZxr',',\x20tamaño\x20','Total_Insumos','Nombre\x20del\x20tamaño\x20es\x20requerido','Id_Productos','Id_Categoria_Insumos','Error\x20al\x20validar\x20stock:','YAExp','NuAhx','BYiFQ','obtenerTamanosProducto','TLpwY','query','Nombre\x20de\x20tamaño\x20no\x20válido\x20para\x20el\x20producto\x20','EzyvR','\x20\x20\x20Cantidad\x20por\x20producto:\x20','gEGla','message','Error\x20al\x20listar\x20ventas:','ZwZYz','nszTk','✅\x20Diagnóstico\x20completado.\x20Total\x20insumos:\x20','body','precio','\x20requiere\x20especificar\x20tallas.\x20Tallas\x20disponibles:\x20','\x20unidades','Anulada','7670082eyjmAr','vzEvd','Error\x20al\x20marcar\x20venta\x20como\x20completada:\x20','nombre','Nombre','ID\x20de\x20producto\x20es\x20requerido','1433840eMkdcj','length','obtenerTallasProducto',',\x20Necesario:\x20','Sin\x20Categoría','QJYOX','oyCJY','setHours','reporteVentasMensuales','IMMQj','Error\x20al\x20obtener\x20tallas\x20del\x20producto:','Conflicto\x20de\x20datos\x20únicos','validarStock','transaction','No\x20se\x20encontró\x20la\x20relación\x20producto-tamaño\x20para\x20','WgnzH','getDate','hqIBa','CaJlI','Stock','uuzgo','Id_Ventas','❌\x20Error\x20en\x20diagnóstico:','cIeSH','LYGHK','Stock_Actual','Cliente\x20no\x20encontrado','cantidad','Error\x20al\x20anular\x20venta','fLndF','Tamanos_Original','Talla','CqeEQ','Unidad_Medida','tEVxR','Venta\x20anulada\x20correctamente','QjTJF','ljjQX',',\x20solicitado\x20','5468172rjXpLu','NyZvg','Precio','cQLzy','ApwtI','===\x20INICIO\x20ACTUALIZACIÓN\x20STOCK\x20INSUMOS\x20===','IBVvO','\x20\x20\x20Stock\x20actual:\x20','Transferencia','Id_Categoria','Id_Productos_Producto','YwVWi','jEFSX','development','listarVentas','oWUHi','Error\x20de\x20base\x20de\x20datos','Talla\x20no\x20encontrada','cGRZf','pXUEE','Id_Tallas','YZIQy','map','ID\x20de\x20producto\x20es\x20requerido\x20para\x20todos\x20los\x20items','gohCY','Id_Cliente','Id_Agendamientos_Agendamiento','join','jwNks','fSYge','tieneTallas','xJxva','\x20configurado','error','7907yLhLqq','Id_Producto_Tamano_Insumos','tHCyR','zLdoH','cYveW','reduce','IJlSV','Error\x20al\x20obtener\x20venta\x20por\x20ID:','hTVOU','Id_Tallas_Talla','obtenerVentaPorId','parse','Error\x20al\x20marcar\x20venta\x20como\x20completada','aJtrW','fXBhI','JGOPg','cRbGk','uNguB','Insumos\x20configurados\x20para\x20producto\x20','N/A','XiVFb','DLrkX','AsEiD','\x20no\x20encontrado','JOfyF','QCPtA','prChW','BjgJL','OgVIK','Error\x20al\x20obtener\x20ventas:\x20','12vVgdUs','\x20x\x20','Error\x20al\x20validar\x20stock\x20de\x20venta','Stock\x20insuficiente\x20para\x20el\x20producto\x20','PaqbU','fDQNN','BFIJe','Id_Empleados_Empleado','Venta\x20no\x20encontrada','kMQRn','ZcdbX','Venta\x20creada\x20correctamente','EGMDC','Id_Tamano_Tamano','KNGiI','DkmhY','Nombre_Tamano','Tallas_Data','yCQSV','QwfXV','gysYp','Empleado\x20no\x20encontrado','1183285VuRkiz','errGo','toFixed','MsYkX','PrUKM','dbBmQ','Duplicado\x20en\x20campo\x20único','NODE_ENV','RKbqj','Cantidad_Consumo','gqrUf','eleVr','vxUCK','descripcionTamanos','lVoQP','Id_Producto_Tamano','between','Error\x20al\x20verificar\x20configuración\x20de\x20insumos\x20del\x20producto','ZmLuy','gKqoa','GBvcQ','BvuxL','no\x20válido','PrecioTotal','cuGFe','170517jlswNZ','CXcCb','sequelize','Id_Producto_Tallas_Producto_Talla','📊\x20Total\x20de\x20insumos\x20configurados\x20en\x20BD:\x20','SQWJJ','OTpsU','rmGYK','uAdkz','WvOub','Id_Producto_Tallas',':\x20disponible\x20','Tarjeta','\x20del\x20producto\x20','split','findAll','string','findOne','NFean','Detalle_Venta','La\x20transferencia\x20requiere\x20número\x20de\x20referencia','values','Método\x20de\x20pago\x20no\x20válido','Error\x20al\x20validar\x20stock\x20de\x20venta:','dZpNi','../config/db','Producto\x20desconocido','QymZl','⚠️\x20','\x20no\x20tiene\x20el\x20tamaño\x20','json','HiIiJ','94gmuWfd','fLYIq','vuqdx','RnrQQ','sXPLv','Error\x20al\x20obtener\x20ventas','fRIzE','log','TSuwX','Error\x20al\x20anular\x20venta:\x20','HBkiD','vhzCP','Error\x20al\x20obtener\x20tamaños\x20del\x20producto:','marcarVentaCompletada','VzMzd','dvuAp','azxKQ','eBtbG','ZwPvj','FkUeT','ugTWS','euHYr','Stock\x20insuficiente\x20para\x20insumo\x20','PrUgg','HKTht','Faltan\x20datos\x20requeridos','toSFg','CblQa','uLMLF','diagnosticarInsumosTamaño','Id_Servicio','getFullYear','yivEF','Error\x20al\x20generar\x20reporte\x20mensual','Tamanos_Data','FwUyZ','kGBtH','aMRBD'];a0_0x2956=function(){return _0x2c72bc;};return a0_0x2956();}function a0_0x1dce(_0x496485,_0x36f56c){const _0x295698=a0_0x2956();return a0_0x1dce=function(_0x1dce56,_0x5ce4f0){_0x1dce56=_0x1dce56-0x1aa;let _0x95b86d=_0x295698[_0x1dce56];return _0x95b86d;},a0_0x1dce(_0x496485,_0x36f56c);}const a0_0x1f2711=a0_0x1dce;(function(_0x1eaa9f,_0x319788){const _0x735c2b=a0_0x1dce,_0x25da17=_0x1eaa9f();while(!![]){try{const _0x409058=parseInt(_0x735c2b(0x2f9))/0x1*(-parseInt(_0x735c2b(0x1ae))/0x2)+parseInt(_0x735c2b(0x346))/0x3+-parseInt(_0x735c2b(0x317))/0x4*(parseInt(_0x735c2b(0x32d))/0x5)+-parseInt(_0x735c2b(0x2d7))/0x6+-parseInt(_0x735c2b(0x2aa))/0x7+parseInt(_0x735c2b(0x2b0))/0x8*(parseInt(_0x735c2b(0x282))/0x9)+-parseInt(_0x735c2b(0x1de))/0xa*(-parseInt(_0x735c2b(0x219))/0xb);if(_0x409058===_0x319788)break;else _0x25da17['push'](_0x25da17['shift']());}catch(_0xa4818){_0x25da17['push'](_0x25da17['shift']());}}}(a0_0x2956,0x90a47));const {Ventas,Detalle_Venta,Productos,Producto_Tallas,Producto_Tamano_Insumos,Producto_Tamano,Tamano,Tallas,Agendamientos,Empleados,Servicios,Clientes,Insumos}=require('../models'),{sequelize}=require(a0_0x1f2711(0x35f)),{UniqueConstraintError,ValidationError,DatabaseError}=require(a0_0x1f2711(0x348)),validarCliente=async(_0x125e81,_0xbbca71)=>{const _0x28f71c=a0_0x1f2711,_0x547691={'XBhtl':_0x28f71c(0x2ca)},_0x379c51=await Clientes[_0x28f71c(0x24b)](_0x125e81,{'transaction':_0xbbca71});if(!_0x379c51)throw new Error(_0x547691[_0x28f71c(0x21f)]);return _0x379c51;},validarEmpleado=async(_0x8098e7,_0x5835b7)=>{const _0x9903b8=a0_0x1f2711,_0x3df7dc={'WgnzH':_0x9903b8(0x32c)},_0x4bc40a=await Empleados['findByPk'](_0x8098e7,{'transaction':_0x5835b7});if(!_0x4bc40a)throw new Error(_0x3df7dc[_0x9903b8(0x2bf)]);return _0x4bc40a;},validarMetodoPago=(_0x485829,_0x503399)=>{const _0x9d99c7=a0_0x1f2711,_0x596beb={'cQLzy':_0x9d99c7(0x352),'wjPEI':_0x9d99c7(0x2df),'xNRXv':_0x9d99c7(0x241),'lVoQP':_0x9d99c7(0x35c),'MKIdg':function(_0x18d976,_0x16aac5){return _0x18d976===_0x16aac5;},'SDZAE':_0x9d99c7(0x35a)},_0x2c65d5=[_0x9d99c7(0x244),_0x596beb[_0x9d99c7(0x2da)],_0x596beb['wjPEI'],_0x596beb[_0x9d99c7(0x22d)]];if(!_0x2c65d5[_0x9d99c7(0x286)](_0x485829))throw new Error(_0x596beb[_0x9d99c7(0x33b)]);if(_0x596beb['MKIdg'](_0x485829,_0x9d99c7(0x2df))&&!_0x503399)throw new Error(_0x596beb[_0x9d99c7(0x1fc)]);},calcularPrecio=async(_0xf9cbe5,_0x5b4908,_0x58412b,_0x2846db,_0x2d4208)=>{const _0x1d51b4=a0_0x1f2711,_0x27203f={'JGOPg':function(_0x526818,_0x405179){return _0x526818(_0x405179);},'ZcdbX':function(_0x3bb44c,_0x34256a){return _0x3bb44c+_0x34256a;},'EGMDC':function(_0x316638,_0x552f5f){return _0x316638>_0x552f5f;},'fLYIq':function(_0x2b4cc6,_0x3797fb){return _0x2b4cc6*_0x3797fb;},'kLsDl':function(_0x1e8f6e,_0x2d254d){return _0x1e8f6e+_0x2d254d;},'ZwPvj':function(_0x5f1436,_0x45544f){return _0x5f1436(_0x45544f);},'FIlSb':function(_0x4e41a1,_0x77a897){return _0x4e41a1*_0x77a897;},'AQIgG':function(_0x10fd2d,_0x8093af){return _0x10fd2d(_0x8093af);},'zTRea':function(_0x2279de,_0x5c7f71){return _0x2279de>_0x5c7f71;}};let _0x3ba528=0x0;try{if(_0x58412b&&_0x58412b[_0x1d51b4(0x2b1)]>0x0)for(const _0xacf09b of _0x58412b){const _0x5c42be=_0x27203f[_0x1d51b4(0x308)](Number,_0xacf09b['PrecioTotal']||0x0);_0x3ba528+=_0x5c42be;}else{if(_0x5b4908&&_0x27203f[_0x1d51b4(0x323)](_0x5b4908[_0x1d51b4(0x2b1)],0x0))for(const _0xd1596a of _0x5b4908){const _0x2319ea=await Producto_Tallas['findOne']({'where':{'Id_Productos':_0xf9cbe5[_0x1d51b4(0x293)],'Talla':_0xd1596a['talla']},'transaction':_0x2d4208});if(_0x2319ea){const _0x425369=_0x27203f[_0x1d51b4(0x1af)](_0x27203f['kLsDl'](_0x27203f[_0x1d51b4(0x308)](Number,_0xf9cbe5[_0x1d51b4(0x249)]),_0x27203f[_0x1d51b4(0x308)](Number,_0x2319ea[_0x1d51b4(0x2d9)])),_0xd1596a[_0x1d51b4(0x2cb)]);_0x3ba528+=_0x425369;}else{const _0x1db4f9=_0x27203f[_0x1d51b4(0x1c0)](Number,_0xf9cbe5['Precio_Venta'])*_0xd1596a[_0x1d51b4(0x2cb)];_0x3ba528+=_0x1db4f9;}}else _0x3ba528=_0x27203f[_0x1d51b4(0x27c)](_0x27203f[_0x1d51b4(0x1df)](Number,_0xf9cbe5[_0x1d51b4(0x249)]),_0x2846db);}(!_0x3ba528||_0x27203f['AQIgG'](isNaN,_0x3ba528))&&(_0x58412b&&_0x27203f[_0x1d51b4(0x1d8)](_0x58412b[_0x1d51b4(0x2b1)],0x0)?_0x3ba528=_0x58412b[_0x1d51b4(0x2fe)]((_0x5f03d3,_0x2d2390)=>{const _0x272e72=_0x1d51b4,_0x5cfd3b=_0x27203f[_0x272e72(0x308)](Number,_0x2d2390[_0x272e72(0x344)]||0x0);return _0x27203f[_0x272e72(0x321)](_0x5f03d3,_0x5cfd3b);},0x0):_0x3ba528=_0x27203f['ZwPvj'](Number,_0xf9cbe5[_0x1d51b4(0x249)])*_0x2846db);}catch(_0x44cdac){_0x3ba528=_0x27203f[_0x1d51b4(0x27c)](_0x27203f[_0x1d51b4(0x1c0)](Number,_0xf9cbe5[_0x1d51b4(0x249)]),_0x2846db);}return _0x3ba528;},actualizarStockProducto=async(_0xeeb4ec,_0xc43971,_0x5b4a09)=>{const _0x1da5fa=a0_0x1f2711,_0x414b51={'qIXqB':function(_0xe0c9bb,_0x2c595a){return _0xe0c9bb(_0x2c595a);},'vuqdx':function(_0x524f04,_0x3bacbd){return _0x524f04-_0x3bacbd;}},_0x257121=await Productos[_0x1da5fa(0x24b)](_0xeeb4ec,{'transaction':_0x5b4a09});if(!_0x257121)throw new Error('Producto\x20con\x20ID\x20'+_0xeeb4ec+_0x1da5fa(0x310));const _0x3fd41d=_0x414b51['qIXqB'](Number,_0x257121[_0x1da5fa(0x2c3)]||0x0),_0x4d095=_0x414b51[_0x1da5fa(0x1b0)](_0x3fd41d,_0xc43971);if(_0x4d095<0x0)throw new Error('Stock\x20insuficiente\x20para\x20el\x20producto\x20'+_0x257121[_0x1da5fa(0x2ae)]+'.\x20Disponible:\x20'+_0x3fd41d+_0x1da5fa(0x240)+_0xc43971);return await _0x257121['update']({'Stock':_0x4d095},{'transaction':_0x5b4a09}),_0x4d095;},actualizarStockTallas=async(_0x3d1a6d,_0x6bc6ba,_0x3d11b8)=>{const _0x3dcead=a0_0x1f2711,_0x616101={'KNGiI':function(_0x2db6e3,_0x244391){return _0x2db6e3(_0x244391);},'JOfyF':function(_0x33b20c,_0x7c6d06){return _0x33b20c(_0x7c6d06);},'IMMQj':function(_0x5f1ad1,_0x39bdeb){return _0x5f1ad1<_0x39bdeb;}};for(const _0x4f5d91 of _0x6bc6ba){const _0x18993d=_0x4f5d91[_0x3dcead(0x23b)]||_0x4f5d91[_0x3dcead(0x2cf)]||_0x4f5d91[_0x3dcead(0x2ad)]||'';if(!_0x18993d)throw new Error('Nombre\x20de\x20talla\x20no\x20válido\x20para\x20el\x20producto\x20'+_0x3d1a6d);const _0x34891e=await Tallas['findOne']({'where':{'Nombre':_0x18993d},'transaction':_0x3d11b8});if(!_0x34891e)throw new Error(_0x3dcead(0x20a)+_0x18993d+_0x3dcead(0x1f4));const _0x2335ff=await Producto_Tallas[_0x3dcead(0x357)]({'where':{'Id_Productos':_0x3d1a6d,'Id_Tallas':_0x34891e[_0x3dcead(0x2eb)]},'transaction':_0x3d11b8});if(!_0x2335ff)throw new Error(_0x3dcead(0x20a)+_0x18993d+'\x20no\x20encontrada\x20para\x20el\x20producto\x20'+_0x3d1a6d);const _0xe2ceb1=_0x616101[_0x3dcead(0x325)](Number,_0x2335ff[_0x3dcead(0x2c3)]||0x0),_0x2fd379=_0x616101[_0x3dcead(0x311)](Number,_0x4f5d91['cantidad']||_0x4f5d91[_0x3dcead(0x257)]||0x0),_0x28c71d=_0xe2ceb1-_0x2fd379;if(_0x616101[_0x3dcead(0x2b9)](_0x28c71d,0x0))throw new Error(_0x3dcead(0x1d9)+_0x18993d+'.\x20Disponible:\x20'+_0xe2ceb1+_0x3dcead(0x240)+_0x2fd379);await _0x2335ff[_0x3dcead(0x1fd)]({'Stock':_0x28c71d},{'transaction':_0x3d11b8});}},actualizarStockInsumos=async(_0x25365b,_0x42231d,_0x1a8bdb)=>{const _0xcd8604=a0_0x1f2711,_0x270fb0={'DWhFE':_0xcd8604(0x2dc),'vrnIA':_0xcd8604(0x202),'cGRZf':_0xcd8604(0x227),'DtkpG':_0xcd8604(0x256),'EzyvR':function(_0x1f0852,_0x4a3ee0){return _0x1f0852(_0x4a3ee0);},'ZwZYz':function(_0x5c0968,_0x577ef1){return _0x5c0968-_0x577ef1;},'wwBtx':function(_0x3dda1e,_0x55f20c){return _0x3dda1e<_0x55f20c;},'XtPuq':'===\x20FIN\x20ACTUALIZACIÓN\x20STOCK\x20INSUMOS\x20===\x0a'};console['log'](_0x270fb0[_0xcd8604(0x203)]),console[_0xcd8604(0x1b5)](_0x270fb0[_0xcd8604(0x1ee)],_0x25365b),console[_0xcd8604(0x1b5)](_0x270fb0[_0xcd8604(0x2e9)],JSON[_0xcd8604(0x224)](_0x42231d,null,0x2));for(const _0xee50c0 of _0x42231d){const _0x416a5c=_0xee50c0[_0xcd8604(0x2ad)]||_0xee50c0[_0xcd8604(0x2ae)]||'';if(!_0x416a5c)throw new Error(_0xcd8604(0x29c)+_0x25365b);const _0x35ad72=await Tamano[_0xcd8604(0x357)]({'where':{'Nombre':_0x416a5c},'transaction':_0x1a8bdb});if(!_0x35ad72)throw new Error(_0xcd8604(0x218)+_0x416a5c+_0xcd8604(0x310));const _0x2be16d=await Producto_Tamano['findOne']({'where':{'Id_Productos':_0x25365b,'Id_Tamano':_0x35ad72[_0xcd8604(0x22f)]},'transaction':_0x1a8bdb});if(!_0x2be16d)throw new Error(_0xcd8604(0x1ea)+_0x25365b+_0xcd8604(0x1ab)+_0xee50c0[_0xcd8604(0x2ad)]+'\x20configurado');const _0x2f2af3=await Producto_Tamano_Insumos[_0xcd8604(0x355)]({'where':{'Id_Producto_Tamano':_0x2be16d[_0xcd8604(0x33c)]},'include':[{'model':Insumos,'as':_0x270fb0[_0xcd8604(0x222)]}],'transaction':_0x1a8bdb});console[_0xcd8604(0x1b5)]('📊\x20Insumos\x20configurados\x20en\x20BD\x20para\x20'+_0x416a5c+':\x20'+_0x2f2af3[_0xcd8604(0x2b1)]),_0x2f2af3[_0xcd8604(0x21e)]((_0x266fc4,_0x4a0738)=>{const _0x3950a1=_0xcd8604;console['log']('\x20\x20'+(_0x4a0738+0x1)+'.\x20'+_0x266fc4[_0x3950a1(0x256)][_0x3950a1(0x2ae)]+_0x3950a1(0x27a)+_0x266fc4['Cantidad_Consumo']+'\x20-\x20Stock\x20actual:\x20'+_0x266fc4[_0x3950a1(0x256)][_0x3950a1(0x2c3)]);});const _0xcc16ee=Number(_0xee50c0[_0xcd8604(0x257)]||_0xee50c0[_0xcd8604(0x2cb)]||0x0);console['log'](_0xcd8604(0x27d)+_0xcc16ee);for(const _0xccfbe6 of _0x2f2af3){const _0x3d725d=_0xccfbe6[_0xcd8604(0x256)],_0x43c1e9=_0x270fb0[_0xcd8604(0x29d)](Number,_0xccfbe6[_0xcd8604(0x336)]||0x0),_0x588929=_0x43c1e9*_0xcc16ee;console[_0xcd8604(0x1b5)]('\x0a🔍\x20Procesando\x20insumo:\x20'+_0x3d725d[_0xcd8604(0x2ae)]),console[_0xcd8604(0x1b5)](_0xcd8604(0x29e)+_0x43c1e9),console[_0xcd8604(0x1b5)](_0xcd8604(0x1db)+_0x588929),console[_0xcd8604(0x1b5)](_0xcd8604(0x2de)+_0x3d725d['Stock']);const _0x421927=Number(_0x3d725d[_0xcd8604(0x2c3)]||0x0),_0x27acf9=_0x270fb0[_0xcd8604(0x2a2)](_0x421927,_0x588929);if(_0x270fb0[_0xcd8604(0x212)](_0x27acf9,0x0))throw new Error(_0xcd8604(0x1c4)+_0x3d725d[_0xcd8604(0x2ae)]+_0xcd8604(0x271)+_0x421927+_0xcd8604(0x2b3)+_0x588929+'\x20('+_0x43c1e9+_0xcd8604(0x318)+_0xcc16ee+')');await _0x3d725d[_0xcd8604(0x1fd)]({'Stock':_0x27acf9},{'transaction':_0x1a8bdb}),console[_0xcd8604(0x1b5)](_0xcd8604(0x28d)+_0x421927+_0xcd8604(0x25b)+_0x27acf9);}}console['log'](_0x270fb0[_0xcd8604(0x25a)]);};exports[a0_0x1f2711(0x1d4)]=async(_0x54cc09,_0x54fb76)=>{const _0x29f2fa=a0_0x1f2711,_0x215ddb={'TEWZq':'error','lArMk':_0x29f2fa(0x221),'fDQNN':_0x29f2fa(0x209)};try{const {idProducto:_0x175612,nombreTamano:_0x20b678}=_0x54cc09['params'],_0x2f0f09=await Tamano['findOne']({'where':{'Nombre':_0x20b678}});if(!_0x2f0f09)return _0x54fb76[_0x29f2fa(0x1e0)](0x194)[_0x29f2fa(0x1ac)]({'status':_0x215ddb[_0x29f2fa(0x1d5)],'message':_0x29f2fa(0x218)+_0x20b678+_0x29f2fa(0x310)});const _0x2dbc05=await Producto_Tamano[_0x29f2fa(0x357)]({'where':{'Id_Productos':_0x175612,'Id_Tamano':_0x2f0f09['Id_Tamano']}});if(!_0x2dbc05)return _0x54fb76[_0x29f2fa(0x1e0)](0x194)['json']({'status':_0x215ddb[_0x29f2fa(0x1d5)],'message':_0x29f2fa(0x1ea)+_0x175612+'\x20no\x20tiene\x20el\x20tamaño\x20'+_0x20b678+'\x20configurado'});const _0x4fb5f8=await Producto_Tamano_Insumos[_0x29f2fa(0x355)]({'where':{'Id_Producto_Tamano':_0x2dbc05[_0x29f2fa(0x33c)]},'include':[{'model':Insumos,'as':_0x29f2fa(0x256)}]}),_0x3a9344=_0x4fb5f8['map'](_0x3fe630=>({'Id_Insumo':_0x3fe630['Id_Insumos_Insumo'][_0x29f2fa(0x27b)],'Nombre':_0x3fe630[_0x29f2fa(0x256)][_0x29f2fa(0x2ae)],'Stock_Actual':_0x3fe630[_0x29f2fa(0x256)]['Stock'],'Cantidad_Consumo':_0x3fe630[_0x29f2fa(0x336)],'Unidad_Medida':_0x3fe630[_0x29f2fa(0x256)][_0x29f2fa(0x2d1)]}));_0x54fb76['json']({'status':_0x215ddb['lArMk'],'message':_0x29f2fa(0x30b)+_0x175612+_0x29f2fa(0x290)+_0x20b678,'data':{'Id_Producto':_0x175612,'Id_Tamano':_0x2f0f09[_0x29f2fa(0x22f)],'Nombre_Tamano':_0x20b678,'Id_Producto_Tamano':_0x2dbc05[_0x29f2fa(0x33c)],'Total_Insumos':_0x3a9344[_0x29f2fa(0x2b1)],'Insumos':_0x3a9344}});}catch(_0x5d71ae){console[_0x29f2fa(0x2f8)](_0x29f2fa(0x22c),_0x5d71ae),_0x54fb76[_0x29f2fa(0x1e0)](0x1f4)[_0x29f2fa(0x1ac)]({'status':_0x29f2fa(0x2f8),'message':_0x215ddb[_0x29f2fa(0x31c)],'detail':_0x5d71ae['message']});}},exports[a0_0x1f2711(0x2e5)]=async(_0x3705cd,_0x3aa60f)=>{const _0x2d8c96=a0_0x1f2711,_0x42b470={'uXKCz':function(_0x10980e,_0x21b810){return _0x10980e>_0x21b810;},'KldVp':function(_0x4c591f,_0x4e3f89){return _0x4c591f>_0x4e3f89;},'fXBhI':function(_0x3ddbb7,_0xb3d847){return _0x3ddbb7(_0xb3d847);},'XoLkR':function(_0x26295b,_0x4ca1e0){return _0x26295b===_0x4ca1e0;},'vkAwn':'Desconocido','ApwtI':_0x2d8c96(0x359),'OTpsU':_0x2d8c96(0x2e1),'PDblB':_0x2d8c96(0x349),'FLBEy':'Id_Producto_Tamano_Insumos_Producto_Tamano_Insumo','jWTJM':_0x2d8c96(0x2f1),'PrUKM':_0x2d8c96(0x31e),'uNguB':_0x2d8c96(0x266),'YhRqn':_0x2d8c96(0x2ae),'XeGmt':_0x2d8c96(0x221),'nDrIB':_0x2d8c96(0x2a1),'qmvEf':_0x2d8c96(0x2f8),'BvuxL':_0x2d8c96(0x2e4),'cuGFe':_0x2d8c96(0x1b3)};try{const _0x1f0b40=await Ventas[_0x2d8c96(0x355)]({'include':[{'model':Detalle_Venta,'as':_0x42b470[_0x2d8c96(0x2db)],'include':[{'model':Productos,'as':_0x42b470[_0x2d8c96(0x34c)]},{'model':Producto_Tallas,'as':_0x42b470['PDblB']},{'model':Producto_Tamano_Insumos,'as':_0x42b470['FLBEy']},{'model':Servicios,'as':_0x2d8c96(0x285)}]},{'model':Agendamientos,'as':_0x42b470['jWTJM'],'required':![]},{'model':Empleados,'as':_0x42b470[_0x2d8c96(0x331)],'attributes':[_0x42b470[_0x2d8c96(0x30a)],_0x42b470['YhRqn']]}]}),_0x3c0515=_0x1f0b40[_0x2d8c96(0x2ed)](_0x18fdc5=>{const _0x2cf90f=_0x2d8c96,_0xcedaf0=_0x18fdc5[_0x2cf90f(0x250)](),_0x38cf62=_0xcedaf0[_0x2cf90f(0x359)]||[],_0x3009e9=_0xcedaf0[_0x2cf90f(0x2f1)]||null,_0x185231=_0xcedaf0['Id_Empleados_Empleado']||{},_0x18bf8f=_0x38cf62[_0x2cf90f(0x2ed)](_0x4b9a76=>{const _0x378315=_0x2cf90f,_0x56a465={..._0x4b9a76};if(_0x4b9a76[_0x378315(0x328)])try{_0x56a465[_0x378315(0x243)]=JSON[_0x378315(0x304)](_0x4b9a76['Tallas_Data']);}catch(_0x122d8f){_0x56a465['Tallas']=[];}else _0x56a465['Tallas']=[];if(_0x4b9a76['Tamanos_Data'])try{_0x56a465[_0x378315(0x204)]=JSON[_0x378315(0x304)](_0x4b9a76[_0x378315(0x1d0)]);}catch(_0x459ad6){_0x56a465[_0x378315(0x204)]=[];}else _0x56a465[_0x378315(0x204)]=[];return _0x56a465[_0x378315(0x2f5)]=_0x56a465[_0x378315(0x243)]&&_0x42b470[_0x378315(0x23f)](_0x56a465[_0x378315(0x243)]['length'],0x0),_0x56a465[_0x378315(0x1e1)]=_0x56a465[_0x378315(0x204)]&&_0x42b470[_0x378315(0x1fa)](_0x56a465[_0x378315(0x204)][_0x378315(0x2b1)],0x0),_0x56a465['tieneTallas']&&(_0x56a465[_0x378315(0x1e4)]=_0x56a465[_0x378315(0x243)][_0x378315(0x2ed)](_0x41208e=>(_0x41208e[_0x378315(0x2cb)]||_0x41208e[_0x378315(0x257)]||0x0)+_0x378315(0x26e)+(_0x41208e['talla']||_0x41208e[_0x378315(0x2cf)]||_0x41208e[_0x378315(0x2ad)]||'N/A'))[_0x378315(0x2f2)](',\x20')),_0x56a465[_0x378315(0x1e1)]&&(_0x56a465[_0x378315(0x33a)]=_0x56a465[_0x378315(0x204)]['map'](_0x1e76ad=>_0x1e76ad[_0x378315(0x257)]+_0x378315(0x318)+_0x1e76ad[_0x378315(0x2ad)])[_0x378315(0x2f2)](',\x20')),_0x56a465;}),_0x252101=_0x18bf8f[_0x2cf90f(0x2fe)]((_0x54a487,_0x316582)=>_0x54a487+Number(_0x316582[_0x2cf90f(0x1f6)]||0x0),0x0),_0x15d5d8=_0x3009e9?_0x42b470[_0x2cf90f(0x307)](Number,_0x3009e9[_0x2cf90f(0x1f6)]||0x0):0x0,_0x5c4f44=_0x252101+_0x15d5d8,_0x4fad2f=_0x42b470['XoLkR'](Number(_0xcedaf0[_0x2cf90f(0x1dd)]),_0x5c4f44);return{'Id_Ventas':_0xcedaf0['Id_Ventas'],'Id_Agendamientos':_0xcedaf0['Id_Agendamientos'],'Id_Cliente':_0xcedaf0[_0x2cf90f(0x2f0)],'Id_Empleados':_0xcedaf0['Id_Empleados'],'Nombre_Empleado':_0x185231?.[_0x2cf90f(0x2ae)]||_0x42b470['vkAwn'],'Fecha':_0xcedaf0[_0x2cf90f(0x20c)],'Total':_0xcedaf0[_0x2cf90f(0x1dd)],'Estado':_0xcedaf0[_0x2cf90f(0x27e)],'M_Pago':_0xcedaf0[_0x2cf90f(0x211)],'Referencia':_0xcedaf0['Referencia'],'Detalle_Venta':_0x18bf8f,'tieneAgendamiento':!!_0xcedaf0[_0x2cf90f(0x214)],'Agendamiento':_0x3009e9,'totalValidado':_0x4fad2f};});_0x3aa60f[_0x2d8c96(0x1ac)]({'status':_0x42b470['XeGmt'],'data':_0x3c0515});}catch(_0x2e1d90){console['error'](_0x42b470[_0x2d8c96(0x28c)],_0x2e1d90),_0x3aa60f[_0x2d8c96(0x1e0)](0x1f4)['json']({'status':_0x42b470['qmvEf'],'message':_0x42b470[_0x2d8c96(0x1f5)](process[_0x2d8c96(0x261)][_0x2d8c96(0x334)],_0x42b470[_0x2d8c96(0x342)])?_0x2d8c96(0x316)+_0x2e1d90[_0x2d8c96(0x2a0)]:_0x42b470[_0x2d8c96(0x345)]});}},exports[a0_0x1f2711(0x303)]=async(_0x5415ab,_0x4e5f3a)=>{const _0x14dd04=a0_0x1f2711,_0x1a3b6e={'tRxAc':function(_0x2912da,_0x9696d6){return _0x2912da>_0x9696d6;},'qSKRD':function(_0xb9200,_0xe26a91){return _0xb9200>_0xe26a91;},'ugTWS':_0x14dd04(0x359),'yivEF':_0x14dd04(0x2e1),'hGGPM':_0x14dd04(0x349),'IVItF':_0x14dd04(0x1d6),'XiVFb':_0x14dd04(0x285),'DaQHg':_0x14dd04(0x2f1),'NFean':_0x14dd04(0x31e),'LzBJE':'Nombre','pXUEE':_0x14dd04(0x2f8),'iACsz':_0x14dd04(0x31f),'SOllk':function(_0x34bcff,_0x56af78){return _0x34bcff(_0x56af78);},'cIeSH':function(_0x5b2529,_0x3b1574){return _0x5b2529+_0x3b1574;},'tHCyR':function(_0x1f7426,_0x350ef4){return _0x1f7426===_0x350ef4;},'poStT':function(_0x446c16,_0x3aac3f){return _0x446c16(_0x3aac3f);},'Uonci':_0x14dd04(0x281),'NDBCP':_0x14dd04(0x300),'fytSt':_0x14dd04(0x258)};try{const {id:_0x267e44}=_0x5415ab[_0x14dd04(0x28a)],_0x500511=await Ventas[_0x14dd04(0x24b)](_0x267e44,{'include':[{'model':Detalle_Venta,'as':_0x1a3b6e[_0x14dd04(0x1c2)],'include':[{'model':Productos,'as':_0x1a3b6e[_0x14dd04(0x1ce)]},{'model':Producto_Tallas,'as':_0x1a3b6e['hGGPM']},{'model':Producto_Tamano_Insumos,'as':_0x1a3b6e['IVItF']},{'model':Servicios,'as':_0x1a3b6e[_0x14dd04(0x30d)]}]},{'model':Agendamientos,'as':_0x1a3b6e['DaQHg'],'required':![]},{'model':Empleados,'as':_0x1a3b6e[_0x14dd04(0x358)],'attributes':[_0x1a3b6e['LzBJE']]}]});if(!_0x500511)return _0x4e5f3a[_0x14dd04(0x1e0)](0x194)[_0x14dd04(0x1ac)]({'status':_0x1a3b6e[_0x14dd04(0x2ea)],'message':_0x1a3b6e['iACsz']});const _0x49a0e0=_0x500511[_0x14dd04(0x250)](),_0x44abb0=_0x49a0e0[_0x14dd04(0x359)]||[],_0x1f9bce=_0x49a0e0['Id_Agendamientos_Agendamiento']||null,_0x4caacd=_0x49a0e0[_0x14dd04(0x31e)]||{},_0xe7c895=_0x44abb0[_0x14dd04(0x2ed)](_0x388b6d=>{const _0x387885=_0x14dd04,_0x32eae0={..._0x388b6d};if(_0x388b6d[_0x387885(0x328)])try{_0x32eae0[_0x387885(0x243)]=JSON[_0x387885(0x304)](_0x388b6d[_0x387885(0x328)]);}catch(_0x4b43be){_0x32eae0[_0x387885(0x243)]=[];}else _0x32eae0[_0x387885(0x243)]=[];if(_0x388b6d[_0x387885(0x1d0)])try{_0x32eae0['Tamanos']=JSON['parse'](_0x388b6d[_0x387885(0x1d0)]);}catch(_0xee0c79){_0x32eae0['Tamanos']=[];}else _0x32eae0[_0x387885(0x204)]=[];return _0x32eae0[_0x387885(0x2f5)]=_0x32eae0[_0x387885(0x243)]&&_0x1a3b6e['tRxAc'](_0x32eae0['Tallas'][_0x387885(0x2b1)],0x0),_0x32eae0[_0x387885(0x1e1)]=_0x32eae0[_0x387885(0x204)]&&_0x1a3b6e[_0x387885(0x1e9)](_0x32eae0['Tamanos']['length'],0x0),_0x32eae0[_0x387885(0x2f5)]&&(_0x32eae0[_0x387885(0x1e4)]=_0x32eae0[_0x387885(0x243)]['map'](_0x7eb9cf=>(_0x7eb9cf[_0x387885(0x2cb)]||_0x7eb9cf['Cantidad']||0x0)+'\x20x\x20Talla\x20'+(_0x7eb9cf[_0x387885(0x23b)]||_0x7eb9cf[_0x387885(0x2cf)]||_0x7eb9cf[_0x387885(0x2ad)]||'N/A'))[_0x387885(0x2f2)](',\x20')),_0x32eae0[_0x387885(0x1e1)]&&(_0x32eae0[_0x387885(0x33a)]=_0x32eae0[_0x387885(0x204)][_0x387885(0x2ed)](_0x367aa5=>_0x367aa5[_0x387885(0x257)]+_0x387885(0x318)+_0x367aa5['nombre'])[_0x387885(0x2f2)](',\x20')),_0x32eae0;}),_0xd70496=_0xe7c895[_0x14dd04(0x2fe)]((_0x2a89b2,_0x33d6b8)=>_0x2a89b2+Number(_0x33d6b8[_0x14dd04(0x1f6)]||0x0),0x0),_0x213e32=_0x1f9bce?_0x1a3b6e['SOllk'](Number,_0x1f9bce[_0x14dd04(0x1f6)]||0x0):0x0,_0x42e342=_0x1a3b6e[_0x14dd04(0x2c7)](_0xd70496,_0x213e32),_0x3c6246=_0x1a3b6e[_0x14dd04(0x2fb)](_0x1a3b6e[_0x14dd04(0x1e5)](Number,_0x49a0e0[_0x14dd04(0x1dd)]),_0x42e342);_0x4e5f3a[_0x14dd04(0x1ac)]({'status':_0x14dd04(0x221),'data':{'Id_Ventas':_0x49a0e0[_0x14dd04(0x2c5)],'Id_Agendamientos':_0x49a0e0[_0x14dd04(0x214)],'Id_Cliente':_0x49a0e0[_0x14dd04(0x2f0)],'Id_Empleados':_0x49a0e0[_0x14dd04(0x266)],'Nombre_Empleado':_0x4caacd?.['Nombre']||_0x1a3b6e[_0x14dd04(0x270)],'Fecha':_0x49a0e0['Fecha'],'Total':_0x49a0e0['Total'],'M_Pago':_0x49a0e0[_0x14dd04(0x211)],'Referencia':_0x49a0e0[_0x14dd04(0x21a)],'Estado':_0x49a0e0[_0x14dd04(0x27e)],'Detalle_Venta':_0xe7c895,'tieneAgendamiento':!!_0x49a0e0[_0x14dd04(0x214)],'Agendamiento':_0x1f9bce,'totalValidado':_0x3c6246}});}catch(_0xf10dd4){console[_0x14dd04(0x2f8)](_0x1a3b6e[_0x14dd04(0x213)],_0xf10dd4),_0x4e5f3a['status'](0x1f4)[_0x14dd04(0x1ac)]({'status':_0x14dd04(0x2f8),'message':_0x1a3b6e[_0x14dd04(0x1ec)]});}},exports['crearVenta']=async(_0x5544c3,_0x5075d2)=>{const _0x1efb34=a0_0x1f2711,_0x39bde1={'vMsUo':function(_0xb3aa28,_0x176951){return _0xb3aa28===_0x176951;},'RKbqj':_0x1efb34(0x356),'gqrUf':function(_0x26bf14,_0x1f9c29){return _0x26bf14||_0x1f9c29;},'ljjQX':_0x1efb34(0x1c7),'IJlSV':function(_0x26cebb,_0x2031a6,_0x251759){return _0x26cebb(_0x2031a6,_0x251759);},'qpbyp':function(_0x21921e,_0xbff7de,_0x58d44d){return _0x21921e(_0xbff7de,_0x58d44d);},'EwQJa':_0x1efb34(0x2f8),'jwNks':_0x1efb34(0x1e2),'euHYr':function(_0x2d8136,_0x47f771){return _0x2d8136(_0x47f771);},'QJYOX':_0x1efb34(0x293),'zfUaw':_0x1efb34(0x2ae),'gILrt':'Precio_Venta','yCQSV':function(_0x3b4b52,_0x52f487){return _0x3b4b52===_0x52f487;},'QjTJF':_0x1efb34(0x256),'RnrQQ':function(_0x1ca135,_0x22cd5c){return _0x1ca135*_0x22cd5c;},'PaqbU':function(_0x580810,_0xc97dbc){return _0x580810(_0xc97dbc);},'NuAhx':function(_0x1b8b20,_0x292b96){return _0x1b8b20<_0x292b96;},'ZWGgf':function(_0x17aceb,_0x561c60){return _0x17aceb<_0x561c60;},'CXcCb':_0x1efb34(0x2eb),'nhEqA':function(_0xdac483,_0x39d409){return _0xdac483>_0x39d409;},'qOiSB':function(_0xd3a257,_0x1a5318){return _0xd3a257(_0x1a5318);},'HKTht':function(_0x4ff13e,_0x2101fb){return _0x4ff13e===_0x2101fb;},'PGxAi':function(_0x3c752b,_0x3f079c){return _0x3c752b>_0x3f079c;},'Uxafh':function(_0x13ede7,_0x159823,_0x553a34,_0x27049e,_0x39b727,_0x41941a){return _0x13ede7(_0x159823,_0x553a34,_0x27049e,_0x39b727,_0x41941a);},'hqIBa':function(_0x3f3096,_0x3cd8e6){return _0x3f3096+_0x3cd8e6;},'CblQa':function(_0x5ad7e5,_0x23d6ca){return _0x5ad7e5||_0x23d6ca;},'WvOub':function(_0x32013d,_0x377fa7){return _0x32013d===_0x377fa7;},'xJxva':function(_0x3d5545,_0x7b33b9){return _0x3d5545>_0x7b33b9;},'MsYkX':function(_0x5eca51,_0x1ce0a5,_0x5568c9,_0x26b7be){return _0x5eca51(_0x1ce0a5,_0x5568c9,_0x26b7be);},'DkmhY':function(_0x2a177d,_0x1da371,_0x3244d2,_0x363ce4){return _0x2a177d(_0x1da371,_0x3244d2,_0x363ce4);},'dXnZx':_0x1efb34(0x221),'PCMla':_0x1efb34(0x322),'tpkBc':'1|4|5|2|0|3|6','eQous':function(_0x1b2890,_0x28227f){return _0x1b2890 instanceof _0x28227f;},'TLpwY':_0x1efb34(0x246),'aIqdI':_0x1efb34(0x2bb),'CaJlI':_0x1efb34(0x333),'LYGHK':_0x1efb34(0x2e7),'DLrkX':_0x1efb34(0x263),'EVOFJ':_0x1efb34(0x1f3),'rmGYK':_0x1efb34(0x20b),'YZIQy':_0x1efb34(0x343)},_0x325daa=await sequelize[_0x1efb34(0x2bd)]();try{const {Id_Agendamientos:_0xeec1ee,Id_Cliente:_0x5ddef0,Id_Empleados:_0x4da47a,Fecha:_0x5a0026,M_Pago:_0x2ff86b,Referencia:_0x57ad53,Estado:Estado=0x3,Detalle_Venta:_0x1cfd2f=[]}=_0x5544c3[_0x1efb34(0x2a5)];if(_0x39bde1[_0x1efb34(0x337)](!_0x5ddef0,!_0x4da47a)||!_0x5a0026||!_0x2ff86b||_0x39bde1[_0x1efb34(0x1ff)](_0x1cfd2f[_0x1efb34(0x2b1)],0x0))return await _0x325daa[_0x1efb34(0x231)](),_0x5075d2[_0x1efb34(0x1e0)](0x190)[_0x1efb34(0x1ac)]({'status':'error','message':_0x39bde1[_0x1efb34(0x2d5)],'required':{'Id_Cliente':_0x5ddef0,'Id_Empleados':_0x4da47a,'Fecha':_0x5a0026,'M_Pago':_0x2ff86b,'Detalles':_0x1cfd2f[_0x1efb34(0x2b1)]}});await _0x39bde1[_0x1efb34(0x2ff)](validarCliente,_0x5ddef0,_0x325daa),await validarEmpleado(_0x4da47a,_0x325daa),_0x39bde1[_0x1efb34(0x1eb)](validarMetodoPago,_0x2ff86b,_0x57ad53);let _0x129090=0x0;if(_0xeec1ee){const _0x21d740=await Agendamientos[_0x1efb34(0x24b)](_0xeec1ee,{'transaction':_0x325daa});if(!_0x21d740)return await _0x325daa[_0x1efb34(0x231)](),_0x5075d2[_0x1efb34(0x1e0)](0x190)['json']({'status':_0x39bde1[_0x1efb34(0x248)],'message':_0x39bde1[_0x1efb34(0x2f3)]});_0x129090=_0x39bde1[_0x1efb34(0x1c3)](Number,_0x21d740['Subtotal']||0x0);}let _0x255ce6=0x0;const _0x3b5cd4=[];for(const _0xfb11bf of _0x1cfd2f){const _0x13485b=await Productos[_0x1efb34(0x24b)](_0xfb11bf['Id_Productos'],{'transaction':_0x325daa,'attributes':[_0x39bde1[_0x1efb34(0x2b5)],_0x39bde1[_0x1efb34(0x277)],_0x39bde1['gILrt']]});if(!_0x13485b)return await _0x325daa[_0x1efb34(0x231)](),_0x5075d2[_0x1efb34(0x1e0)](0x190)[_0x1efb34(0x1ac)]({'status':_0x39bde1[_0x1efb34(0x248)],'message':'Producto\x20con\x20ID\x20'+_0xfb11bf['Id_Productos']+_0x1efb34(0x310)});let _0xa29fc7=_0xfb11bf[_0x1efb34(0x243)]||[],_0x4d7c6b=_0xfb11bf['Tamanos']||[];if(_0xfb11bf['Tamanos_Data']&&typeof _0xfb11bf[_0x1efb34(0x1d0)]===_0x39bde1[_0x1efb34(0x335)])try{_0x4d7c6b=JSON[_0x1efb34(0x304)](_0xfb11bf[_0x1efb34(0x1d0)]);}catch(_0x102cf6){_0x4d7c6b=[];}else _0xfb11bf[_0x1efb34(0x1d0)]&&Array[_0x1efb34(0x237)](_0xfb11bf[_0x1efb34(0x1d0)])&&(_0x4d7c6b=_0xfb11bf[_0x1efb34(0x1d0)]);if(_0xfb11bf[_0x1efb34(0x328)]&&_0x39bde1[_0x1efb34(0x329)](typeof _0xfb11bf[_0x1efb34(0x328)],_0x1efb34(0x356)))try{_0xa29fc7=JSON[_0x1efb34(0x304)](_0xfb11bf['Tallas_Data']);}catch(_0x2a9994){_0xa29fc7=[];}else _0xfb11bf[_0x1efb34(0x328)]&&Array[_0x1efb34(0x237)](_0xfb11bf[_0x1efb34(0x328)])&&(_0xa29fc7=_0xfb11bf['Tallas_Data']);try{if(_0x4d7c6b&&_0x4d7c6b['length']>0x0)for(const _0x4aff57 of _0x4d7c6b){const _0x572743=_0x4aff57['nombre']||_0x4aff57['Nombre']||'';if(!_0x572743)return await _0x325daa[_0x1efb34(0x231)](),_0x5075d2[_0x1efb34(0x1e0)](0x190)[_0x1efb34(0x1ac)]({'status':_0x39bde1[_0x1efb34(0x248)],'message':_0x1efb34(0x29c)+_0x13485b[_0x1efb34(0x2ae)]});const _0x35b4a8=await Tamano[_0x1efb34(0x357)]({'where':{'Nombre':_0x572743},'transaction':_0x325daa});if(!_0x35b4a8)return await _0x325daa['rollback'](),_0x5075d2[_0x1efb34(0x1e0)](0x190)[_0x1efb34(0x1ac)]({'status':_0x39bde1['EwQJa'],'message':_0x1efb34(0x218)+_0x572743+_0x1efb34(0x310)});const _0xf00dbb=await Producto_Tamano[_0x1efb34(0x357)]({'where':{'Id_Productos':_0xfb11bf[_0x1efb34(0x293)],'Id_Tamano':_0x35b4a8[_0x1efb34(0x22f)]},'transaction':_0x325daa});if(!_0xf00dbb)return await _0x325daa['rollback'](),_0x5075d2[_0x1efb34(0x1e0)](0x190)[_0x1efb34(0x1ac)]({'status':_0x1efb34(0x2f8),'message':'El\x20producto\x20'+_0x13485b[_0x1efb34(0x2ae)]+'\x20no\x20tiene\x20el\x20tamaño\x20'+_0x572743+_0x1efb34(0x2f7)});const _0x48adc3=await Producto_Tamano_Insumos[_0x1efb34(0x355)]({'where':{'Id_Producto_Tamano':_0xf00dbb[_0x1efb34(0x33c)]},'include':[{'model':Insumos,'as':_0x39bde1[_0x1efb34(0x2d4)]}],'transaction':_0x325daa}),_0x58ebb4=_0x39bde1[_0x1efb34(0x1c3)](Number,_0x4aff57[_0x1efb34(0x257)]||_0x4aff57[_0x1efb34(0x2cb)]||0x0);for(const _0x31785a of _0x48adc3){const _0x312671=_0x31785a[_0x1efb34(0x256)],_0x38148b=Number(_0x31785a[_0x1efb34(0x336)]||0x0),_0x2a5b32=_0x39bde1[_0x1efb34(0x1b1)](_0x38148b,_0x58ebb4),_0x22a0c6=_0x39bde1[_0x1efb34(0x31b)](Number,_0x312671[_0x1efb34(0x2c3)]||0x0);if(_0x39bde1[_0x1efb34(0x297)](_0x22a0c6,_0x2a5b32))return await _0x325daa[_0x1efb34(0x231)](),_0x5075d2[_0x1efb34(0x1e0)](0x190)[_0x1efb34(0x1ac)]({'status':_0x39bde1['EwQJa'],'message':_0x1efb34(0x1c4)+_0x312671[_0x1efb34(0x2ae)]+_0x1efb34(0x271)+_0x22a0c6+',\x20Necesario:\x20'+_0x2a5b32});}}else{if(_0xa29fc7&&_0xa29fc7['length']>0x0)for(const _0x25fd4b of _0xa29fc7){const _0x543acb=_0x25fd4b[_0x1efb34(0x23b)]||_0x25fd4b[_0x1efb34(0x2cf)]||_0x25fd4b[_0x1efb34(0x2ad)]||'',_0x213910=_0x39bde1[_0x1efb34(0x31b)](Number,_0x25fd4b[_0x1efb34(0x2cb)]||_0x25fd4b[_0x1efb34(0x257)]||0x0);if(!_0x543acb)return await _0x325daa[_0x1efb34(0x231)](),_0x5075d2[_0x1efb34(0x1e0)](0x190)[_0x1efb34(0x1ac)]({'status':_0x1efb34(0x2f8),'message':_0x1efb34(0x275)+_0x13485b['Nombre']});const _0x368fd8=await Tallas['findOne']({'where':{'Nombre':_0x543acb},'transaction':_0x325daa});if(!_0x368fd8)return await _0x325daa[_0x1efb34(0x231)](),_0x5075d2[_0x1efb34(0x1e0)](0x190)[_0x1efb34(0x1ac)]({'status':_0x1efb34(0x2f8),'message':_0x1efb34(0x20a)+_0x543acb+_0x1efb34(0x1f4)});const _0x3268ba=await Producto_Tallas[_0x1efb34(0x357)]({'where':{'Id_Productos':_0xfb11bf[_0x1efb34(0x293)],'Id_Tallas':_0x368fd8[_0x1efb34(0x2eb)]},'transaction':_0x325daa});if(!_0x3268ba)return await _0x325daa[_0x1efb34(0x231)](),_0x5075d2[_0x1efb34(0x1e0)](0x190)[_0x1efb34(0x1ac)]({'status':_0x39bde1[_0x1efb34(0x248)],'message':_0x1efb34(0x20a)+_0x543acb+_0x1efb34(0x268)+_0x13485b[_0x1efb34(0x2ae)]});const _0x26859e=_0x39bde1[_0x1efb34(0x31b)](Number,_0x3268ba[_0x1efb34(0x2c3)]||0x0);if(_0x39bde1[_0x1efb34(0x284)](_0x26859e,_0x213910))return await _0x325daa['rollback'](),_0x5075d2['status'](0x190)[_0x1efb34(0x1ac)]({'status':_0x1efb34(0x2f8),'message':_0x1efb34(0x1d9)+_0x543acb+_0x1efb34(0x353)+_0x13485b['Nombre']+_0x1efb34(0x271)+_0x26859e+_0x1efb34(0x240)+_0x213910});}else{const _0xa98d7f=await Producto_Tallas[_0x1efb34(0x355)]({'where':{'Id_Productos':_0xfb11bf[_0x1efb34(0x293)]},'include':[{'model':Tallas,'as':_0x1efb34(0x302),'attributes':[_0x39bde1[_0x1efb34(0x347)],_0x39bde1[_0x1efb34(0x277)]]}],'transaction':_0x325daa});if(_0xa98d7f&&_0x39bde1[_0x1efb34(0x253)](_0xa98d7f[_0x1efb34(0x2b1)],0x0))return await _0x325daa['rollback'](),_0x5075d2[_0x1efb34(0x1e0)](0x190)[_0x1efb34(0x1ac)]({'status':_0x39bde1[_0x1efb34(0x248)],'message':_0x1efb34(0x1ea)+_0x13485b[_0x1efb34(0x2ae)]+'\x20requiere\x20especificar\x20tallas.\x20Tallas\x20disponibles:\x20'+_0xa98d7f['map'](_0x42e79d=>_0x42e79d[_0x1efb34(0x302)]?.['Nombre']||_0x1efb34(0x30c))['join'](',\x20')});const _0x29ff97=Number(_0x13485b['Stock']||0x0),_0xdb9e8a=_0x39bde1['qOiSB'](Number,_0xfb11bf['Cantidad']||0x0);if(_0x39bde1[_0x1efb34(0x284)](_0x29ff97,_0xdb9e8a))return await _0x325daa[_0x1efb34(0x231)](),_0x5075d2[_0x1efb34(0x1e0)](0x190)['json']({'status':_0x39bde1[_0x1efb34(0x248)],'message':_0x1efb34(0x31a)+_0x13485b[_0x1efb34(0x2ae)]+_0x1efb34(0x271)+_0x29ff97+_0x1efb34(0x240)+_0xdb9e8a});}}}catch(_0x1b5a4d){return await _0x325daa[_0x1efb34(0x231)](),_0x5075d2[_0x1efb34(0x1e0)](0x190)[_0x1efb34(0x1ac)]({'status':_0x39bde1['EwQJa'],'message':'Error\x20al\x20validar\x20stock:\x20'+_0x1b5a4d[_0x1efb34(0x2a0)]});}if(_0xfb11bf['Tamanos_Data']&&_0x39bde1[_0x1efb34(0x1c6)](typeof _0xfb11bf[_0x1efb34(0x1d0)],_0x39bde1[_0x1efb34(0x335)]))try{_0x4d7c6b=JSON[_0x1efb34(0x304)](_0xfb11bf[_0x1efb34(0x1d0)]);}catch(_0x74164b){_0x4d7c6b=[];}else _0xfb11bf[_0x1efb34(0x1d0)]&&Array[_0x1efb34(0x237)](_0xfb11bf[_0x1efb34(0x1d0)])&&(_0x4d7c6b=_0xfb11bf['Tamanos_Data']);if(_0xfb11bf[_0x1efb34(0x328)]&&_0x39bde1[_0x1efb34(0x1c6)](typeof _0xfb11bf['Tallas_Data'],_0x39bde1[_0x1efb34(0x335)]))try{_0xa29fc7=JSON[_0x1efb34(0x304)](_0xfb11bf[_0x1efb34(0x328)]);}catch(_0x56c633){_0xa29fc7=[];}else _0xfb11bf[_0x1efb34(0x328)]&&Array[_0x1efb34(0x237)](_0xfb11bf[_0x1efb34(0x328)])&&(_0xa29fc7=_0xfb11bf['Tallas_Data']);_0xa29fc7&&_0x39bde1[_0x1efb34(0x223)](_0xa29fc7['length'],0x0)&&(_0xa29fc7=_0xa29fc7['map'](_0x1a0912=>{const _0x479e57=_0x1efb34;if(_0x39bde1[_0x479e57(0x1ff)](typeof _0x1a0912,_0x39bde1[_0x479e57(0x335)]))return{'talla':_0x1a0912,'cantidad':0x1,'precio':0x0};return{'talla':_0x1a0912[_0x479e57(0x23b)]||_0x1a0912[_0x479e57(0x2cf)]||_0x1a0912[_0x479e57(0x2ad)]||'','cantidad':_0x1a0912[_0x479e57(0x2cb)]||_0x1a0912['Cantidad']||0x1,'precio':_0x1a0912[_0x479e57(0x2a6)]||_0x1a0912['Precio']||0x0,'Id_Producto_Tallas':_0x1a0912[_0x479e57(0x350)]||null};})['filter'](_0x4b6de2=>_0x4b6de2['talla']&&_0x4b6de2[_0x1efb34(0x23b)][_0x1efb34(0x288)]()!==''));const _0x17bffa=await _0x39bde1['Uxafh'](calcularPrecio,_0x13485b,_0xa29fc7,_0x4d7c6b,_0xfb11bf[_0x1efb34(0x257)],_0x325daa),_0x3ead4b=_0x17bffa;_0x3b5cd4['push']({..._0xfb11bf,'Precio':_0x17bffa,'Subtotal':_0x3ead4b,'Tallas':_0xa29fc7,'Tamanos':_0x4d7c6b,'Tallas_Original':_0xfb11bf['Tallas']||[],'Tamanos_Original':_0xfb11bf['Tamanos']||[],'Tallas_Data_Original':_0xfb11bf[_0x1efb34(0x328)],'Tamanos_Data_Original':_0xfb11bf[_0x1efb34(0x1d0)]}),_0x255ce6+=_0x3ead4b;}const _0x3de55a=_0x39bde1[_0x1efb34(0x2c1)](_0x255ce6,_0x129090),_0x445eb2=await Ventas['create']({'Id_Agendamientos':_0x39bde1[_0x1efb34(0x1c9)](_0xeec1ee,null),'Id_Cliente':_0x5ddef0,'Id_Empleados':_0x4da47a,'Fecha':_0x5a0026,'Total':_0x3de55a,'Estado':Estado,'M_Pago':_0x2ff86b,'Referencia':_0x39bde1['gqrUf'](_0x57ad53,null)},{'transaction':_0x325daa});for(const _0x1c22a5 of _0x3b5cd4){let _0x2a16fb=[],_0x36983d=[];if(_0x1c22a5['Tallas_Data_Original']&&_0x39bde1[_0x1efb34(0x34f)](typeof _0x1c22a5[_0x1efb34(0x1fe)],_0x1efb34(0x356)))try{_0x2a16fb=JSON[_0x1efb34(0x304)](_0x1c22a5[_0x1efb34(0x1fe)]);}catch(_0x4635b2){_0x2a16fb=_0x1c22a5[_0x1efb34(0x229)]||[];}else _0x1c22a5[_0x1efb34(0x229)]&&_0x39bde1[_0x1efb34(0x223)](_0x1c22a5[_0x1efb34(0x229)][_0x1efb34(0x2b1)],0x0)?_0x2a16fb=_0x1c22a5[_0x1efb34(0x229)]:_0x2a16fb=_0x1c22a5['Tallas']||[];if(_0x1c22a5[_0x1efb34(0x20f)]&&_0x39bde1[_0x1efb34(0x329)](typeof _0x1c22a5['Tamanos_Data_Original'],_0x39bde1['RKbqj']))try{_0x36983d=JSON[_0x1efb34(0x304)](_0x1c22a5[_0x1efb34(0x20f)]);}catch(_0x16d530){_0x36983d=_0x1c22a5['Tamanos_Original']||[];}else _0x1c22a5[_0x1efb34(0x2ce)]&&_0x1c22a5['Tamanos_Original']['length']>0x0?_0x36983d=_0x1c22a5['Tamanos_Original']:_0x36983d=_0x1c22a5[_0x1efb34(0x204)]||[];_0x36983d&&_0x39bde1['nhEqA'](_0x36983d[_0x1efb34(0x2b1)],0x0)&&(_0x36983d=_0x36983d[_0x1efb34(0x2ed)](_0x97e5e9=>({..._0x97e5e9,'PrecioTotal':Number(_0x97e5e9[_0x1efb34(0x344)]||0x0)})));_0x2a16fb&&_0x2a16fb[_0x1efb34(0x2b1)]>0x0&&(_0x2a16fb=_0x2a16fb[_0x1efb34(0x2ed)](_0x1f324b=>{const _0x19f575=_0x1efb34,_0x5900c8={..._0x1f324b,'talla':_0x1f324b[_0x19f575(0x23b)]||_0x1f324b[_0x19f575(0x2cf)]||_0x1f324b[_0x19f575(0x2ad)]||'','cantidad':_0x1f324b[_0x19f575(0x2cb)]||_0x1f324b[_0x19f575(0x257)]||0x0,'precio':_0x1f324b['precio']||_0x1f324b[_0x19f575(0x2d9)]||0x0,'descripcion':_0x1f324b['descripcion']||(_0x1f324b[_0x19f575(0x2cb)]||_0x1f324b[_0x19f575(0x257)]||0x0)+_0x19f575(0x26e)+(_0x1f324b[_0x19f575(0x23b)]||_0x1f324b['Talla']||_0x1f324b[_0x19f575(0x2ad)]||''),'detalleTalla':_0x1f324b[_0x19f575(0x245)]||_0x19f575(0x20a)+(_0x1f324b[_0x19f575(0x23b)]||_0x1f324b[_0x19f575(0x2cf)]||_0x1f324b[_0x19f575(0x2ad)]||'')+':\x20'+(_0x1f324b[_0x19f575(0x2cb)]||_0x1f324b[_0x19f575(0x257)]||0x0)+_0x19f575(0x2a8)};return delete _0x5900c8['Cantidad'],delete _0x5900c8[_0x19f575(0x2cf)],delete _0x5900c8[_0x19f575(0x2d9)],_0x5900c8;})[_0x1efb34(0x242)](_0x28180a=>_0x28180a[_0x1efb34(0x23b)]&&_0x28180a[_0x1efb34(0x23b)]['trim']()!==''));const _0x317e10=_0x2a16fb&&_0x39bde1[_0x1efb34(0x223)](_0x2a16fb['length'],0x0)?JSON[_0x1efb34(0x224)](_0x2a16fb):null,_0x419872=_0x36983d&&_0x36983d['length']>0x0?JSON[_0x1efb34(0x224)](_0x36983d):null,_0x4b98a6={'Id_Ventas':_0x445eb2['Id_Ventas'],'Id_Productos':_0x1c22a5[_0x1efb34(0x293)]||null,'Id_Servicios':_0x1c22a5[_0x1efb34(0x1cc)]||null,'Id_Producto_Tallas':_0x2a16fb[_0x1efb34(0x2b1)]>0x0?_0x2a16fb[0x0][_0x1efb34(0x350)]:null,'Id_Producto_Tamano_Insumos':_0x39bde1['nhEqA'](_0x36983d['length'],0x0)?_0x36983d[0x0][_0x1efb34(0x2fa)]:null,'Cantidad':_0x1c22a5[_0x1efb34(0x257)],'Precio':_0x1c22a5[_0x1efb34(0x2d9)],'Subtotal':_0x1c22a5[_0x1efb34(0x1f6)]};if(_0x317e10)_0x4b98a6[_0x1efb34(0x328)]=_0x317e10;if(_0x419872)_0x4b98a6[_0x1efb34(0x1d0)]=_0x419872;const _0x397567=await Detalle_Venta[_0x1efb34(0x26f)](_0x4b98a6,{'transaction':_0x325daa});}for(const _0x3fcaf6 of _0x3b5cd4){const _0x2eedb1=_0x3fcaf6[_0x1efb34(0x243)]||[],_0x2f4c30=_0x3fcaf6[_0x1efb34(0x204)]||[];try{if(_0x2f4c30&&_0x39bde1[_0x1efb34(0x2f6)](_0x2f4c30[_0x1efb34(0x2b1)],0x0))await _0x39bde1[_0x1efb34(0x330)](actualizarStockInsumos,_0x3fcaf6[_0x1efb34(0x293)],_0x2f4c30,_0x325daa);else _0x2eedb1&&_0x39bde1[_0x1efb34(0x253)](_0x2eedb1['length'],0x0)?await _0x39bde1[_0x1efb34(0x326)](actualizarStockTallas,_0x3fcaf6[_0x1efb34(0x293)],_0x2eedb1,_0x325daa):await actualizarStockProducto(_0x3fcaf6['Id_Productos'],_0x3fcaf6[_0x1efb34(0x257)],_0x325daa);}catch(_0x5c1259){return await _0x325daa[_0x1efb34(0x231)](),_0x5075d2[_0x1efb34(0x1e0)](0x190)[_0x1efb34(0x1ac)]({'status':_0x1efb34(0x2f8),'message':_0x1efb34(0x279)+_0x5c1259[_0x1efb34(0x2a0)]});}}await _0x325daa[_0x1efb34(0x23c)](),_0x5075d2[_0x1efb34(0x1e0)](0xc9)[_0x1efb34(0x1ac)]({'status':_0x39bde1['dXnZx'],'message':_0x39bde1['PCMla'],'data':{'Id_Ventas':_0x445eb2['Id_Ventas'],'Total':_0x3de55a,'totalValidado':!![],'Detalle_Venta':_0x3b5cd4}});}catch(_0x2d68b9){const _0x55fc6b=_0x39bde1['tpkBc'][_0x1efb34(0x354)]('|');let _0x4599d3=0x0;while(!![]){switch(_0x55fc6b[_0x4599d3++]){case'0':if(_0x39bde1[_0x1efb34(0x1d7)](_0x2d68b9,ValidationError))return _0x5075d2['status'](0x190)[_0x1efb34(0x1ac)]({'status':_0x39bde1[_0x1efb34(0x248)],'message':_0x39bde1[_0x1efb34(0x29a)],'detail':_0x2d68b9['errors']['map'](_0x169f08=>_0x169f08[_0x1efb34(0x2a0)])});continue;case'1':await _0x325daa[_0x1efb34(0x231)]();continue;case'2':if(_0x2d68b9 instanceof UniqueConstraintError)return _0x5075d2['status'](0x199)[_0x1efb34(0x1ac)]({'status':_0x39bde1[_0x1efb34(0x248)],'message':_0x39bde1['aIqdI'],'detail':_0x39bde1[_0x1efb34(0x2c2)]});continue;case'3':if(_0x39bde1[_0x1efb34(0x1d7)](_0x2d68b9,DatabaseError))return _0x5075d2['status'](0x1f4)[_0x1efb34(0x1ac)]({'status':_0x39bde1['EwQJa'],'message':_0x39bde1[_0x1efb34(0x2c8)],'detail':_0x2d68b9[_0x1efb34(0x2a0)]});continue;case'4':console[_0x1efb34(0x2f8)](_0x39bde1[_0x1efb34(0x30e)],_0x2d68b9);continue;case'5':if(_0x2d68b9[_0x1efb34(0x2a0)]['includes'](_0x39bde1[_0x1efb34(0x215)])||_0x2d68b9[_0x1efb34(0x2a0)]['includes'](_0x1efb34(0x1dc))||_0x2d68b9[_0x1efb34(0x2a0)][_0x1efb34(0x286)](_0x39bde1[_0x1efb34(0x34d)])||_0x2d68b9[_0x1efb34(0x2a0)][_0x1efb34(0x286)](_0x39bde1[_0x1efb34(0x2ec)]))return _0x5075d2[_0x1efb34(0x1e0)](0x190)[_0x1efb34(0x1ac)]({'status':_0x1efb34(0x2f8),'message':_0x2d68b9[_0x1efb34(0x2a0)]});continue;case'6':return _0x5075d2[_0x1efb34(0x1e0)](0x1f4)[_0x1efb34(0x1ac)]({'status':'error','message':_0x1efb34(0x25c),'detail':_0x2d68b9[_0x1efb34(0x2a0)]});}break;}}},exports[a0_0x1f2711(0x1bb)]=async(_0x17f2ee,_0xc9a0f5)=>{const _0x2ad9e7=a0_0x1f2711,_0x5a15ed={'hTVOU':_0x2ad9e7(0x359),'iAHfw':_0x2ad9e7(0x2f8),'kMQRn':_0x2ad9e7(0x31f),'hvNhL':function(_0x1c3751,_0x3780d8){return _0x1c3751!==_0x3780d8;},'dZpNi':_0x2ad9e7(0x221),'pHZaZ':_0x2ad9e7(0x232),'AsEiD':function(_0x16c6a0,_0x2c8556){return _0x16c6a0===_0x2c8556;},'KEwbm':_0x2ad9e7(0x2e4),'ZJPDv':_0x2ad9e7(0x305)},_0x32bfb6=await sequelize[_0x2ad9e7(0x2bd)]();try{const {id:_0x14fbfb}=_0x17f2ee[_0x2ad9e7(0x28a)],_0x517210=await Ventas['findByPk'](_0x14fbfb,{'include':[{'model':Detalle_Venta,'as':_0x5a15ed[_0x2ad9e7(0x301)]}],'transaction':_0x32bfb6});if(!_0x517210)return await _0x32bfb6[_0x2ad9e7(0x231)](),_0xc9a0f5[_0x2ad9e7(0x1e0)](0x194)[_0x2ad9e7(0x1ac)]({'status':_0x5a15ed[_0x2ad9e7(0x230)],'message':_0x5a15ed[_0x2ad9e7(0x320)]});if(_0x5a15ed[_0x2ad9e7(0x252)](_0x517210[_0x2ad9e7(0x27e)],0x3))return await _0x32bfb6[_0x2ad9e7(0x231)](),_0xc9a0f5['status'](0x190)[_0x2ad9e7(0x1ac)]({'status':_0x5a15ed[_0x2ad9e7(0x230)],'message':'La\x20venta\x20debe\x20tener\x20estado\x203\x20(pendiente)\x20para\x20poder\x20marcarla\x20como\x20completada'});await _0x517210[_0x2ad9e7(0x1fd)]({'Estado':0x1,'Fecha_Completado':new Date()},{'transaction':_0x32bfb6}),await _0x32bfb6[_0x2ad9e7(0x23c)](),_0xc9a0f5[_0x2ad9e7(0x1ac)]({'status':_0x5a15ed[_0x2ad9e7(0x35e)],'message':_0x5a15ed[_0x2ad9e7(0x254)],'data':{'Id_Ventas':_0x517210['Id_Ventas'],'Estado':_0x517210[_0x2ad9e7(0x27e)],'EstadoDescripcion':_0x2ad9e7(0x265),'Fecha_Completado':_0x517210[_0x2ad9e7(0x24c)]}});}catch(_0x530185){await _0x32bfb6['rollback'](),console[_0x2ad9e7(0x2f8)](_0x2ad9e7(0x239),_0x530185),_0xc9a0f5[_0x2ad9e7(0x1e0)](0x1f4)[_0x2ad9e7(0x1ac)]({'status':_0x5a15ed[_0x2ad9e7(0x230)],'message':_0x5a15ed[_0x2ad9e7(0x30f)](process[_0x2ad9e7(0x261)][_0x2ad9e7(0x334)],_0x5a15ed['KEwbm'])?_0x2ad9e7(0x2ac)+_0x530185[_0x2ad9e7(0x2a0)]:_0x5a15ed[_0x2ad9e7(0x20e)]});}},exports[a0_0x1f2711(0x1f0)]=async(_0x1c3c53,_0xd0ca0c)=>{const _0x385d0f=a0_0x1f2711,_0x3dae23={'vzEvd':_0x385d0f(0x2f8),'prChW':function(_0x2e998b,_0x42ee44){return _0x2e998b!==_0x42ee44;},'fLndF':_0x385d0f(0x2d3),'TZWKU':_0x385d0f(0x2a9),'pciaU':_0x385d0f(0x289),'LHYsB':function(_0x2e5f0b,_0x33c32b){return _0x2e5f0b===_0x33c32b;},'OgVIK':_0x385d0f(0x2e4)},_0x33ce08=await sequelize[_0x385d0f(0x2bd)]();try{const {id:_0x33342f}=_0x1c3c53['params'],_0x560b9e=await Ventas['findByPk'](_0x33342f,{'include':[{'model':Detalle_Venta,'as':_0x385d0f(0x359)}],'transaction':_0x33ce08});if(!_0x560b9e)return await _0x33ce08[_0x385d0f(0x231)](),_0xd0ca0c[_0x385d0f(0x1e0)](0x194)[_0x385d0f(0x1ac)]({'status':_0x3dae23['vzEvd'],'message':'Venta\x20no\x20encontrada'});if(_0x3dae23[_0x385d0f(0x313)](_0x560b9e[_0x385d0f(0x27e)],0x3))return await _0x33ce08[_0x385d0f(0x231)](),_0xd0ca0c[_0x385d0f(0x1e0)](0x190)['json']({'status':_0x3dae23[_0x385d0f(0x2ab)],'message':'La\x20venta\x20debe\x20tener\x20estado\x203\x20(pendiente)\x20para\x20poder\x20anularla'});await _0x560b9e[_0x385d0f(0x1fd)]({'Estado':0x2,'Fecha_Anulacion':new Date()},{'transaction':_0x33ce08}),await _0x33ce08[_0x385d0f(0x23c)](),_0xd0ca0c[_0x385d0f(0x1ac)]({'status':_0x385d0f(0x221),'message':_0x3dae23[_0x385d0f(0x2cd)],'data':{'Id_Ventas':_0x560b9e[_0x385d0f(0x2c5)],'Estado':_0x560b9e[_0x385d0f(0x27e)],'EstadoDescripcion':_0x3dae23['TZWKU'],'Fecha_Anulacion':_0x560b9e[_0x385d0f(0x1f2)]}});}catch(_0x3396c1){await _0x33ce08[_0x385d0f(0x231)](),console['error'](_0x3dae23['pciaU'],_0x3396c1),_0xd0ca0c[_0x385d0f(0x1e0)](0x1f4)[_0x385d0f(0x1ac)]({'status':_0x3dae23[_0x385d0f(0x2ab)],'message':_0x3dae23[_0x385d0f(0x1e8)](process[_0x385d0f(0x261)][_0x385d0f(0x334)],_0x3dae23[_0x385d0f(0x315)])?_0x385d0f(0x1b7)+_0x3396c1['message']:_0x385d0f(0x2cc)});}},exports[a0_0x1f2711(0x2bc)]=async(_0x3e371f,_0x57fb2d)=>{const _0x5ba93f=a0_0x1f2711,_0x5d2d06={'rtvzT':'error','gEGla':_0x5ba93f(0x1f8),'WzvCr':function(_0x3aa94,_0x46879a){return _0x3aa94>_0x46879a;},'PaXGu':function(_0x23c580,_0x7a9065){return _0x23c580(_0x7a9065);},'xowgX':'success','PrUgg':_0x5ba93f(0x295),'wzpLl':_0x5ba93f(0x27f)};try{const {Id_Productos:_0x1f08c3,Cantidad:_0x488279,Tallas:_0x57668f,Tamanos:_0x193ae6}=_0x3e371f['body'];if(!_0x1f08c3)return _0x57fb2d['status'](0x190)[_0x5ba93f(0x1ac)]({'status':_0x5d2d06[_0x5ba93f(0x233)],'message':_0x5ba93f(0x2af)});const _0x3d3075=await Productos[_0x5ba93f(0x24b)](_0x1f08c3);if(!_0x3d3075)return _0x57fb2d[_0x5ba93f(0x1e0)](0x194)['json']({'status':_0x5d2d06[_0x5ba93f(0x233)],'message':_0x5d2d06[_0x5ba93f(0x29f)]});let _0x16702c=!![],_0x21a2bf=[];if(_0x57668f&&_0x5d2d06[_0x5ba93f(0x236)](_0x57668f['length'],0x0))for(const _0x5aed33 of _0x57668f){const _0x266f39=_0x5aed33[_0x5ba93f(0x23b)]||_0x5aed33[_0x5ba93f(0x2cf)]||_0x5aed33[_0x5ba93f(0x2ad)]||'',_0x29db41=_0x5d2d06[_0x5ba93f(0x26b)](Number,_0x5aed33[_0x5ba93f(0x2cb)]||_0x5aed33[_0x5ba93f(0x257)]||0x0);if(!_0x266f39){_0x16702c=![],_0x21a2bf[_0x5ba93f(0x26d)](_0x5ba93f(0x275)+_0x3d3075[_0x5ba93f(0x2ae)]);continue;}const _0x1c5220=await _0x57668f[_0x5ba93f(0x357)]({'where':{'Nombre':_0x266f39}});if(!_0x1c5220){_0x16702c=![],_0x21a2bf['push']('Talla\x20'+_0x266f39+_0x5ba93f(0x1f4));continue;}const _0x555b7a=await Producto_Tallas[_0x5ba93f(0x357)]({'where':{'Id_Productos':_0x3d3075[_0x5ba93f(0x293)],'Id_Tallas':_0x1c5220[_0x5ba93f(0x2eb)]}});(!_0x555b7a||_0x555b7a[_0x5ba93f(0x2c3)]<_0x29db41)&&(_0x16702c=![],_0x21a2bf[_0x5ba93f(0x26d)]('Stock\x20insuficiente\x20para\x20talla\x20'+_0x266f39+_0x5ba93f(0x351)+(_0x555b7a?.[_0x5ba93f(0x2c3)]||0x0)+_0x5ba93f(0x2d6)+_0x29db41));}if(_0x193ae6&&_0x193ae6[_0x5ba93f(0x2b1)]>0x0)for(const _0x13b8ab of _0x193ae6){const _0x2efac6=_0x13b8ab['nombre']||_0x13b8ab['Nombre']||'';if(!_0x2efac6){_0x16702c=![],_0x21a2bf[_0x5ba93f(0x26d)](_0x5ba93f(0x29c)+_0x3d3075[_0x5ba93f(0x2ae)]);continue;}const _0xb46d19=await Tamano['findOne']({'where':{'Nombre':_0x2efac6}});if(!_0xb46d19){_0x16702c=![],_0x21a2bf['push'](_0x5ba93f(0x218)+_0x2efac6+'\x20no\x20encontrado');continue;}const _0x28ba31=await Producto_Tamano[_0x5ba93f(0x357)]({'where':{'Id_Productos':_0x3d3075[_0x5ba93f(0x293)],'Id_Tamano':_0xb46d19[_0x5ba93f(0x22f)]}});!_0x28ba31&&(_0x16702c=![],_0x21a2bf[_0x5ba93f(0x26d)]('El\x20producto\x20'+_0x3d3075[_0x5ba93f(0x2ae)]+_0x5ba93f(0x1ab)+_0x2efac6+'\x20configurado'));}_0x57fb2d['json']({'status':_0x5d2d06[_0x5ba93f(0x1ef)],'data':{'Id_Productos':_0x3d3075[_0x5ba93f(0x293)],'Nombre':_0x3d3075[_0x5ba93f(0x2ae)],'stockDisponible':_0x16702c,'mensajes':_0x21a2bf}});}catch(_0x4cfe42){console[_0x5ba93f(0x2f8)](_0x5d2d06[_0x5ba93f(0x1c5)],_0x4cfe42),_0x57fb2d[_0x5ba93f(0x1e0)](0x1f4)[_0x5ba93f(0x1ac)]({'status':_0x5d2d06[_0x5ba93f(0x233)],'message':_0x5d2d06['wzpLl']});}},exports['reporteVentasDiarias']=async(_0x4a120c,_0x21a273)=>{const _0xf08cac=a0_0x1f2711,_0xe01b65={'toSFg':_0xf08cac(0x360),'BjgJL':function(_0x28e192,_0x276ace){return _0x28e192(_0x276ace);},'jYAJG':'Detalle_Venta','ONtML':'Id_Productos_Producto','IkhNe':'Nombre','tEVxR':_0xf08cac(0x221),'oFKnY':_0xf08cac(0x24f),'ynVCy':_0xf08cac(0x2f8),'oIJOJ':_0xf08cac(0x26a)};try{const {fecha:_0x548030}=_0x4a120c[_0xf08cac(0x29b)],_0xe69950=_0x548030?new Date(_0x548030):new Date(),_0xa7cce8=await Ventas[_0xf08cac(0x355)]({'where':{'Fecha':{[sequelize['Op']['between']]:[new Date(_0xe69950[_0xf08cac(0x2b7)](0x0,0x0,0x0,0x0)),new Date(_0xe69950[_0xf08cac(0x2b7)](0x17,0x3b,0x3b,0x3e7))]},'Estado':0x1},'include':[{'model':Detalle_Venta,'as':_0xe01b65['jYAJG'],'include':[{'model':Productos,'as':_0xe01b65[_0xf08cac(0x1f9)]}]},{'model':Empleados,'as':_0xf08cac(0x31e),'attributes':[_0xe01b65['IkhNe']]}]}),_0x1b60f2=_0xa7cce8[_0xf08cac(0x2fe)]((_0x27e9cd,_0x3b524a)=>_0x27e9cd+Number(_0x3b524a[_0xf08cac(0x1dd)]),0x0),_0x474ab9=_0xa7cce8[_0xf08cac(0x2b1)],_0x50b5ae={};_0xa7cce8[_0xf08cac(0x21e)](_0xfde9d6=>{const _0x3e5c39=_0xf08cac,_0x532725={'VMZxr':_0xe01b65[_0x3e5c39(0x1c8)],'NyZvg':function(_0x295469,_0x8c05c8){const _0x436b97=_0x3e5c39;return _0xe01b65[_0x436b97(0x314)](_0x295469,_0x8c05c8);}};_0xfde9d6[_0x3e5c39(0x359)][_0x3e5c39(0x21e)](_0x215938=>{const _0x185e9c=_0x3e5c39,_0x546d6f=_0x215938[_0x185e9c(0x293)],_0x552688=_0x215938[_0x185e9c(0x2e1)]?.[_0x185e9c(0x2ae)]||_0x532725[_0x185e9c(0x28f)];!_0x50b5ae[_0x546d6f]&&(_0x50b5ae[_0x546d6f]={'Id_Productos':_0x546d6f,'Nombre':_0x552688,'Cantidad':0x0,'Total':0x0}),_0x50b5ae[_0x546d6f]['Cantidad']+=_0x215938[_0x185e9c(0x257)],_0x50b5ae[_0x546d6f][_0x185e9c(0x1dd)]+=_0x532725[_0x185e9c(0x2d8)](Number,_0x215938['Subtotal']);});});const _0x426526=Object[_0xf08cac(0x35b)](_0x50b5ae)[_0xf08cac(0x25e)]((_0x2435f7,_0x5375a2)=>_0x5375a2[_0xf08cac(0x1dd)]-_0x2435f7[_0xf08cac(0x1dd)])[_0xf08cac(0x20d)](0x0,0x5);_0x21a273[_0xf08cac(0x1ac)]({'status':_0xe01b65[_0xf08cac(0x2d2)],'data':{'fecha':_0xe69950[_0xf08cac(0x260)]()[_0xf08cac(0x354)]('T')[0x0],'totalVentas':_0x1b60f2,'cantidadVentas':_0x474ab9,'productosTop':_0x426526,'ventas':_0xa7cce8[_0xf08cac(0x2ed)](_0x2b9c86=>({'Id_Ventas':_0x2b9c86['Id_Ventas'],'Total':_0x2b9c86[_0xf08cac(0x1dd)],'Empleado':_0x2b9c86[_0xf08cac(0x31e)]?.[_0xf08cac(0x2ae)],'Fecha':_0x2b9c86['Fecha']}))}});}catch(_0xd3b795){console[_0xf08cac(0x2f8)](_0xe01b65[_0xf08cac(0x217)],_0xd3b795),_0x21a273[_0xf08cac(0x1e0)](0x1f4)[_0xf08cac(0x1ac)]({'status':_0xe01b65[_0xf08cac(0x1f1)],'message':_0xe01b65['oIJOJ']});}},exports[a0_0x1f2711(0x2b8)]=async(_0x2b3dd1,_0x16c22b)=>{const _0x4f0825=a0_0x1f2711,_0x3328a0={'yfzoa':function(_0x21ba39,_0x229639){return _0x21ba39(_0x229639);},'FkUeT':function(_0x2b12b1,_0x51ccae){return _0x2b12b1-_0x51ccae;},'jEFSX':function(_0x2248de,_0x25fa53){return _0x2248de(_0x25fa53);},'QymZl':function(_0x26bee4,_0x1b5eb2){return _0x26bee4+_0x1b5eb2;},'JeYsb':_0x4f0825(0x359),'aMRBD':_0x4f0825(0x2e1),'IBVvO':'Id_Empleados_Empleado','ewvHl':'Nombre','sXPLv':'success','Qmmsb':function(_0x457028,_0x3526eb){return _0x457028/_0x3526eb;},'uuzgo':_0x4f0825(0x205),'QCPtA':_0x4f0825(0x2f8),'errGo':_0x4f0825(0x1cf)};try{const {mes:_0x47c65e,año:_0x1bab2a}=_0x2b3dd1['query'],_0x486b93=new Date(),_0x357ccc=_0x47c65e?_0x3328a0[_0x4f0825(0x1c1)](_0x3328a0[_0x4f0825(0x2e3)](parseInt,_0x47c65e),0x1):_0x486b93[_0x4f0825(0x1e3)](),_0x47b227=_0x1bab2a?_0x3328a0[_0x4f0825(0x2e3)](parseInt,_0x1bab2a):_0x486b93[_0x4f0825(0x1cd)](),_0x116b99=new Date(_0x47b227,_0x357ccc,0x1),_0x2ebb22=new Date(_0x47b227,_0x3328a0[_0x4f0825(0x361)](_0x357ccc,0x1),0x0,0x17,0x3b,0x3b,0x3e7),_0x1c0151=await Ventas['findAll']({'where':{'Fecha':{[sequelize['Op'][_0x4f0825(0x33d)]]:[_0x116b99,_0x2ebb22]},'Estado':0x1},'include':[{'model':Detalle_Venta,'as':_0x3328a0['JeYsb'],'include':[{'model':Productos,'as':_0x3328a0[_0x4f0825(0x1d3)]}]},{'model':Empleados,'as':_0x3328a0[_0x4f0825(0x2dd)],'attributes':[_0x3328a0['ewvHl']]}]}),_0x5b8521=_0x1c0151[_0x4f0825(0x2fe)]((_0x3105d2,_0x4dd0f8)=>_0x3105d2+Number(_0x4dd0f8['Total']),0x0),_0x5d9480=_0x1c0151[_0x4f0825(0x2b1)],_0x21bc97={};_0x1c0151['forEach'](_0x2e38f5=>{const _0x1ea26a=_0x4f0825,_0x5be6d5=_0x2e38f5['Fecha'][_0x1ea26a(0x260)]()[_0x1ea26a(0x354)]('T')[0x0];!_0x21bc97[_0x5be6d5]&&(_0x21bc97[_0x5be6d5]={'total':0x0,'cantidad':0x0}),_0x21bc97[_0x5be6d5]['total']+=_0x3328a0['yfzoa'](Number,_0x2e38f5[_0x1ea26a(0x1dd)]),_0x21bc97[_0x5be6d5][_0x1ea26a(0x2cb)]+=0x1;});const _0x161354={};_0x1c0151[_0x4f0825(0x21e)](_0x460041=>{const _0x5a3351=_0x4f0825,_0x278484=_0x460041[_0x5a3351(0x266)],_0x316978=_0x460041[_0x5a3351(0x31e)]?.[_0x5a3351(0x2ae)]||_0x5a3351(0x281);!_0x161354[_0x278484]&&(_0x161354[_0x278484]={'Id_Empleados':_0x278484,'Nombre':_0x316978,'Total':0x0,'Cantidad':0x0}),_0x161354[_0x278484][_0x5a3351(0x1dd)]+=_0x3328a0[_0x5a3351(0x28e)](Number,_0x460041[_0x5a3351(0x1dd)]),_0x161354[_0x278484][_0x5a3351(0x257)]+=0x1;});const _0x48f737=Object[_0x4f0825(0x35b)](_0x161354)[_0x4f0825(0x25e)]((_0x351a8c,_0x33c0fa)=>_0x33c0fa[_0x4f0825(0x1dd)]-_0x351a8c[_0x4f0825(0x1dd)])[_0x4f0825(0x20d)](0x0,0x5);_0x16c22b[_0x4f0825(0x1ac)]({'status':_0x3328a0[_0x4f0825(0x1b2)],'data':{'mes':_0x357ccc+0x1,'año':_0x47b227,'totalVentas':_0x5b8521,'cantidadVentas':_0x5d9480,'promedioDiario':_0x3328a0[_0x4f0825(0x273)](_0x5d9480,new Date(_0x47b227,_0x3328a0['QymZl'](_0x357ccc,0x1),0x0)[_0x4f0825(0x2c0)]()),'ventasPorDia':_0x21bc97,'empleadosTop':_0x48f737}});}catch(_0x569fa2){console[_0x4f0825(0x2f8)](_0x3328a0[_0x4f0825(0x2c4)],_0x569fa2),_0x16c22b['status'](0x1f4)[_0x4f0825(0x1ac)]({'status':_0x3328a0[_0x4f0825(0x312)],'message':_0x3328a0[_0x4f0825(0x32e)]});}},exports[a0_0x1f2711(0x23a)]=async(_0x26008e,_0x1b34cc)=>{const _0x5558fd=a0_0x1f2711,_0xaf5058={'EWVoL':'error','kGBtH':_0x5558fd(0x1fb),'eBtbG':_0x5558fd(0x2ee),'pOPAt':_0x5558fd(0x1f8),'oWUHi':function(_0x3f91ed,_0x2107d4){return _0x3f91ed>_0x2107d4;},'FEzNV':'talla','krUZj':'N/A','SQWJJ':_0x5558fd(0x238),'QdlYD':function(_0x473810,_0x2eb521){return _0x473810(_0x2eb521);},'vjsKE':function(_0x270716,_0x106a82){return _0x270716>=_0x106a82;},'CqeEQ':'tamaño','UDNRv':_0x5558fd(0x25f),'huXqw':_0x5558fd(0x276),'gohCY':'Tamaño\x20no\x20configurado\x20para\x20este\x20producto','aJtrW':'Id_Insumos_Insumo','TfPWp':function(_0x2928f6,_0x4e6b36){return _0x2928f6*_0x4e6b36;},'eleVr':function(_0x35324f,_0x30ba18){return _0x35324f===_0x30ba18;},'yVLoA':function(_0x7df7e2,_0x506e54){return _0x7df7e2===_0x506e54;},'zKZzX':_0x5558fd(0x2eb),'cRbGk':_0x5558fd(0x2ae),'gKqoa':'Producto\x20requiere\x20tallas','GBvcQ':function(_0x18db5a,_0x1db676){return _0x18db5a>=_0x1db676;},'cmolH':_0x5558fd(0x247),'BYiFQ':_0x5558fd(0x221),'gysYp':_0x5558fd(0x319)};try{const {Detalle_Venta:_0x3fcc02}=_0x26008e[_0x5558fd(0x2a5)];if(!_0x3fcc02||!Array[_0x5558fd(0x237)](_0x3fcc02)||_0x3fcc02[_0x5558fd(0x2b1)]===0x0)return _0x1b34cc['status'](0x190)[_0x5558fd(0x1ac)]({'status':_0xaf5058[_0x5558fd(0x25d)],'message':_0xaf5058[_0x5558fd(0x1d2)]});const _0xe54c70=[];let _0x2fc930=!![];const _0x417db0=[];for(const _0x46d88e of _0x3fcc02){const {Id_Productos:_0x494f62,Cantidad:_0x583394,Tallas:_0x419dbb,Tamanos:_0x529943}=_0x46d88e;if(!_0x494f62){_0x2fc930=![],_0x417db0[_0x5558fd(0x26d)](_0xaf5058[_0x5558fd(0x1bf)]);continue;}const _0x58858a=await Productos[_0x5558fd(0x24b)](_0x494f62);if(!_0x58858a){_0x2fc930=![],_0x417db0[_0x5558fd(0x26d)](_0x5558fd(0x24a)+_0x494f62+_0x5558fd(0x310)),_0xe54c70[_0x5558fd(0x26d)]({'Id_Productos':_0x494f62,'Nombre':_0xaf5058[_0x5558fd(0x216)],'stockDisponible':![],'mensajes':[_0x5558fd(0x24a)+_0x494f62+_0x5558fd(0x310)]});continue;}let _0x2ba6b7=!![],_0x123cc3=[],_0x3e62ef=[];if(_0x419dbb&&_0xaf5058[_0x5558fd(0x2e6)](_0x419dbb[_0x5558fd(0x2b1)],0x0))for(const _0x1ca99f of _0x419dbb){const _0xae3c81=_0x1ca99f[_0x5558fd(0x23b)]||_0x1ca99f['Talla']||_0x1ca99f[_0x5558fd(0x2ad)]||'',_0x6b1c63=Number(_0x1ca99f['cantidad']||_0x1ca99f[_0x5558fd(0x257)]||0x0);if(!_0xae3c81){_0x2ba6b7=![],_0x2fc930=![],_0x123cc3['push'](_0x5558fd(0x275)+_0x58858a[_0x5558fd(0x2ae)]),_0x3e62ef[_0x5558fd(0x26d)]({'tipo':_0xaf5058[_0x5558fd(0x208)],'nombre':_0xaf5058[_0x5558fd(0x22e)],'disponible':0x0,'solicitado':0x0,'suficiente':![],'error':_0xaf5058[_0x5558fd(0x34b)]});continue;}const _0x1a316f=await _0x419dbb['findOne']({'where':{'Nombre':_0xae3c81}});if(!_0x1a316f){_0x2ba6b7=![],_0x2fc930=![],_0x123cc3['push'](_0x5558fd(0x20a)+_0xae3c81+'\x20no\x20encontrada'),_0x3e62ef[_0x5558fd(0x26d)]({'tipo':_0xaf5058[_0x5558fd(0x208)],'nombre':_0xae3c81,'disponible':0x0,'solicitado':_0x6b1c63,'suficiente':![],'error':_0x5558fd(0x2e8)});continue;}const _0x5106ee=await Producto_Tallas[_0x5558fd(0x357)]({'where':{'Id_Productos':_0x58858a[_0x5558fd(0x293)],'Id_Tallas':_0x1a316f[_0x5558fd(0x2eb)]}}),_0x5682b1=_0xaf5058['QdlYD'](Number,_0x5106ee?.[_0x5558fd(0x2c3)]||0x0),_0x22744c=_0xaf5058[_0x5558fd(0x26c)](_0x5682b1,_0x6b1c63);!_0x22744c&&(_0x2ba6b7=![],_0x2fc930=![],_0x123cc3[_0x5558fd(0x26d)](_0x5558fd(0x1d9)+_0xae3c81+_0x5558fd(0x351)+_0x5682b1+_0x5558fd(0x2d6)+_0x6b1c63)),_0x3e62ef[_0x5558fd(0x26d)]({'tipo':_0x5558fd(0x23b),'nombre':_0xae3c81,'disponible':_0x5682b1,'solicitado':_0x6b1c63,'suficiente':_0x22744c});}if(_0x529943&&_0x529943[_0x5558fd(0x2b1)]>0x0)for(const _0x2c98b4 of _0x529943){const _0x49264d=_0x2c98b4['nombre']||_0x2c98b4['Nombre']||'';if(!_0x49264d){_0x2ba6b7=![],_0x2fc930=![],_0x123cc3[_0x5558fd(0x26d)](_0x5558fd(0x29c)+_0x58858a['Nombre']),_0x3e62ef[_0x5558fd(0x26d)]({'tipo':_0xaf5058[_0x5558fd(0x2d0)],'nombre':_0xaf5058['krUZj'],'disponible':0x0,'solicitado':0x0,'suficiente':![],'error':_0xaf5058[_0x5558fd(0x287)]});continue;}const _0x4639fd=await Tamano[_0x5558fd(0x357)]({'where':{'Nombre':_0x49264d}});if(!_0x4639fd){_0x2ba6b7=![],_0x2fc930=![],_0x123cc3[_0x5558fd(0x26d)](_0x5558fd(0x218)+_0x49264d+_0x5558fd(0x310)),_0x3e62ef[_0x5558fd(0x26d)]({'tipo':_0xaf5058[_0x5558fd(0x2d0)],'nombre':_0x49264d,'disponible':0x0,'solicitado':0x0,'suficiente':![],'error':_0xaf5058[_0x5558fd(0x210)]});continue;}const _0xef025d=await Producto_Tamano[_0x5558fd(0x357)]({'where':{'Id_Productos':_0x58858a['Id_Productos'],'Id_Tamano':_0x4639fd['Id_Tamano']}});if(!_0xef025d){_0x2ba6b7=![],_0x2fc930=![],_0x123cc3[_0x5558fd(0x26d)](_0x5558fd(0x1ea)+_0x58858a[_0x5558fd(0x2ae)]+_0x5558fd(0x1ab)+_0x49264d+'\x20configurado'),_0x3e62ef[_0x5558fd(0x26d)]({'tipo':_0xaf5058[_0x5558fd(0x2d0)],'nombre':_0x49264d,'disponible':0x0,'solicitado':0x0,'suficiente':![],'error':_0xaf5058[_0x5558fd(0x2ef)]});continue;}const _0xba1bcc=await Producto_Tamano_Insumos[_0x5558fd(0x355)]({'where':{'Id_Producto_Tamano':_0xef025d['Id_Producto_Tamano']},'include':[{'model':Insumos,'as':_0xaf5058[_0x5558fd(0x306)]}]}),_0x5c6763=_0xaf5058['QdlYD'](Number,_0x2c98b4[_0x5558fd(0x257)]||_0x2c98b4['cantidad']||0x0);let _0x1ebb87=!![];const _0x34382e=[];for(const _0x1aa505 of _0xba1bcc){const _0x1a1a8d=_0x1aa505[_0x5558fd(0x256)],_0xf0cba3=_0xaf5058[_0x5558fd(0x255)](Number,_0x1aa505[_0x5558fd(0x336)]||0x0),_0x2b28c2=_0xaf5058[_0x5558fd(0x264)](_0xf0cba3,_0x5c6763),_0x39ce1a=_0xaf5058[_0x5558fd(0x255)](Number,_0x1a1a8d[_0x5558fd(0x2c3)]||0x0),_0xff937e=_0x39ce1a>=_0x2b28c2;!_0xff937e&&(_0x1ebb87=![],_0x2ba6b7=![],_0x2fc930=![],_0x123cc3[_0x5558fd(0x26d)](_0x5558fd(0x1c4)+_0x1a1a8d[_0x5558fd(0x2ae)]+'.\x20Disponible:\x20'+_0x39ce1a+_0x5558fd(0x2b3)+_0x2b28c2)),_0x34382e[_0x5558fd(0x26d)]({'insumo':_0x1a1a8d['Nombre'],'disponible':_0x39ce1a,'necesario':_0x2b28c2,'suficiente':_0xff937e});}_0x3e62ef[_0x5558fd(0x26d)]({'tipo':_0x5558fd(0x251),'nombre':_0x49264d,'cantidad':_0x5c6763,'insumos':_0x34382e,'suficiente':_0x1ebb87});}if((!_0x419dbb||_0xaf5058[_0x5558fd(0x338)](_0x419dbb[_0x5558fd(0x2b1)],0x0))&&(!_0x529943||_0xaf5058['yVLoA'](_0x529943[_0x5558fd(0x2b1)],0x0))){const _0x82148a=await Producto_Tallas[_0x5558fd(0x355)]({'where':{'Id_Productos':_0x58858a[_0x5558fd(0x293)]},'include':[{'model':_0x419dbb,'as':_0x5558fd(0x302),'attributes':[_0xaf5058['zKZzX'],_0xaf5058[_0x5558fd(0x309)]]}]});if(_0x82148a&&_0xaf5058[_0x5558fd(0x2e6)](_0x82148a['length'],0x0))_0x2ba6b7=![],_0x2fc930=![],_0x123cc3['push'](_0x5558fd(0x1ea)+_0x58858a[_0x5558fd(0x2ae)]+_0x5558fd(0x2a7)+_0x82148a[_0x5558fd(0x2ed)](_0x3ed0fc=>_0x3ed0fc[_0x5558fd(0x302)]?.['Nombre']||_0x5558fd(0x30c))[_0x5558fd(0x2f2)](',\x20')),_0x3e62ef[_0x5558fd(0x26d)]({'tipo':'error','nombre':_0x58858a[_0x5558fd(0x2ae)],'disponible':0x0,'solicitado':0x0,'suficiente':![],'error':_0xaf5058[_0x5558fd(0x340)]});else{const _0x3b20f4=_0xaf5058[_0x5558fd(0x255)](Number,_0x58858a[_0x5558fd(0x2c3)]||0x0),_0x484e57=Number(_0x583394||0x0),_0x19e72b=_0xaf5058[_0x5558fd(0x341)](_0x3b20f4,_0x484e57);!_0x19e72b&&(_0x2ba6b7=![],_0x2fc930=![],_0x123cc3['push']('Stock\x20insuficiente\x20para\x20el\x20producto\x20'+_0x58858a[_0x5558fd(0x2ae)]+_0x5558fd(0x271)+_0x3b20f4+_0x5558fd(0x240)+_0x484e57)),_0x3e62ef[_0x5558fd(0x26d)]({'tipo':_0xaf5058[_0x5558fd(0x226)],'nombre':_0x58858a['Nombre'],'disponible':_0x3b20f4,'solicitado':_0x484e57,'suficiente':_0x19e72b});}}_0xe54c70['push']({'Id_Productos':_0x58858a['Id_Productos'],'Nombre':_0x58858a[_0x5558fd(0x2ae)],'stockDisponible':_0x2ba6b7,'mensajes':_0x123cc3,'detallesStock':_0x3e62ef});}_0x1b34cc[_0x5558fd(0x1ac)]({'status':_0xaf5058[_0x5558fd(0x298)],'data':{'ventaValida':_0x2fc930,'mensajesGenerales':_0x417db0,'resultados':_0xe54c70}});}catch(_0x3f329a){console[_0x5558fd(0x2f8)](_0x5558fd(0x35d),_0x3f329a),_0x1b34cc[_0x5558fd(0x1e0)](0x1f4)['json']({'status':_0x5558fd(0x2f8),'message':_0xaf5058[_0x5558fd(0x32b)]});}},exports[a0_0x1f2711(0x2b2)]=async(_0xa39f5,_0x2a234d)=>{const _0xa59b69=a0_0x1f2711,_0x170a17={'sPsvH':_0xa59b69(0x2f8),'dfvsf':'Id_Tallas_Talla','FwUyZ':_0xa59b69(0x2eb),'WQcKg':_0xa59b69(0x2ae),'slVED':_0xa59b69(0x221),'bXxKs':_0xa59b69(0x2ba),'nszTk':'Error\x20al\x20obtener\x20tallas\x20del\x20producto'};try{const {Id_Productos:_0x4edbdb}=_0xa39f5[_0xa59b69(0x28a)];if(!_0x4edbdb)return _0x2a234d[_0xa59b69(0x1e0)](0x190)[_0xa59b69(0x1ac)]({'status':_0x170a17[_0xa59b69(0x22a)],'message':_0xa59b69(0x2af)});const _0x31e367=await Productos[_0xa59b69(0x24b)](_0x4edbdb);if(!_0x31e367)return _0x2a234d[_0xa59b69(0x1e0)](0x194)[_0xa59b69(0x1ac)]({'status':_0x170a17[_0xa59b69(0x22a)],'message':_0xa59b69(0x1f8)});const _0x43bcd8=await Producto_Tallas[_0xa59b69(0x355)]({'where':{'Id_Productos':_0x4edbdb},'include':[{'model':Tallas,'as':_0x170a17['dfvsf'],'attributes':[_0x170a17[_0xa59b69(0x1d1)],_0x170a17[_0xa59b69(0x1da)]]}]}),_0x110142=_0x43bcd8['map'](_0x478681=>({'Id_Producto_Tallas':_0x478681[_0xa59b69(0x350)],'Id_Tallas':_0x478681[_0xa59b69(0x2eb)],'Nombre_Talla':_0x478681[_0xa59b69(0x302)]?.[_0xa59b69(0x2ae)]||_0xa59b69(0x30c),'Stock':_0x478681[_0xa59b69(0x2c3)],'Precio':_0x478681['Precio']||0x0}));_0x2a234d[_0xa59b69(0x1ac)]({'status':_0x170a17[_0xa59b69(0x22b)],'data':{'Id_Productos':_0x31e367['Id_Productos'],'Nombre':_0x31e367[_0xa59b69(0x2ae)],'tieneTallas':_0x110142[_0xa59b69(0x2b1)]>0x0,'tallasDisponibles':_0x110142,'totalTallas':_0x110142[_0xa59b69(0x2b1)]}});}catch(_0x34c65c){console[_0xa59b69(0x2f8)](_0x170a17[_0xa59b69(0x259)],_0x34c65c),_0x2a234d[_0xa59b69(0x1e0)](0x1f4)[_0xa59b69(0x1ac)]({'status':_0x170a17[_0xa59b69(0x22a)],'message':_0x170a17[_0xa59b69(0x2a3)]});}},exports[a0_0x1f2711(0x299)]=async(_0x23a7dc,_0x1e3aa9)=>{const _0x3a1819=a0_0x1f2711,_0x2bcbd9={'KmaFb':_0x3a1819(0x2f8),'dbBmQ':'ID\x20de\x20producto\x20es\x20requerido','QwfXV':_0x3a1819(0x1f8),'EYveh':'Id_Tamano_Tamano','Sjkvf':_0x3a1819(0x2ae),'uCCvc':_0x3a1819(0x249),'atewA':'Producto_Tamano_Insumos','uCgxE':_0x3a1819(0x256),'azxKQ':_0x3a1819(0x27b),'YtNjY':_0x3a1819(0x2c3),'wXPsx':_0x3a1819(0x2d1),'mGzrj':_0x3a1819(0x221),'dvuAp':function(_0x5a2f3e,_0x212a0c){return _0x5a2f3e>_0x212a0c;},'fRIzE':'Error\x20al\x20obtener\x20tamaños\x20del\x20producto'};try{const {Id_Productos:_0x107331}=_0x23a7dc[_0x3a1819(0x28a)];if(!_0x107331)return _0x1e3aa9['status'](0x190)['json']({'status':_0x2bcbd9[_0x3a1819(0x280)],'message':_0x2bcbd9[_0x3a1819(0x332)]});const _0x31e62d=await Productos[_0x3a1819(0x24b)](_0x107331);if(!_0x31e62d)return _0x1e3aa9[_0x3a1819(0x1e0)](0x194)[_0x3a1819(0x1ac)]({'status':_0x2bcbd9[_0x3a1819(0x280)],'message':_0x2bcbd9[_0x3a1819(0x32a)]});const _0x257d10=await Producto_Tamano[_0x3a1819(0x355)]({'where':{'Id_Productos':_0x107331},'include':[{'model':Tamano,'as':_0x2bcbd9['EYveh'],'attributes':[_0x3a1819(0x22f),_0x2bcbd9[_0x3a1819(0x234)],_0x3a1819(0x1e6),_0x2bcbd9['uCCvc']]},{'model':Producto_Tamano_Insumos,'as':_0x2bcbd9['atewA'],'include':[{'model':Insumos,'as':_0x2bcbd9[_0x3a1819(0x24d)],'attributes':[_0x2bcbd9[_0x3a1819(0x1be)],_0x2bcbd9[_0x3a1819(0x234)],_0x2bcbd9[_0x3a1819(0x225)],_0x2bcbd9[_0x3a1819(0x201)]]}]}]}),_0x1639ff=_0x257d10[_0x3a1819(0x2ed)](_0x4f1643=>({'Id_Producto_Tamano':_0x4f1643[_0x3a1819(0x33c)],'Id_Tamano':_0x4f1643[_0x3a1819(0x22f)],'nombre':_0x4f1643[_0x3a1819(0x324)]?.[_0x3a1819(0x2ae)]||_0x3a1819(0x30c),'precio':_0x4f1643[_0x3a1819(0x324)]?.[_0x3a1819(0x249)]?.[_0x3a1819(0x269)]()||'0','Cantidad_Maxima':_0x4f1643['Id_Tamano_Tamano']?.['Cantidad_Maxima']||0x0,'insumos':_0x4f1643[_0x3a1819(0x23e)]?.[_0x3a1819(0x2ed)](_0x471440=>({'Id_Insumo':_0x471440[_0x3a1819(0x256)]?.[_0x3a1819(0x27b)],'Nombre':_0x471440['Id_Insumos_Insumo']?.[_0x3a1819(0x2ae)]||_0x3a1819(0x30c),'Stock':_0x471440['Id_Insumos_Insumo']?.[_0x3a1819(0x2c3)]||0x0,'Cantidad_Consumo':_0x471440[_0x3a1819(0x336)]||0x0,'Unidad_Medida':_0x471440[_0x3a1819(0x256)]?.[_0x3a1819(0x2d1)]||_0x3a1819(0x30c)}))||[]}));_0x1e3aa9[_0x3a1819(0x1ac)]({'status':_0x2bcbd9[_0x3a1819(0x267)],'data':{'Id_Productos':_0x31e62d['Id_Productos'],'Nombre':_0x31e62d[_0x3a1819(0x2ae)],'tieneTamanos':_0x2bcbd9[_0x3a1819(0x1bd)](_0x1639ff[_0x3a1819(0x2b1)],0x0),'tamanosDisponibles':_0x1639ff,'totalTamanos':_0x1639ff[_0x3a1819(0x2b1)]}});}catch(_0x15cf9c){console[_0x3a1819(0x2f8)](_0x3a1819(0x1ba),_0x15cf9c),_0x1e3aa9[_0x3a1819(0x1e0)](0x1f4)[_0x3a1819(0x1ac)]({'status':_0x2bcbd9[_0x3a1819(0x280)],'message':_0x2bcbd9[_0x3a1819(0x1b4)]});}},exports['obtenerTamanoPorNombre']=async(_0x1e9ad1,_0xc206d2)=>{const _0x31015e=a0_0x1f2711,_0x2c148e={'XTlTv':'error','zLdoH':_0x31015e(0x292),'pRFDa':'Tamano_Insumos','VzMzd':_0x31015e(0x27b),'HBkiD':_0x31015e(0x2c3),'cYveW':_0x31015e(0x2d1),'uAdkz':_0x31015e(0x235),'BFIJe':_0x31015e(0x21d)};try{const {nombreTamano:_0x11245}=_0x1e9ad1[_0x31015e(0x28a)];if(!_0x11245)return _0xc206d2[_0x31015e(0x1e0)](0x190)[_0x31015e(0x1ac)]({'status':_0x2c148e['XTlTv'],'message':_0x2c148e[_0x31015e(0x2fc)]});const _0x4c3e68=await Tamano[_0x31015e(0x357)]({'where':{'Nombre':_0x11245},'include':[{'model':Tamano_Insumos,'as':_0x2c148e[_0x31015e(0x207)],'include':[{'model':Insumos,'as':_0x31015e(0x256),'attributes':[_0x2c148e[_0x31015e(0x1bc)],_0x31015e(0x2ae),_0x2c148e[_0x31015e(0x1b8)],_0x2c148e[_0x31015e(0x2fd)]]}]}]});if(!_0x4c3e68)return _0xc206d2[_0x31015e(0x1e0)](0x194)['json']({'status':_0x2c148e[_0x31015e(0x228)],'message':_0x31015e(0x218)+_0x11245+'\x20no\x20encontrado'});const _0x6b0992={'Id_Tamano':_0x4c3e68[_0x31015e(0x22f)],'nombre':_0x4c3e68[_0x31015e(0x2ae)],'precio':_0x4c3e68[_0x31015e(0x249)]?.[_0x31015e(0x269)]()||'0','Cantidad_Maxima':_0x4c3e68['Cantidad_Maxima'],'Estado':_0x4c3e68[_0x31015e(0x27e)],'insumos':_0x4c3e68['Tamano_Insumos']?.[_0x31015e(0x2ed)](_0x428617=>({'Id_Insumo':_0x428617[_0x31015e(0x256)]?.[_0x31015e(0x27b)],'Nombre':_0x428617[_0x31015e(0x256)]?.[_0x31015e(0x2ae)]||_0x31015e(0x30c),'Stock':_0x428617[_0x31015e(0x256)]?.[_0x31015e(0x2c3)]||0x0,'Cantidad':_0x428617[_0x31015e(0x257)]||0x0,'Unidad_Medida':_0x428617[_0x31015e(0x256)]?.[_0x31015e(0x2d1)]||'N/A'}))||[]};_0xc206d2['json']({'status':_0x31015e(0x221),'data':_0x6b0992});}catch(_0x240237){console['error'](_0x2c148e[_0x31015e(0x34e)],_0x240237),_0xc206d2[_0x31015e(0x1e0)](0x1f4)[_0x31015e(0x1ac)]({'status':_0x2c148e['XTlTv'],'message':_0x2c148e[_0x31015e(0x31d)]});}},exports[a0_0x1f2711(0x1ed)]=async(_0x4fad6f,_0x35bb6b)=>{const _0x15a348=a0_0x1f2711,_0x26cddc={'yapRs':_0x15a348(0x2b4),'uZUaF':'N/A','ifubu':'error','oyCJY':'Producto\x20no\x20encontrado','WATMo':_0x15a348(0x324),'HiIiJ':_0x15a348(0x22f),'vxUCK':'Cantidad_Maxima','reYwY':_0x15a348(0x249),'ZmLuy':_0x15a348(0x23e),'NADpW':_0x15a348(0x256),'aHIpy':'Id_Insumos','YwVWi':_0x15a348(0x2ae),'vhzCP':_0x15a348(0x2c3),'uLMLF':_0x15a348(0x2d1),'EeGJj':_0x15a348(0x221),'MZLNP':function(_0x1872a0,_0x2ed487){return _0x1872a0>_0x2ed487;},'YAExp':function(_0x392d01,_0x54c6fc){return _0x392d01/_0x54c6fc;},'xbuye':_0x15a348(0x200),'FKXuj':_0x15a348(0x33e)};try{const {Id_Productos:_0x852c08}=_0x4fad6f[_0x15a348(0x28a)];if(!_0x852c08)return _0x35bb6b[_0x15a348(0x1e0)](0x190)['json']({'status':_0x26cddc['ifubu'],'message':_0x15a348(0x2af)});const _0x5f57b2=await Productos[_0x15a348(0x24b)](_0x852c08);if(!_0x5f57b2)return _0x35bb6b[_0x15a348(0x1e0)](0x194)['json']({'status':_0x26cddc['ifubu'],'message':_0x26cddc[_0x15a348(0x2b6)]});const _0x5adb78=await Producto_Tamano[_0x15a348(0x355)]({'where':{'Id_Productos':_0x852c08},'include':[{'model':Tamano,'as':_0x26cddc[_0x15a348(0x283)],'attributes':[_0x26cddc[_0x15a348(0x1ad)],_0x15a348(0x2ae),_0x26cddc[_0x15a348(0x339)],_0x26cddc[_0x15a348(0x28b)]]},{'model':Producto_Tamano_Insumos,'as':_0x26cddc[_0x15a348(0x33f)],'include':[{'model':Insumos,'as':_0x26cddc['NADpW'],'attributes':[_0x26cddc['aHIpy'],_0x26cddc[_0x15a348(0x2e2)],_0x26cddc[_0x15a348(0x1b9)],_0x26cddc[_0x15a348(0x1ca)],_0x15a348(0x294)]}]}]}),_0x3815fd=_0x5adb78['map'](_0x45a28a=>{const _0xa2e62c=_0x15a348,_0x5dd382=_0x45a28a[_0xa2e62c(0x23e)]?.[_0xa2e62c(0x2ed)](_0x2b3380=>({'Id_Insumo':_0x2b3380[_0xa2e62c(0x256)]?.[_0xa2e62c(0x27b)],'Nombre':_0x2b3380[_0xa2e62c(0x256)]?.[_0xa2e62c(0x2ae)]||_0xa2e62c(0x30c),'Stock':_0x2b3380[_0xa2e62c(0x256)]?.[_0xa2e62c(0x2c3)]||0x0,'Cantidad_Consumo':_0x2b3380[_0xa2e62c(0x336)]||0x0,'Unidad_Medida':_0x2b3380['Id_Insumos_Insumo']?.[_0xa2e62c(0x2d1)]||'N/A','Id_Categoria':_0x2b3380[_0xa2e62c(0x256)]?.[_0xa2e62c(0x294)]||_0xa2e62c(0x30c)}))||[];return{'Id_Producto_Tamano':_0x45a28a[_0xa2e62c(0x33c)],'Id_Tamano':_0x45a28a[_0xa2e62c(0x22f)],'Nombre_Tamano':_0x45a28a['Id_Tamano_Tamano']?.['Nombre']||_0x26cddc[_0xa2e62c(0x272)],'Cantidad_Maxima':_0x45a28a[_0xa2e62c(0x324)]?.[_0xa2e62c(0x1e6)]||0x0,'Precio_Venta':_0x45a28a[_0xa2e62c(0x324)]?.[_0xa2e62c(0x249)]||0x0,'Total_Insumos':_0x5dd382[_0xa2e62c(0x2b1)],'Insumos':_0x5dd382,'Insumos_Por_Categoria':_0x5dd382[_0xa2e62c(0x2fe)]((_0x53dd4d,_0x11df0c)=>{const _0x109c3b=_0xa2e62c,_0xfd0f5=_0x11df0c[_0x109c3b(0x2e0)]||_0x26cddc[_0x109c3b(0x23d)];return!_0x53dd4d[_0xfd0f5]&&(_0x53dd4d[_0xfd0f5]=[]),_0x53dd4d[_0xfd0f5][_0x109c3b(0x26d)](_0x11df0c),_0x53dd4d;},{})};}),_0x502350=_0x3815fd[_0x15a348(0x2b1)],_0xe57d23=_0x3815fd[_0x15a348(0x2fe)]((_0x4e8637,_0x521b64)=>_0x4e8637+_0x521b64['Total_Insumos'],0x0),_0x239fa2=_0x3815fd[_0x15a348(0x242)](_0x40bc76=>_0x40bc76[_0x15a348(0x291)]===0x0);_0x35bb6b[_0x15a348(0x1ac)]({'status':_0x26cddc['EeGJj'],'message':_0x15a348(0x24e)+_0x5f57b2[_0x15a348(0x2ae)],'data':{'Id_Productos':_0x5f57b2[_0x15a348(0x293)],'Nombre_Producto':_0x5f57b2[_0x15a348(0x2ae)],'Resumen':{'Total_Tamanos':_0x502350,'Total_Insumos_Configurados':_0xe57d23,'Tamanos_Sin_Insumos':_0x239fa2['length'],'Promedio_Insumos_Por_Tamaño':_0x26cddc[_0x15a348(0x21b)](_0x502350,0x0)?_0x26cddc[_0x15a348(0x296)](_0xe57d23,_0x502350)[_0x15a348(0x32f)](0x2):0x0},'Configuracion_Completa':_0x3815fd,'Alertas':_0x26cddc[_0x15a348(0x21b)](_0x239fa2['length'],0x0)?[_0x15a348(0x1aa)+_0x239fa2[_0x15a348(0x2b1)]+_0x15a348(0x220)+_0x239fa2[_0x15a348(0x2ed)](_0x2184d4=>_0x2184d4[_0x15a348(0x327)])[_0x15a348(0x2f2)](',\x20')]:[]}});}catch(_0x310211){console[_0x15a348(0x2f8)](_0x26cddc[_0x15a348(0x274)],_0x310211),_0x35bb6b[_0x15a348(0x1e0)](0x1f4)[_0x15a348(0x1ac)]({'status':_0x15a348(0x2f8),'message':_0x26cddc[_0x15a348(0x278)],'detail':_0x310211[_0x15a348(0x2a0)]});}},exports[a0_0x1f2711(0x1cb)]=async(_0x36bdb2,_0x12dc97)=>{const _0x3c3179=a0_0x1f2711,_0x4bf29c={'AkALp':function(_0xf589ac,_0x40724a){return _0xf589ac+_0x40724a;},'TSuwX':function(_0x559d10,_0x2c7326){return _0x559d10+_0x2c7326;},'iSpOO':'error','GjRBx':_0x3c3179(0x256),'fSYge':_0x3c3179(0x221),'NuFTx':_0x3c3179(0x2c6)};try{const {Id_Productos:_0x112a44,nombreTamano:_0x2ad16c}=_0x36bdb2[_0x3c3179(0x28a)];console[_0x3c3179(0x1b5)](_0x3c3179(0x206)+_0x112a44+_0x3c3179(0x290)+_0x2ad16c);const _0x5c8139=await Tamano[_0x3c3179(0x357)]({'where':{'Nombre':_0x2ad16c}});if(!_0x5c8139)return _0x12dc97[_0x3c3179(0x1e0)](0x194)[_0x3c3179(0x1ac)]({'status':_0x4bf29c[_0x3c3179(0x1e7)],'message':'Tamaño\x20'+_0x2ad16c+_0x3c3179(0x310)});console[_0x3c3179(0x1b5)](_0x3c3179(0x21c)+_0x5c8139[_0x3c3179(0x2ae)]+'\x20(ID:\x20'+_0x5c8139[_0x3c3179(0x22f)]+')');const _0x23d7f0=await Producto_Tamano[_0x3c3179(0x357)]({'where':{'Id_Productos':_0x112a44,'Id_Tamano':_0x5c8139['Id_Tamano']}});if(!_0x23d7f0)return _0x12dc97[_0x3c3179(0x1e0)](0x194)[_0x3c3179(0x1ac)]({'status':_0x3c3179(0x2f8),'message':_0x3c3179(0x2be)+_0x2ad16c});console[_0x3c3179(0x1b5)]('✅\x20Relación\x20producto-tamaño\x20encontrada\x20(ID:\x20'+_0x23d7f0[_0x3c3179(0x33c)]+')');const _0x2851c8=await Producto_Tamano_Insumos[_0x3c3179(0x355)]({'where':{'Id_Producto_Tamano':_0x23d7f0[_0x3c3179(0x33c)]},'include':[{'model':Insumos,'as':_0x4bf29c[_0x3c3179(0x1f7)],'required':!![]}]});console['log'](_0x3c3179(0x34a)+_0x2851c8[_0x3c3179(0x2b1)]);const _0x5e7e7c=_0x2851c8[_0x3c3179(0x2ed)]((_0x244fba,_0x3a9465)=>{const _0x285556=_0x3c3179,_0xd6d104={'index':_0x4bf29c['AkALp'](_0x3a9465,0x1),'Id_Insumo':_0x244fba[_0x285556(0x256)][_0x285556(0x27b)],'Nombre':_0x244fba[_0x285556(0x256)][_0x285556(0x2ae)],'Cantidad_Consumo':_0x244fba['Cantidad_Consumo'],'Stock_Actual':_0x244fba['Id_Insumos_Insumo'][_0x285556(0x2c3)]};return console[_0x285556(0x1b5)]('\x20\x20'+_0x4bf29c[_0x285556(0x1b6)](_0x3a9465,0x1)+'.\x20'+_0xd6d104[_0x285556(0x2ae)]+_0x285556(0x27a)+_0xd6d104['Cantidad_Consumo']+'\x20-\x20Stock:\x20'+_0xd6d104[_0x285556(0x2c9)]),_0xd6d104;}),_0x3ca26c={'status':_0x4bf29c[_0x3c3179(0x2f4)],'producto_id':_0x112a44,'tamano':{'nombre':_0x5c8139[_0x3c3179(0x2ae)],'id':_0x5c8139[_0x3c3179(0x22f)],'cantidad_maxima':_0x5c8139['Cantidad_Maxima'],'precio_venta':_0x5c8139[_0x3c3179(0x249)]},'insumos_configurados':_0x5e7e7c,'total_insumos':_0x2851c8[_0x3c3179(0x2b1)]};return console[_0x3c3179(0x1b5)](_0x3c3179(0x2a4)+_0x2851c8['length']),_0x12dc97['json'](_0x3ca26c);}catch(_0x21c393){return console[_0x3c3179(0x2f8)](_0x4bf29c[_0x3c3179(0x262)],_0x21c393),_0x12dc97[_0x3c3179(0x1e0)](0x1f4)[_0x3c3179(0x1ac)]({'status':_0x4bf29c[_0x3c3179(0x1e7)],'message':_0x21c393[_0x3c3179(0x2a0)]});}};

//Nando es una caprichosa