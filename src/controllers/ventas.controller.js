const a0_0x1bec63=a0_0x31ec;function a0_0x31ec(_0x1e54e9,_0x5ecf62){const _0x9dfcb=a0_0x9dfc();return a0_0x31ec=function(_0x31ec6d,_0xd1ea0a){_0x31ec6d=_0x31ec6d-0x13a;let _0x563d88=_0x9dfcb[_0x31ec6d];return _0x563d88;},a0_0x31ec(_0x1e54e9,_0x5ecf62);}(function(_0x419a22,_0x1675a0){const _0x6798e3=a0_0x31ec,_0x442e80=_0x419a22();while(!![]){try{const _0x25c4fc=-parseInt(_0x6798e3(0x176))/0x1*(parseInt(_0x6798e3(0x1e0))/0x2)+parseInt(_0x6798e3(0x26c))/0x3+parseInt(_0x6798e3(0x1a2))/0x4+-parseInt(_0x6798e3(0x191))/0x5*(-parseInt(_0x6798e3(0x18d))/0x6)+-parseInt(_0x6798e3(0x268))/0x7*(parseInt(_0x6798e3(0x1c9))/0x8)+-parseInt(_0x6798e3(0x227))/0x9*(parseInt(_0x6798e3(0x1a8))/0xa)+-parseInt(_0x6798e3(0x13e))/0xb*(-parseInt(_0x6798e3(0x1d7))/0xc);if(_0x25c4fc===_0x1675a0)break;else _0x442e80['push'](_0x442e80['shift']());}catch(_0xaa44b9){_0x442e80['push'](_0x442e80['shift']());}}}(a0_0x9dfc,0xd71de));function a0_0x9dfc(){const _0x285215=['NzqvQ','LNCZt','toJSON','qACQO','638688dfWvwf','xCVKQ','jLIqY','nSihu','\x20x\x20Talla\x20','filter','bnKYy','Faltan\x20datos\x20requeridos','Desconocido','166JIKJXq','Duplicado\x20en\x20campo\x20único','Id_Cliente','validarStockVenta','Ulwaq','mknur','Estado','map','Stock\x20insuficiente\x20para\x20talla\x20','lexWe','Tamanos_Original','Total','okDpm','hIAzW','rRENn','slice','itucb','Tallas','transaction','mclmE','cYHYW','Cantidad','Detalle\x20de\x20venta\x20es\x20requerido\x20y\x20debe\x20ser\x20un\x20array\x20no\x20vacío','env','Venta\x20no\x20encontrada','stringify','SGnPo','vWsAf','Id_Producto_Tamano_Insumos_Producto_Tamano_Insumo','Bmjsk','mngRE','sCmiN','insuficiente','mZpcK','QuWbX','IbIXX','TPWAf','VbpDj','aHsEJ','xpiBs','Efectivo','sort','reporteVentasDiarias','VKjRR','length','GqspI','query','getMonth','Detalle_Venta','forEach','mGeAE','VOpxl','EMiaP','Producto\x20desconocido','zSYfp','Error\x20inesperado\x20al\x20crear\x20venta','WdtDc','nombre','itTAi','Id_Producto_Tallas_Producto_Talla','success','NODE_ENV','jCprp','Tamaño\x20','pLlIN','bDYlY','Error\x20al\x20validar\x20stock\x20de\x20venta:','dZzNg','mVPiM','message','qvXkj','18JPUreq','phhXJ','\x20del\x20producto\x20','lhvDE','dMSjQ','lPMup','Precio','Id_Insumos_Insumo','Id_Empleados_Empleado','RdNOf','Nombre\x20de\x20tamaño\x20no\x20válido\x20para\x20el\x20producto\x20','setHours','trim','yqxmv','Id_Productos_Producto','ZTWMM','Error\x20al\x20obtener\x20tallas\x20del\x20producto','PrecioTotal','split','Producto\x20requiere\x20tallas','.\x20Disponible:\x20','Error\x20al\x20validar\x20stock\x20de\x20venta','json','lhlwG','Precio_Venta','tieneTallas','descripcionTamanos','descripcion','no\x20coincide','Lvncm','gFHel','Id_Agendamientos','body','TAzag','Error\x20al\x20validar\x20stock:','jIqmH','LqMCw','PrcYW','Brsdy','Agendamiento\x20no\x20encontrado','La\x20venta\x20debe\x20tener\x20estado\x203\x20(pendiente)\x20para\x20poder\x20marcarla\x20como\x20completada','Venta\x20creada\x20correctamente','Conflicto\x20de\x20datos\x20únicos','Nombre\x20de\x20talla\x20no\x20válido\x20para\x20el\x20producto\x20','parse','Stock\x20insuficiente\x20para\x20insumo\x20','RwaqV','Error\x20al\x20anular\x20venta:','GJJAU','Anulada','Nombre\x20de\x20talla\x20no\x20válido','XLAoe','Stock\x20insuficiente\x20para\x20el\x20producto\x20','ktxqd','development','sequelize','Imzgj','\x20no\x20encontrado','Error\x20al\x20generar\x20reporte\x20diario','rzMgV','KZzRu','ptMTQ','SKHRd','Mzyij','LCUaX','1664271ipVidn','FyfHh','Transferencia','listarVentas','4157277RKcwnR','slQxA','Id_Productos','anularVenta','yUvre','Id_Tallas_Talla','La\x20venta\x20debe\x20tener\x20estado\x203\x20(pendiente)\x20para\x20poder\x20anularla','ZQjMM','Fecha_Completado','dVkRK','LRbaa','sofGQ','SCQIA','Fecha_Anulacion','isArray','WStgv','params','myYxn','errors','jubzq',',\x20solicitado\x20','Producto\x20no\x20encontrado','evzrQ','NoMKS','precio','marcarVentaCompletada','tieneTamanos','Error\x20al\x20marcar\x20venta\x20como\x20completada:\x20','Ljfnr','WVgeX','Cantidad_Consumo','qfMAu','Tallas_Data','EcBSi','fzaJn','264cqgxFo','wMmbF','Producto\x20con\x20ID\x20','update','producto','Servicio','no\x20válido','create','XnSJr','reporteVentasMensuales','TAKbZ','TmETJ','M_Pago','findOne',':\x20disponible\x20','Talla\x20no\x20encontrada','ID\x20de\x20producto\x20es\x20requerido\x20para\x20todos\x20los\x20items','qhxcX','push','Id_Producto_Tallas','Id_Agendamientos_Agendamiento','rollback','commit','Error\x20al\x20generar\x20reporte\x20mensual:','gjlPG','dLEig','oWSeI','GtLzI','cantidad','zjTRh','DOKzk','../models','ffKLP','Error\x20de\x20base\x20de\x20datos','HyBjk','EbAsw','oPQEe','krrqq','Id_Ventas','Talla','Error\x20al\x20marcar\x20venta\x20como\x20completada','findAll','cYqTl','Error\x20al\x20anular\x20venta','hjKtP','XirZU','iRkzh','YVfvW','ILpKd',',\x20Solicitado:\x20','Error\x20al\x20generar\x20reporte\x20mensual','snYMs','Tallas_Data_Original','dYUSq','Tamanos_Data','join','20474gyvcDz','\x20no\x20tiene\x20el\x20tamaño\x20','kIcSc','tDxzA','between','Error\x20al\x20validar\x20stock','Error\x20al\x20obtener\x20ventas:\x20','../config/db','Empleado\x20no\x20encontrado','Error\x20al\x20actualizar\x20stock:\x20','adNiU','Id_Producto_Tamano_Insumos','Fecha','crearVenta','includes','ONejd','KnfmA','values','PoTFu','Subtotal','Id_Servicio','gzQzm','sRoUE','6EIlPOo','talla','hAeHy','Tallas_Original','3259125OkeLug','tIEwP','\x20unidades','Stock','kKyLs','zQmzm','\x20x\x20','UHnpR','Error\x20al\x20anular\x20venta:\x20','ID\x20de\x20producto\x20es\x20requerido','MRBOf','Glanw','El\x20producto\x20','QmjAk','PNJxN','\x20configurado','quhgk','4851460lqKjUn','status','Lcvno','nBmoq','Id_Tamano','wMVII','6170530acuDHz','Tamanos_Data_Original','Id_Producto_Tamano','N/A','oRwZg','steIy','Tamaño\x20no\x20configurado\x20para\x20este\x20producto','reduce','Nombre','Nombre\x20de\x20tamaño\x20no\x20válido','Error\x20al\x20marcar\x20venta\x20como\x20completada:','LVbav','Id_Empleados','\x20requiere\x20especificar\x20tallas.\x20Tallas\x20disponibles:\x20','detalleTalla','Tamanos','Talla\x20','Id_Tallas','toISOString','tqNrf','VPTMt','ydkxv','zGjjB',',\x20Necesario:\x20','obtenerVentaPorId','Venta\x20marcada\x20como\x20completada\x20correctamente','bllmi','LkgFg','NzJAJ','tXzZZ','Tamaño\x20no\x20encontrado','error','xzymz','24fljidx','VYqfV','JCBdw','kvnon','\x20no\x20encontrada','findByPk','Error\x20al\x20obtener\x20tallas\x20del\x20producto:','\x20no\x20encontrada\x20para\x20el\x20producto\x20','descripcionTallas','obtenerTallasProducto'];a0_0x9dfc=function(){return _0x285215;};return a0_0x9dfc();}const {Ventas,Detalle_Venta,Productos,Producto_Tallas,Producto_Tamano_Insumos,Producto_Tamano,Tamano,Tallas,Agendamientos,Empleados,Servicios,Clientes,Insumos}=require(a0_0x1bec63(0x15d)),{sequelize}=require(a0_0x1bec63(0x17d)),{UniqueConstraintError,ValidationError,DatabaseError}=require(a0_0x1bec63(0x25e)),validarCliente=async(_0x4f674c,_0x3fc582)=>{const _0x241a79=a0_0x1bec63,_0x2caf39=await Clientes[_0x241a79(0x1ce)](_0x4f674c,{'transaction':_0x3fc582});if(!_0x2caf39)throw new Error('Cliente\x20no\x20encontrado');return _0x2caf39;},validarEmpleado=async(_0x6df926,_0xd9b39f)=>{const _0x1f1e2d=a0_0x1bec63,_0x569c1d=await Empleados['findByPk'](_0x6df926,{'transaction':_0xd9b39f});if(!_0x569c1d)throw new Error(_0x1f1e2d(0x17e));return _0x569c1d;},validarMetodoPago=(_0x5838df,_0x3676e8)=>{const _0xbc80bf=a0_0x1bec63,_0x3adde0={'bnKYy':_0xbc80bf(0x208),'XirZU':'Tarjeta','aHsEJ':_0xbc80bf(0x26a),'DOKzk':'Método\x20de\x20pago\x20no\x20válido','yqxmv':function(_0x55cf2b,_0x5c08f6){return _0x55cf2b===_0x5c08f6;},'evzrQ':'La\x20transferencia\x20requiere\x20número\x20de\x20referencia'},_0x1ffb3e=[_0x3adde0[_0xbc80bf(0x1dd)],_0x3adde0[_0xbc80bf(0x16b)],_0x3adde0['aHsEJ'],'PSE'];if(!_0x1ffb3e[_0xbc80bf(0x184)](_0x5838df))throw new Error(_0x3adde0[_0xbc80bf(0x15c)]);if(_0x3adde0[_0xbc80bf(0x234)](_0x5838df,_0x3adde0[_0xbc80bf(0x206)])&&!_0x3676e8)throw new Error(_0x3adde0[_0xbc80bf(0x282)]);},calcularPrecio=async(_0x3fd790,_0x3e4a1c,_0x1996e0,_0x5e3b05,_0x8a2b14)=>{const _0x5f7aa=a0_0x1bec63,_0x1c5a3c={'NzqvQ':function(_0x1f4179,_0x3bdbb6){return _0x1f4179(_0x3bdbb6);},'jLIqY':function(_0x17b12d,_0x4e713f){return _0x17b12d+_0x4e713f;},'JCBdw':function(_0x405cfd,_0x21d419){return _0x405cfd>_0x21d419;},'GJJAU':function(_0x4dd462,_0x3b37ef){return _0x4dd462*_0x3b37ef;},'mIFFS':function(_0xb39ad3,_0x46b578){return _0xb39ad3+_0x46b578;},'LqMCw':function(_0x3efa20,_0x8bdd2d){return _0x3efa20(_0x8bdd2d);},'Imzgj':function(_0x3d9573,_0x50f686){return _0x3d9573*_0x50f686;},'JhjUP':function(_0x5651c0,_0x5cab62){return _0x5651c0(_0x5cab62);},'krrqq':function(_0x35ac60,_0x423dd7){return _0x35ac60(_0x423dd7);},'PNJxN':function(_0x4d0412,_0x1a1850){return _0x4d0412*_0x1a1850;},'zSYfp':function(_0x570801,_0x27399a){return _0x570801(_0x27399a);}};let _0x5428f6=0x0;try{if(_0x1996e0&&_0x1996e0[_0x5f7aa(0x20c)]>0x0)for(const _0x1a542d of _0x1996e0){const _0x5499fb=Number(_0x1a542d[_0x5f7aa(0x238)]||0x0);_0x5428f6+=_0x5499fb;}else{if(_0x3e4a1c&&_0x1c5a3c[_0x5f7aa(0x1cb)](_0x3e4a1c['length'],0x0))for(const _0x32db5a of _0x3e4a1c){const _0xb85a2c=await Producto_Tallas[_0x5f7aa(0x14b)]({'where':{'Id_Productos':_0x3fd790[_0x5f7aa(0x26e)],'Talla':_0x32db5a[_0x5f7aa(0x18e)]},'transaction':_0x8a2b14});if(_0xb85a2c){const _0x39dc8c=_0x1c5a3c[_0x5f7aa(0x257)](_0x1c5a3c['mIFFS'](Number(_0x3fd790[_0x5f7aa(0x23f)]),_0x1c5a3c[_0x5f7aa(0x24b)](Number,_0xb85a2c[_0x5f7aa(0x22d)])),_0x32db5a[_0x5f7aa(0x15a)]);_0x5428f6+=_0x39dc8c;}else{const _0x5385f1=_0x1c5a3c[_0x5f7aa(0x25f)](_0x1c5a3c['JhjUP'](Number,_0x3fd790[_0x5f7aa(0x23f)]),_0x32db5a[_0x5f7aa(0x15a)]);_0x5428f6+=_0x5385f1;}}else _0x5428f6=_0x1c5a3c[_0x5f7aa(0x25f)](_0x1c5a3c[_0x5f7aa(0x1d3)](Number,_0x3fd790['Precio_Venta']),_0x5e3b05);}(!_0x5428f6||_0x1c5a3c[_0x5f7aa(0x163)](isNaN,_0x5428f6))&&(_0x1996e0&&_0x1996e0[_0x5f7aa(0x20c)]>0x0?_0x5428f6=_0x1996e0[_0x5f7aa(0x1af)]((_0x3a633a,_0x319112)=>{const _0x142e63=_0x5f7aa,_0x46aa3e=_0x1c5a3c[_0x142e63(0x1d3)](Number,_0x319112[_0x142e63(0x238)]||0x0);return _0x1c5a3c[_0x142e63(0x1d9)](_0x3a633a,_0x46aa3e);},0x0):_0x5428f6=_0x1c5a3c[_0x5f7aa(0x19f)](_0x1c5a3c['LqMCw'](Number,_0x3fd790[_0x5f7aa(0x23f)]),_0x5e3b05));}catch(_0x519e36){_0x5428f6=_0x1c5a3c[_0x5f7aa(0x19f)](_0x1c5a3c[_0x5f7aa(0x216)](Number,_0x3fd790[_0x5f7aa(0x23f)]),_0x5e3b05);}return _0x5428f6;},actualizarStockProducto=async(_0x13efb0,_0x33b759,_0x2c4774)=>{const _0xe3c57a=a0_0x1bec63,_0x56006c={'FIMfE':function(_0x5c4fd7,_0x1feab8){return _0x5c4fd7-_0x1feab8;},'cEESG':function(_0x1959ce,_0x4e3cb8){return _0x1959ce<_0x4e3cb8;}},_0xa5fca0=await Productos[_0xe3c57a(0x1ce)](_0x13efb0,{'transaction':_0x2c4774});if(!_0xa5fca0)throw new Error('Producto\x20con\x20ID\x20'+_0x13efb0+_0xe3c57a(0x260));const _0x362644=Number(_0xa5fca0[_0xe3c57a(0x194)]||0x0),_0x31994b=_0x56006c['FIMfE'](_0x362644,_0x33b759);if(_0x56006c['cEESG'](_0x31994b,0x0))throw new Error('Stock\x20insuficiente\x20para\x20el\x20producto\x20'+_0xa5fca0[_0xe3c57a(0x1b0)]+_0xe3c57a(0x23b)+_0x362644+_0xe3c57a(0x16f)+_0x33b759);return await _0xa5fca0[_0xe3c57a(0x141)]({'Stock':_0x31994b},{'transaction':_0x2c4774}),_0x31994b;},actualizarStockTallas=async(_0x34759b,_0x4fc9be,_0x1b01e2)=>{const _0x14dd76=a0_0x1bec63,_0x4a1331={'okDpm':function(_0x2e2e7d,_0x4728e5){return _0x2e2e7d(_0x4728e5);},'VOpxl':function(_0x3e0a26,_0x2e8e84){return _0x3e0a26-_0x2e8e84;},'xzymz':function(_0x35b544,_0x447f78){return _0x35b544<_0x447f78;}};for(const _0x297fc2 of _0x4fc9be){const _0x32636b=_0x297fc2['talla']||_0x297fc2[_0x14dd76(0x165)]||_0x297fc2[_0x14dd76(0x219)]||'';if(!_0x32636b)throw new Error(_0x14dd76(0x252)+_0x34759b);const _0x12cb8d=await Tallas['findOne']({'where':{'Nombre':_0x32636b},'transaction':_0x1b01e2});if(!_0x12cb8d)throw new Error(_0x14dd76(0x1b8)+_0x32636b+_0x14dd76(0x1cd));const _0x4bc156=await Producto_Tallas[_0x14dd76(0x14b)]({'where':{'Id_Productos':_0x34759b,'Id_Tallas':_0x12cb8d[_0x14dd76(0x1b9)]},'transaction':_0x1b01e2});if(!_0x4bc156)throw new Error('Talla\x20'+_0x32636b+_0x14dd76(0x1d0)+_0x34759b);const _0x36181a=_0x4a1331[_0x14dd76(0x1ec)](Number,_0x4bc156[_0x14dd76(0x194)]||0x0),_0x5baf73=Number(_0x297fc2[_0x14dd76(0x15a)]||_0x297fc2[_0x14dd76(0x1f5)]||0x0),_0x397bd4=_0x4a1331[_0x14dd76(0x213)](_0x36181a,_0x5baf73);if(_0x4a1331[_0x14dd76(0x1c8)](_0x397bd4,0x0))throw new Error(_0x14dd76(0x1e8)+_0x32636b+_0x14dd76(0x23b)+_0x36181a+_0x14dd76(0x16f)+_0x5baf73);await _0x4bc156[_0x14dd76(0x141)]({'Stock':_0x397bd4},{'transaction':_0x1b01e2});}},actualizarStockInsumos=async(_0x9633d4,_0x599ad3,_0x39ad5b)=>{const _0x22a713=a0_0x1bec63,_0x3ff660={'SGnPo':'Id_Insumos_Insumo','SCQIA':function(_0x2eca96,_0x1d0c45){return _0x2eca96(_0x1d0c45);},'XLAoe':function(_0x30e1a9,_0x1e264d){return _0x30e1a9*_0x1e264d;},'PEfUk':function(_0x3dcf8f,_0x55eaaa){return _0x3dcf8f(_0x55eaaa);},'tAuCx':function(_0x27dd2c,_0x209c0d){return _0x27dd2c-_0x209c0d;},'mclmE':function(_0x41805d,_0x2382e3){return _0x41805d<_0x2382e3;}};for(const _0x1753a9 of _0x599ad3){const _0x1434d3=_0x1753a9[_0x22a713(0x219)]||_0x1753a9[_0x22a713(0x1b0)]||'';if(!_0x1434d3)throw new Error(_0x22a713(0x231)+_0x9633d4);const _0x21f6d4=await Tamano[_0x22a713(0x14b)]({'where':{'Nombre':_0x1434d3},'transaction':_0x39ad5b});if(!_0x21f6d4)throw new Error(_0x22a713(0x21f)+_0x1434d3+_0x22a713(0x260));const _0x5796e7=await Producto_Tamano[_0x22a713(0x14b)]({'where':{'Id_Productos':_0x9633d4,'Id_Tamano':_0x21f6d4[_0x22a713(0x1a6)]},'transaction':_0x39ad5b});if(!_0x5796e7)throw new Error('El\x20producto\x20'+_0x9633d4+'\x20no\x20tiene\x20el\x20tamaño\x20'+_0x1753a9[_0x22a713(0x219)]+_0x22a713(0x1a0));const _0x128522=await Producto_Tamano_Insumos[_0x22a713(0x167)]({'where':{'Id_Producto_Tamano':_0x5796e7['Id_Producto_Tamano']},'include':[{'model':Insumos,'as':_0x3ff660[_0x22a713(0x1fa)]}],'transaction':_0x39ad5b}),_0x3ff730=Number(_0x1753a9['Cantidad']||_0x1753a9[_0x22a713(0x15a)]||0x0);for(const _0x21c994 of _0x128522){const _0x12a7b0=_0x21c994[_0x22a713(0x22e)],_0x12a286=_0x3ff660[_0x22a713(0x278)](Number,_0x21c994[_0x22a713(0x28a)]||0x0),_0x142354=_0x3ff660[_0x22a713(0x25a)](_0x12a286,_0x3ff730),_0x116851=_0x3ff660['PEfUk'](Number,_0x12a7b0[_0x22a713(0x194)]||0x0),_0x250131=_0x3ff660['tAuCx'](_0x116851,_0x142354);if(_0x3ff660[_0x22a713(0x1f3)](_0x250131,0x0))throw new Error('Stock\x20insuficiente\x20para\x20insumo\x20'+_0x12a7b0[_0x22a713(0x1b0)]+_0x22a713(0x23b)+_0x116851+',\x20Necesario:\x20'+_0x142354+'\x20('+_0x12a286+'\x20x\x20'+_0x3ff730+')');await _0x12a7b0[_0x22a713(0x141)]({'Stock':_0x250131},{'transaction':_0x39ad5b});}}};exports[a0_0x1bec63(0x26b)]=async(_0x567034,_0x1e82fa)=>{const _0x5c92ed=a0_0x1bec63,_0x54bdb3={'TAKbZ':function(_0x30ef5e,_0x49befb){return _0x30ef5e>_0x49befb;},'nbxcr':function(_0xdebc2d,_0x22bdb3){return _0xdebc2d(_0x22bdb3);},'lexWe':function(_0x267784,_0x292908){return _0x267784===_0x292908;},'HyBjk':_0x5c92ed(0x1df),'nBmoq':_0x5c92ed(0x210),'xpiBs':_0x5c92ed(0x21b),'quhgk':_0x5c92ed(0x1fc),'Glanw':_0x5c92ed(0x143),'IQkch':_0x5c92ed(0x152),'PNohs':_0x5c92ed(0x22f),'YVfvW':_0x5c92ed(0x1b4),'myYxn':_0x5c92ed(0x1b0),'tIEwP':'success','oWSeI':'Error\x20al\x20listar\x20ventas:','xCVKQ':'error','ptMTQ':function(_0x170e3e,_0x6f0a2a){return _0x170e3e===_0x6f0a2a;},'lPMup':'Error\x20al\x20obtener\x20ventas'};try{const _0xe991f1=await Ventas[_0x5c92ed(0x167)]({'include':[{'model':Detalle_Venta,'as':_0x54bdb3[_0x5c92ed(0x1a5)],'include':[{'model':Productos,'as':_0x5c92ed(0x235)},{'model':Producto_Tallas,'as':_0x54bdb3[_0x5c92ed(0x207)]},{'model':Producto_Tamano_Insumos,'as':_0x54bdb3[_0x5c92ed(0x1a1)]},{'model':Servicios,'as':_0x54bdb3[_0x5c92ed(0x19c)]}]},{'model':Agendamientos,'as':_0x54bdb3['IQkch'],'required':![]},{'model':Empleados,'as':_0x54bdb3['PNohs'],'attributes':[_0x54bdb3[_0x5c92ed(0x16d)],_0x54bdb3[_0x5c92ed(0x27d)]]}]}),_0x463d42=_0xe991f1['map'](_0x5230a0=>{const _0x16dbcf=_0x5c92ed,_0x5b44e2={'zGjjB':function(_0x129b26,_0x4cfbdd){const _0x4e6261=a0_0x31ec;return _0x54bdb3[_0x4e6261(0x148)](_0x129b26,_0x4cfbdd);}},_0x1fa6f1=_0x5230a0[_0x16dbcf(0x1d5)](),_0x58b033=_0x1fa6f1[_0x16dbcf(0x210)]||[],_0x34ef95=_0x1fa6f1[_0x16dbcf(0x152)]||null,_0xc36569=_0x1fa6f1[_0x16dbcf(0x22f)]||{},_0x5c3737=_0x58b033[_0x16dbcf(0x1e7)](_0x420170=>{const _0x243a38=_0x16dbcf,_0x41c734={..._0x420170};if(_0x420170[_0x243a38(0x13b)])try{_0x41c734[_0x243a38(0x1f1)]=JSON['parse'](_0x420170[_0x243a38(0x13b)]);}catch(_0x4000f5){_0x41c734[_0x243a38(0x1f1)]=[];}else _0x41c734[_0x243a38(0x1f1)]=[];if(_0x420170[_0x243a38(0x174)])try{_0x41c734['Tamanos']=JSON[_0x243a38(0x253)](_0x420170[_0x243a38(0x174)]);}catch(_0x21a3ec){_0x41c734[_0x243a38(0x1b7)]=[];}else _0x41c734[_0x243a38(0x1b7)]=[];return _0x41c734[_0x243a38(0x240)]=_0x41c734[_0x243a38(0x1f1)]&&_0x5b44e2[_0x243a38(0x1be)](_0x41c734[_0x243a38(0x1f1)][_0x243a38(0x20c)],0x0),_0x41c734[_0x243a38(0x286)]=_0x41c734[_0x243a38(0x1b7)]&&_0x41c734[_0x243a38(0x1b7)][_0x243a38(0x20c)]>0x0,_0x41c734['tieneTallas']&&(_0x41c734['descripcionTallas']=_0x41c734['Tallas'][_0x243a38(0x1e7)](_0x409be9=>(_0x409be9[_0x243a38(0x15a)]||_0x409be9['Cantidad']||0x0)+_0x243a38(0x1db)+(_0x409be9[_0x243a38(0x18e)]||_0x409be9[_0x243a38(0x165)]||_0x409be9[_0x243a38(0x219)]||_0x243a38(0x1ab)))[_0x243a38(0x175)](',\x20')),_0x41c734[_0x243a38(0x286)]&&(_0x41c734['descripcionTamanos']=_0x41c734[_0x243a38(0x1b7)][_0x243a38(0x1e7)](_0x10d93f=>_0x10d93f['Cantidad']+'\x20x\x20'+_0x10d93f[_0x243a38(0x219)])[_0x243a38(0x175)](',\x20')),_0x41c734;}),_0x3d32bf=_0x5c3737[_0x16dbcf(0x1af)]((_0xdfb568,_0x132be6)=>_0xdfb568+Number(_0x132be6['Subtotal']||0x0),0x0),_0x38082b=_0x34ef95?_0x54bdb3['nbxcr'](Number,_0x34ef95[_0x16dbcf(0x189)]||0x0):0x0,_0x589fb0=_0x3d32bf+_0x38082b,_0x2721bc=_0x54bdb3[_0x16dbcf(0x1e9)](Number(_0x1fa6f1[_0x16dbcf(0x1eb)]),_0x589fb0);return{'Id_Ventas':_0x1fa6f1[_0x16dbcf(0x164)],'Id_Agendamientos':_0x1fa6f1[_0x16dbcf(0x246)],'Id_Cliente':_0x1fa6f1['Id_Cliente'],'Id_Empleados':_0x1fa6f1[_0x16dbcf(0x1b4)],'Nombre_Empleado':_0xc36569?.[_0x16dbcf(0x1b0)]||_0x54bdb3[_0x16dbcf(0x160)],'Fecha':_0x1fa6f1['Fecha'],'Total':_0x1fa6f1[_0x16dbcf(0x1eb)],'Estado':_0x1fa6f1[_0x16dbcf(0x1e6)],'M_Pago':_0x1fa6f1[_0x16dbcf(0x14a)],'Referencia':_0x1fa6f1['Referencia'],'Detalle_Venta':_0x5c3737,'tieneAgendamiento':!!_0x1fa6f1[_0x16dbcf(0x246)],'Agendamiento':_0x34ef95,'totalValidado':_0x2721bc};});_0x1e82fa['json']({'status':_0x54bdb3[_0x5c92ed(0x192)],'data':_0x463d42});}catch(_0x23f354){console[_0x5c92ed(0x1c7)](_0x54bdb3[_0x5c92ed(0x158)],_0x23f354),_0x1e82fa[_0x5c92ed(0x1a3)](0x1f4)[_0x5c92ed(0x23d)]({'status':_0x54bdb3[_0x5c92ed(0x1d8)],'message':_0x54bdb3[_0x5c92ed(0x264)](process[_0x5c92ed(0x1f7)][_0x5c92ed(0x21d)],'development')?_0x5c92ed(0x17c)+_0x23f354[_0x5c92ed(0x225)]:_0x54bdb3[_0x5c92ed(0x22c)]});}},exports[a0_0x1bec63(0x1c0)]=async(_0x396760,_0x5f21d3)=>{const _0x353b1d=a0_0x1bec63,_0x54a3a9={'jubzq':function(_0x5b1bb8,_0x30bdc7){return _0x5b1bb8>_0x30bdc7;},'GtLzI':_0x353b1d(0x210),'sCmiN':'Id_Productos_Producto','vhiMC':'Id_Producto_Tallas_Producto_Talla','itTAi':_0x353b1d(0x1fc),'TmVyZ':'Servicio','Bmjsk':'Id_Agendamientos_Agendamiento','itucb':_0x353b1d(0x22f),'jNEYT':_0x353b1d(0x1c7),'pWBqz':'Venta\x20no\x20encontrada','Ljfnr':function(_0x3a2393,_0x31fbdd){return _0x3a2393(_0x31fbdd);},'XGcPX':function(_0x1e0746,_0x184177){return _0x1e0746+_0x184177;},'VbpDj':function(_0x591b6f,_0x43eb14){return _0x591b6f===_0x43eb14;},'kvnon':function(_0x26ae58,_0x5d76dc){return _0x26ae58(_0x5d76dc);},'BHwjB':'success','TmETJ':'Desconocido','mVPiM':'Error\x20al\x20obtener\x20venta\x20por\x20ID:','hAeHy':'Error\x20al\x20obtener\x20venta'};try{const {id:_0x693c17}=_0x396760[_0x353b1d(0x27c)],_0x26f66d=await Ventas['findByPk'](_0x693c17,{'include':[{'model':Detalle_Venta,'as':_0x54a3a9[_0x353b1d(0x159)],'include':[{'model':Productos,'as':_0x54a3a9[_0x353b1d(0x1ff)]},{'model':Producto_Tallas,'as':_0x54a3a9['vhiMC']},{'model':Producto_Tamano_Insumos,'as':_0x54a3a9[_0x353b1d(0x21a)]},{'model':Servicios,'as':_0x54a3a9['TmVyZ']}]},{'model':Agendamientos,'as':_0x54a3a9[_0x353b1d(0x1fd)],'required':![]},{'model':Empleados,'as':_0x54a3a9[_0x353b1d(0x1f0)],'attributes':[_0x353b1d(0x1b0)]}]});if(!_0x26f66d)return _0x5f21d3[_0x353b1d(0x1a3)](0x194)['json']({'status':_0x54a3a9['jNEYT'],'message':_0x54a3a9['pWBqz']});const _0x4f4f5d=_0x26f66d[_0x353b1d(0x1d5)](),_0x5c390b=_0x4f4f5d[_0x353b1d(0x210)]||[],_0x582c71=_0x4f4f5d[_0x353b1d(0x152)]||null,_0x19a0d4=_0x4f4f5d[_0x353b1d(0x22f)]||{},_0x2260c0=_0x5c390b[_0x353b1d(0x1e7)](_0x12df86=>{const _0x36a275=_0x353b1d,_0x4acc98={..._0x12df86};if(_0x12df86[_0x36a275(0x13b)])try{_0x4acc98[_0x36a275(0x1f1)]=JSON[_0x36a275(0x253)](_0x12df86[_0x36a275(0x13b)]);}catch(_0x554859){_0x4acc98['Tallas']=[];}else _0x4acc98[_0x36a275(0x1f1)]=[];if(_0x12df86['Tamanos_Data'])try{_0x4acc98[_0x36a275(0x1b7)]=JSON[_0x36a275(0x253)](_0x12df86[_0x36a275(0x174)]);}catch(_0x5d0bad){_0x4acc98[_0x36a275(0x1b7)]=[];}else _0x4acc98[_0x36a275(0x1b7)]=[];return _0x4acc98[_0x36a275(0x240)]=_0x4acc98['Tallas']&&_0x54a3a9[_0x36a275(0x27f)](_0x4acc98['Tallas'][_0x36a275(0x20c)],0x0),_0x4acc98['tieneTamanos']=_0x4acc98[_0x36a275(0x1b7)]&&_0x4acc98['Tamanos']['length']>0x0,_0x4acc98[_0x36a275(0x240)]&&(_0x4acc98[_0x36a275(0x1d1)]=_0x4acc98[_0x36a275(0x1f1)][_0x36a275(0x1e7)](_0x2ffd97=>(_0x2ffd97[_0x36a275(0x15a)]||_0x2ffd97[_0x36a275(0x1f5)]||0x0)+'\x20x\x20Talla\x20'+(_0x2ffd97['talla']||_0x2ffd97[_0x36a275(0x165)]||_0x2ffd97[_0x36a275(0x219)]||'N/A'))[_0x36a275(0x175)](',\x20')),_0x4acc98[_0x36a275(0x286)]&&(_0x4acc98[_0x36a275(0x241)]=_0x4acc98[_0x36a275(0x1b7)]['map'](_0xe7bc56=>_0xe7bc56[_0x36a275(0x1f5)]+_0x36a275(0x197)+_0xe7bc56[_0x36a275(0x219)])['join'](',\x20')),_0x4acc98;}),_0x2f2c0f=_0x2260c0['reduce']((_0x509a9c,_0x228851)=>_0x509a9c+Number(_0x228851[_0x353b1d(0x189)]||0x0),0x0),_0x49077c=_0x582c71?_0x54a3a9[_0x353b1d(0x288)](Number,_0x582c71[_0x353b1d(0x189)]||0x0):0x0,_0x1b84f3=_0x54a3a9['XGcPX'](_0x2f2c0f,_0x49077c),_0xcc4fed=_0x54a3a9[_0x353b1d(0x205)](_0x54a3a9[_0x353b1d(0x1cc)](Number,_0x4f4f5d[_0x353b1d(0x1eb)]),_0x1b84f3);_0x5f21d3[_0x353b1d(0x23d)]({'status':_0x54a3a9['BHwjB'],'data':{'Id_Ventas':_0x4f4f5d[_0x353b1d(0x164)],'Id_Agendamientos':_0x4f4f5d['Id_Agendamientos'],'Id_Cliente':_0x4f4f5d[_0x353b1d(0x1e2)],'Id_Empleados':_0x4f4f5d[_0x353b1d(0x1b4)],'Nombre_Empleado':_0x19a0d4?.['Nombre']||_0x54a3a9[_0x353b1d(0x149)],'Fecha':_0x4f4f5d[_0x353b1d(0x182)],'Total':_0x4f4f5d[_0x353b1d(0x1eb)],'M_Pago':_0x4f4f5d['M_Pago'],'Referencia':_0x4f4f5d['Referencia'],'Estado':_0x4f4f5d[_0x353b1d(0x1e6)],'Detalle_Venta':_0x2260c0,'tieneAgendamiento':!!_0x4f4f5d[_0x353b1d(0x246)],'Agendamiento':_0x582c71,'totalValidado':_0xcc4fed}});}catch(_0x54b1be){console[_0x353b1d(0x1c7)](_0x54a3a9[_0x353b1d(0x224)],_0x54b1be),_0x5f21d3[_0x353b1d(0x1a3)](0x1f4)[_0x353b1d(0x23d)]({'status':_0x353b1d(0x1c7),'message':_0x54a3a9[_0x353b1d(0x18f)]});}},exports[a0_0x1bec63(0x183)]=async(_0x4be8ea,_0x3ce547)=>{const _0x3121da=a0_0x1bec63,_0x1a8b30={'QfTek':function(_0x11713c,_0x585e84){return _0x11713c===_0x585e84;},'zQmzm':'string','qvXkj':function(_0x47ac98,_0xc50770){return _0x47ac98||_0xc50770;},'PrcYW':function(_0x17a8ed,_0x428098){return _0x17a8ed===_0x428098;},'LRbaa':'error','Xeccu':_0x3121da(0x1de),'rzMgV':function(_0x27fde8,_0x58b231,_0x2bc673){return _0x27fde8(_0x58b231,_0x2bc673);},'ffKLP':function(_0x57167e,_0x329810,_0x245631){return _0x57167e(_0x329810,_0x245631);},'wMmbF':_0x3121da(0x24e),'zjTRh':'Nombre','WVgeX':'Precio_Venta','PoTFu':function(_0x55b015,_0x4d93f9){return _0x55b015===_0x4d93f9;},'dZzNg':function(_0x1738a8,_0x4ce853){return _0x1738a8>_0x4ce853;},'LNCZt':function(_0x25176d,_0x1e5d17){return _0x25176d(_0x1e5d17);},'kKyLs':function(_0x2618c7,_0x51996d){return _0x2618c7*_0x51996d;},'VYqfV':function(_0x16b362,_0x3e79f0){return _0x16b362<_0x3e79f0;},'oPQEe':function(_0x53aa4a,_0x5d18bc){return _0x53aa4a>_0x5d18bc;},'VPTMt':function(_0x12f037,_0x1cf66f){return _0x12f037(_0x1cf66f);},'DkFAU':_0x3121da(0x271),'GqspI':_0x3121da(0x1b9),'IbIXX':function(_0x3b8ab8,_0x5da001){return _0x3b8ab8(_0x5da001);},'RwaqV':function(_0x50eff5,_0x3b2e7b,_0x334e60,_0x4bb272,_0xce5e9b,_0x440db4){return _0x50eff5(_0x3b2e7b,_0x334e60,_0x4bb272,_0xce5e9b,_0x440db4);},'qACQO':function(_0x4c704d,_0x375abb){return _0x4c704d+_0x375abb;},'QuWbX':function(_0x37d707,_0x10cb06){return _0x37d707===_0x10cb06;},'PtEyz':function(_0x4b7c3b,_0x26e567){return _0x4b7c3b>_0x26e567;},'oRwZg':function(_0x1e9a7c,_0x19644b){return _0x1e9a7c>_0x19644b;},'lhvDE':function(_0x47549f,_0x5dbc23){return _0x47549f>_0x5dbc23;},'Brsdy':function(_0x4e7d19,_0x460102){return _0x4e7d19>_0x460102;},'LVbav':function(_0x8f80c5,_0x4efe39,_0xbc3204,_0x4498e2){return _0x8f80c5(_0x4efe39,_0xbc3204,_0x4498e2);},'pLlIN':function(_0x269bfc,_0x1efc1a){return _0x269bfc>_0x1efc1a;},'WdtDc':function(_0x3b40e7,_0xe85cb7,_0x122bf3,_0x153cf1){return _0x3b40e7(_0xe85cb7,_0x122bf3,_0x153cf1);},'cYqTl':function(_0x49a81d,_0x529d6b,_0x157605,_0x5707a0){return _0x49a81d(_0x529d6b,_0x157605,_0x5707a0);},'TPWAf':_0x3121da(0x21c),'fuLpB':_0x3121da(0x250),'tDxzA':function(_0x228431,_0x20361a){return _0x228431 instanceof _0x20361a;},'mGeAE':_0x3121da(0x251),'keOic':_0x3121da(0x1e1),'gFHel':'no\x20encontrado','adNiU':_0x3121da(0x200),'NoMKS':_0x3121da(0x144),'sofGQ':'Error\x20al\x20crear\x20venta:','fdrUK':function(_0xcb19c3,_0x4cd85c){return _0xcb19c3 instanceof _0x4cd85c;},'bDYlY':'Error\x20de\x20validación','slQxA':_0x3121da(0x217)},_0x32cf8f=await sequelize[_0x3121da(0x1f2)]();try{const {Id_Agendamientos:_0x3d5e71,Id_Cliente:_0x2ff4e1,Id_Empleados:_0x2f53f3,Fecha:_0x507ed4,M_Pago:_0x278630,Referencia:_0x20e8e9,Estado:Estado=0x3,Detalle_Venta:_0x5a99fa=[]}=_0x4be8ea['body'];if(_0x1a8b30[_0x3121da(0x226)](!_0x2ff4e1,!_0x2f53f3)||!_0x507ed4||!_0x278630||_0x1a8b30[_0x3121da(0x24c)](_0x5a99fa[_0x3121da(0x20c)],0x0))return await _0x32cf8f[_0x3121da(0x153)](),_0x3ce547[_0x3121da(0x1a3)](0x190)[_0x3121da(0x23d)]({'status':_0x1a8b30[_0x3121da(0x276)],'message':_0x1a8b30['Xeccu'],'required':{'Id_Cliente':_0x2ff4e1,'Id_Empleados':_0x2f53f3,'Fecha':_0x507ed4,'M_Pago':_0x278630,'Detalles':_0x5a99fa[_0x3121da(0x20c)]}});await _0x1a8b30[_0x3121da(0x262)](validarCliente,_0x2ff4e1,_0x32cf8f),await _0x1a8b30[_0x3121da(0x15e)](validarEmpleado,_0x2f53f3,_0x32cf8f),_0x1a8b30[_0x3121da(0x15e)](validarMetodoPago,_0x278630,_0x20e8e9);let _0x1a6b2e=0x0;if(_0x3d5e71){const _0x20f30f=await Agendamientos['findByPk'](_0x3d5e71,{'transaction':_0x32cf8f});if(!_0x20f30f)return await _0x32cf8f[_0x3121da(0x153)](),_0x3ce547[_0x3121da(0x1a3)](0x190)[_0x3121da(0x23d)]({'status':_0x3121da(0x1c7),'message':_0x1a8b30[_0x3121da(0x13f)]});_0x1a6b2e=Number(_0x20f30f[_0x3121da(0x189)]||0x0);}let _0x2436fd=0x0;const _0xda1a=[];for(const _0x4cba57 of _0x5a99fa){const _0x55df13=await Productos['findByPk'](_0x4cba57[_0x3121da(0x26e)],{'transaction':_0x32cf8f,'attributes':['Id_Productos',_0x1a8b30[_0x3121da(0x15b)],_0x1a8b30[_0x3121da(0x289)]]});if(!_0x55df13)return await _0x32cf8f[_0x3121da(0x153)](),_0x3ce547[_0x3121da(0x1a3)](0x190)[_0x3121da(0x23d)]({'status':_0x1a8b30[_0x3121da(0x276)],'message':_0x3121da(0x140)+_0x4cba57['Id_Productos']+_0x3121da(0x260)});let _0x3f98ad=_0x4cba57['Tallas']||[],_0x21832e=_0x4cba57[_0x3121da(0x1b7)]||[];if(_0x4cba57[_0x3121da(0x174)]&&_0x1a8b30[_0x3121da(0x24c)](typeof _0x4cba57[_0x3121da(0x174)],_0x1a8b30[_0x3121da(0x196)]))try{_0x21832e=JSON[_0x3121da(0x253)](_0x4cba57[_0x3121da(0x174)]);}catch(_0xb4b427){_0x21832e=[];}else _0x4cba57['Tamanos_Data']&&Array[_0x3121da(0x27a)](_0x4cba57[_0x3121da(0x174)])&&(_0x21832e=_0x4cba57['Tamanos_Data']);if(_0x4cba57[_0x3121da(0x13b)]&&_0x1a8b30[_0x3121da(0x188)](typeof _0x4cba57[_0x3121da(0x13b)],_0x1a8b30['zQmzm']))try{_0x3f98ad=JSON[_0x3121da(0x253)](_0x4cba57[_0x3121da(0x13b)]);}catch(_0x349d55){_0x3f98ad=[];}else _0x4cba57[_0x3121da(0x13b)]&&Array[_0x3121da(0x27a)](_0x4cba57[_0x3121da(0x13b)])&&(_0x3f98ad=_0x4cba57['Tallas_Data']);try{if(_0x21832e&&_0x1a8b30[_0x3121da(0x223)](_0x21832e['length'],0x0))for(const _0x339c2e of _0x21832e){const _0x10ef13=_0x339c2e[_0x3121da(0x219)]||_0x339c2e[_0x3121da(0x1b0)]||'';if(!_0x10ef13)return await _0x32cf8f[_0x3121da(0x153)](),_0x3ce547[_0x3121da(0x1a3)](0x190)['json']({'status':_0x1a8b30[_0x3121da(0x276)],'message':_0x3121da(0x231)+_0x55df13['Nombre']});const _0x3e6e8c=await Tamano['findOne']({'where':{'Nombre':_0x10ef13},'transaction':_0x32cf8f});if(!_0x3e6e8c)return await _0x32cf8f[_0x3121da(0x153)](),_0x3ce547[_0x3121da(0x1a3)](0x190)[_0x3121da(0x23d)]({'status':'error','message':_0x3121da(0x21f)+_0x10ef13+'\x20no\x20encontrado'});const _0x483128=await Producto_Tamano[_0x3121da(0x14b)]({'where':{'Id_Productos':_0x4cba57[_0x3121da(0x26e)],'Id_Tamano':_0x3e6e8c[_0x3121da(0x1a6)]},'transaction':_0x32cf8f});if(!_0x483128)return await _0x32cf8f[_0x3121da(0x153)](),_0x3ce547[_0x3121da(0x1a3)](0x190)[_0x3121da(0x23d)]({'status':'error','message':_0x3121da(0x19d)+_0x55df13[_0x3121da(0x1b0)]+_0x3121da(0x177)+_0x10ef13+_0x3121da(0x1a0)});const _0x32a11d=await Producto_Tamano_Insumos[_0x3121da(0x167)]({'where':{'Id_Producto_Tamano':_0x483128['Id_Producto_Tamano']},'include':[{'model':Insumos,'as':_0x3121da(0x22e)}],'transaction':_0x32cf8f}),_0x1dccbb=_0x1a8b30[_0x3121da(0x1d4)](Number,_0x339c2e[_0x3121da(0x1f5)]||_0x339c2e['cantidad']||0x0);for(const _0x540f9a of _0x32a11d){const _0x5acef8=_0x540f9a['Id_Insumos_Insumo'],_0xb8cc41=_0x1a8b30[_0x3121da(0x1d4)](Number,_0x540f9a['Cantidad_Consumo']||0x0),_0x20545d=_0x1a8b30[_0x3121da(0x195)](_0xb8cc41,_0x1dccbb),_0x93c6da=_0x1a8b30[_0x3121da(0x1d4)](Number,_0x5acef8[_0x3121da(0x194)]||0x0);if(_0x1a8b30['VYqfV'](_0x93c6da,_0x20545d))return await _0x32cf8f['rollback'](),_0x3ce547[_0x3121da(0x1a3)](0x190)[_0x3121da(0x23d)]({'status':_0x1a8b30[_0x3121da(0x276)],'message':_0x3121da(0x254)+_0x5acef8['Nombre']+_0x3121da(0x23b)+_0x93c6da+_0x3121da(0x1bf)+_0x20545d});}}else{if(_0x3f98ad&&_0x1a8b30[_0x3121da(0x162)](_0x3f98ad['length'],0x0))for(const _0x461bc2 of _0x3f98ad){const _0x2c3bf3=_0x461bc2['talla']||_0x461bc2[_0x3121da(0x165)]||_0x461bc2[_0x3121da(0x219)]||'',_0x6bee89=_0x1a8b30[_0x3121da(0x1d4)](Number,_0x461bc2[_0x3121da(0x15a)]||_0x461bc2[_0x3121da(0x1f5)]||0x0);if(!_0x2c3bf3)return await _0x32cf8f['rollback'](),_0x3ce547[_0x3121da(0x1a3)](0x190)[_0x3121da(0x23d)]({'status':_0x1a8b30[_0x3121da(0x276)],'message':'Nombre\x20de\x20talla\x20no\x20válido\x20para\x20el\x20producto\x20'+_0x55df13[_0x3121da(0x1b0)]});const _0x3843ae=await Tallas[_0x3121da(0x14b)]({'where':{'Nombre':_0x2c3bf3},'transaction':_0x32cf8f});if(!_0x3843ae)return await _0x32cf8f[_0x3121da(0x153)](),_0x3ce547['status'](0x190)['json']({'status':_0x1a8b30[_0x3121da(0x276)],'message':'Talla\x20'+_0x2c3bf3+_0x3121da(0x1cd)});const _0x499b9c=await Producto_Tallas['findOne']({'where':{'Id_Productos':_0x4cba57['Id_Productos'],'Id_Tallas':_0x3843ae[_0x3121da(0x1b9)]},'transaction':_0x32cf8f});if(!_0x499b9c)return await _0x32cf8f[_0x3121da(0x153)](),_0x3ce547[_0x3121da(0x1a3)](0x190)['json']({'status':_0x3121da(0x1c7),'message':'Talla\x20'+_0x2c3bf3+_0x3121da(0x1d0)+_0x55df13[_0x3121da(0x1b0)]});const _0x1040ee=_0x1a8b30['VPTMt'](Number,_0x499b9c[_0x3121da(0x194)]||0x0);if(_0x1a8b30[_0x3121da(0x1ca)](_0x1040ee,_0x6bee89))return await _0x32cf8f['rollback'](),_0x3ce547[_0x3121da(0x1a3)](0x190)[_0x3121da(0x23d)]({'status':_0x1a8b30['LRbaa'],'message':_0x3121da(0x1e8)+_0x2c3bf3+_0x3121da(0x229)+_0x55df13[_0x3121da(0x1b0)]+_0x3121da(0x23b)+_0x1040ee+',\x20Solicitado:\x20'+_0x6bee89});}else{const _0x11ce7d=await Producto_Tallas[_0x3121da(0x167)]({'where':{'Id_Productos':_0x4cba57[_0x3121da(0x26e)]},'include':[{'model':Tallas,'as':_0x1a8b30['DkFAU'],'attributes':[_0x1a8b30[_0x3121da(0x20d)],_0x1a8b30[_0x3121da(0x15b)]]}],'transaction':_0x32cf8f});if(_0x11ce7d&&_0x11ce7d[_0x3121da(0x20c)]>0x0)return await _0x32cf8f[_0x3121da(0x153)](),_0x3ce547[_0x3121da(0x1a3)](0x190)[_0x3121da(0x23d)]({'status':_0x1a8b30[_0x3121da(0x276)],'message':_0x3121da(0x19d)+_0x55df13[_0x3121da(0x1b0)]+'\x20requiere\x20especificar\x20tallas.\x20Tallas\x20disponibles:\x20'+_0x11ce7d['map'](_0x140b10=>_0x140b10['Id_Tallas_Talla']?.['Nombre']||_0x3121da(0x1ab))[_0x3121da(0x175)](',\x20')});const _0x5c7787=_0x1a8b30[_0x3121da(0x203)](Number,_0x55df13['Stock']||0x0),_0x1fef94=_0x1a8b30[_0x3121da(0x1bc)](Number,_0x4cba57['Cantidad']||0x0);if(_0x1a8b30[_0x3121da(0x1ca)](_0x5c7787,_0x1fef94))return await _0x32cf8f[_0x3121da(0x153)](),_0x3ce547[_0x3121da(0x1a3)](0x190)[_0x3121da(0x23d)]({'status':'error','message':_0x3121da(0x25b)+_0x55df13[_0x3121da(0x1b0)]+_0x3121da(0x23b)+_0x5c7787+',\x20Solicitado:\x20'+_0x1fef94});}}}catch(_0x101b18){return await _0x32cf8f['rollback'](),_0x3ce547['status'](0x190)['json']({'status':_0x1a8b30[_0x3121da(0x276)],'message':'Error\x20al\x20validar\x20stock:\x20'+_0x101b18[_0x3121da(0x225)]});}if(_0x4cba57[_0x3121da(0x174)]&&_0x1a8b30[_0x3121da(0x188)](typeof _0x4cba57[_0x3121da(0x174)],_0x1a8b30[_0x3121da(0x196)]))try{_0x21832e=JSON['parse'](_0x4cba57[_0x3121da(0x174)]);}catch(_0x32046e){_0x21832e=[];}else _0x4cba57[_0x3121da(0x174)]&&Array[_0x3121da(0x27a)](_0x4cba57[_0x3121da(0x174)])&&(_0x21832e=_0x4cba57[_0x3121da(0x174)]);if(_0x4cba57[_0x3121da(0x13b)]&&typeof _0x4cba57[_0x3121da(0x13b)]===_0x1a8b30[_0x3121da(0x196)])try{_0x3f98ad=JSON[_0x3121da(0x253)](_0x4cba57[_0x3121da(0x13b)]);}catch(_0x38fd33){_0x3f98ad=[];}else _0x4cba57[_0x3121da(0x13b)]&&Array['isArray'](_0x4cba57[_0x3121da(0x13b)])&&(_0x3f98ad=_0x4cba57['Tallas_Data']);_0x3f98ad&&_0x1a8b30[_0x3121da(0x223)](_0x3f98ad[_0x3121da(0x20c)],0x0)&&(_0x3f98ad=_0x3f98ad['map'](_0x496ef8=>{const _0x1d4749=_0x3121da;if(_0x1a8b30['QfTek'](typeof _0x496ef8,_0x1a8b30[_0x1d4749(0x196)]))return{'talla':_0x496ef8,'cantidad':0x1,'precio':0x0};return{'talla':_0x496ef8[_0x1d4749(0x18e)]||_0x496ef8[_0x1d4749(0x165)]||_0x496ef8['nombre']||'','cantidad':_0x496ef8[_0x1d4749(0x15a)]||_0x496ef8['Cantidad']||0x1,'precio':_0x496ef8[_0x1d4749(0x284)]||_0x496ef8[_0x1d4749(0x22d)]||0x0,'Id_Producto_Tallas':_0x496ef8[_0x1d4749(0x151)]||null};})[_0x3121da(0x1dc)](_0xf3656c=>_0xf3656c[_0x3121da(0x18e)]&&_0xf3656c[_0x3121da(0x18e)][_0x3121da(0x233)]()!==''));const _0x2e4e0d=await _0x1a8b30[_0x3121da(0x255)](calcularPrecio,_0x55df13,_0x3f98ad,_0x21832e,_0x4cba57[_0x3121da(0x1f5)],_0x32cf8f),_0x42d9a9=_0x2e4e0d;_0xda1a[_0x3121da(0x150)]({..._0x4cba57,'Precio':_0x2e4e0d,'Subtotal':_0x42d9a9,'Tallas':_0x3f98ad,'Tamanos':_0x21832e,'Tallas_Original':_0x4cba57[_0x3121da(0x1f1)]||[],'Tamanos_Original':_0x4cba57['Tamanos']||[],'Tallas_Data_Original':_0x4cba57['Tallas_Data'],'Tamanos_Data_Original':_0x4cba57[_0x3121da(0x174)]}),_0x2436fd+=_0x42d9a9;}const _0x88b382=_0x1a8b30[_0x3121da(0x1d6)](_0x2436fd,_0x1a6b2e),_0x9da083=await Ventas[_0x3121da(0x145)]({'Id_Agendamientos':_0x1a8b30[_0x3121da(0x226)](_0x3d5e71,null),'Id_Cliente':_0x2ff4e1,'Id_Empleados':_0x2f53f3,'Fecha':_0x507ed4,'Total':_0x88b382,'Estado':Estado,'M_Pago':_0x278630,'Referencia':_0x1a8b30['qvXkj'](_0x20e8e9,null)},{'transaction':_0x32cf8f});for(const _0x3f46a0 of _0xda1a){let _0x4f951c=[],_0x3c52b1=[];if(_0x3f46a0[_0x3121da(0x172)]&&_0x1a8b30[_0x3121da(0x24c)](typeof _0x3f46a0[_0x3121da(0x172)],_0x1a8b30['zQmzm']))try{_0x4f951c=JSON[_0x3121da(0x253)](_0x3f46a0['Tallas_Data_Original']);}catch(_0x1392e5){_0x4f951c=_0x3f46a0[_0x3121da(0x190)]||[];}else _0x3f46a0[_0x3121da(0x190)]&&_0x3f46a0['Tallas_Original'][_0x3121da(0x20c)]>0x0?_0x4f951c=_0x3f46a0[_0x3121da(0x190)]:_0x4f951c=_0x3f46a0['Tallas']||[];if(_0x3f46a0[_0x3121da(0x1a9)]&&_0x1a8b30[_0x3121da(0x202)](typeof _0x3f46a0['Tamanos_Data_Original'],_0x1a8b30[_0x3121da(0x196)]))try{_0x3c52b1=JSON[_0x3121da(0x253)](_0x3f46a0['Tamanos_Data_Original']);}catch(_0x1ec782){_0x3c52b1=_0x3f46a0[_0x3121da(0x1ea)]||[];}else _0x3f46a0[_0x3121da(0x1ea)]&&_0x1a8b30['PtEyz'](_0x3f46a0['Tamanos_Original'][_0x3121da(0x20c)],0x0)?_0x3c52b1=_0x3f46a0[_0x3121da(0x1ea)]:_0x3c52b1=_0x3f46a0['Tamanos']||[];_0x3c52b1&&_0x1a8b30[_0x3121da(0x1ac)](_0x3c52b1[_0x3121da(0x20c)],0x0)&&(_0x3c52b1=_0x3c52b1[_0x3121da(0x1e7)](_0x14c7af=>({..._0x14c7af,'PrecioTotal':Number(_0x14c7af['PrecioTotal']||0x0)})));_0x4f951c&&_0x1a8b30[_0x3121da(0x223)](_0x4f951c['length'],0x0)&&(_0x4f951c=_0x4f951c[_0x3121da(0x1e7)](_0x323057=>{const _0x313fec=_0x3121da,_0x56e034={..._0x323057,'talla':_0x323057[_0x313fec(0x18e)]||_0x323057[_0x313fec(0x165)]||_0x323057[_0x313fec(0x219)]||'','cantidad':_0x323057[_0x313fec(0x15a)]||_0x323057[_0x313fec(0x1f5)]||0x0,'precio':_0x323057[_0x313fec(0x284)]||_0x323057[_0x313fec(0x22d)]||0x0,'descripcion':_0x323057[_0x313fec(0x242)]||(_0x323057[_0x313fec(0x15a)]||_0x323057['Cantidad']||0x0)+_0x313fec(0x1db)+(_0x323057[_0x313fec(0x18e)]||_0x323057[_0x313fec(0x165)]||_0x323057[_0x313fec(0x219)]||''),'detalleTalla':_0x323057[_0x313fec(0x1b6)]||_0x313fec(0x1b8)+(_0x323057[_0x313fec(0x18e)]||_0x323057[_0x313fec(0x165)]||_0x323057[_0x313fec(0x219)]||'')+':\x20'+(_0x323057['cantidad']||_0x323057[_0x313fec(0x1f5)]||0x0)+_0x313fec(0x193)};return delete _0x56e034['Cantidad'],delete _0x56e034[_0x313fec(0x165)],delete _0x56e034[_0x313fec(0x22d)],_0x56e034;})[_0x3121da(0x1dc)](_0x8493da=>_0x8493da[_0x3121da(0x18e)]&&_0x8493da[_0x3121da(0x18e)][_0x3121da(0x233)]()!==''));const _0x33393e=_0x4f951c&&_0x1a8b30[_0x3121da(0x22a)](_0x4f951c[_0x3121da(0x20c)],0x0)?JSON[_0x3121da(0x1f9)](_0x4f951c):null,_0x5a632c=_0x3c52b1&&_0x3c52b1[_0x3121da(0x20c)]>0x0?JSON[_0x3121da(0x1f9)](_0x3c52b1):null,_0x34e9ae={'Id_Ventas':_0x9da083['Id_Ventas'],'Id_Productos':_0x3f46a0[_0x3121da(0x26e)]||null,'Id_Servicios':_0x3f46a0[_0x3121da(0x18a)]||null,'Id_Producto_Tallas':_0x1a8b30[_0x3121da(0x24d)](_0x4f951c[_0x3121da(0x20c)],0x0)?_0x4f951c[0x0][_0x3121da(0x151)]:null,'Id_Producto_Tamano_Insumos':_0x3c52b1[_0x3121da(0x20c)]>0x0?_0x3c52b1[0x0][_0x3121da(0x181)]:null,'Cantidad':_0x3f46a0['Cantidad'],'Precio':_0x3f46a0[_0x3121da(0x22d)],'Subtotal':_0x3f46a0[_0x3121da(0x189)]};if(_0x33393e)_0x34e9ae[_0x3121da(0x13b)]=_0x33393e;if(_0x5a632c)_0x34e9ae[_0x3121da(0x174)]=_0x5a632c;const _0x2297d9=await Detalle_Venta[_0x3121da(0x145)](_0x34e9ae,{'transaction':_0x32cf8f});}for(const _0x361160 of _0xda1a){const _0x46395e=_0x361160['Tallas']||[],_0x22a5cc=_0x361160['Tamanos']||[];try{if(_0x22a5cc&&_0x1a8b30[_0x3121da(0x1ac)](_0x22a5cc[_0x3121da(0x20c)],0x0))await _0x1a8b30[_0x3121da(0x1b3)](actualizarStockInsumos,_0x361160[_0x3121da(0x26e)],_0x22a5cc,_0x32cf8f);else _0x46395e&&_0x1a8b30[_0x3121da(0x220)](_0x46395e[_0x3121da(0x20c)],0x0)?await _0x1a8b30[_0x3121da(0x218)](actualizarStockTallas,_0x361160[_0x3121da(0x26e)],_0x46395e,_0x32cf8f):await _0x1a8b30[_0x3121da(0x168)](actualizarStockProducto,_0x361160[_0x3121da(0x26e)],_0x361160['Cantidad'],_0x32cf8f);}catch(_0x123bba){return await _0x32cf8f[_0x3121da(0x153)](),_0x3ce547[_0x3121da(0x1a3)](0x190)[_0x3121da(0x23d)]({'status':_0x1a8b30[_0x3121da(0x276)],'message':_0x3121da(0x17f)+_0x123bba['message']});}}await _0x32cf8f[_0x3121da(0x154)](),_0x3ce547[_0x3121da(0x1a3)](0xc9)[_0x3121da(0x23d)]({'status':_0x1a8b30[_0x3121da(0x204)],'message':_0x1a8b30['fuLpB'],'data':{'Id_Ventas':_0x9da083[_0x3121da(0x164)],'Total':_0x88b382,'totalValidado':!![],'Detalle_Venta':_0xda1a}});}catch(_0x42de9e){const _0x1a7641='1|3|2|0|5|4|6'[_0x3121da(0x239)]('|');let _0x1b602d=0x0;while(!![]){switch(_0x1a7641[_0x1b602d++]){case'0':if(_0x1a8b30[_0x3121da(0x179)](_0x42de9e,UniqueConstraintError))return _0x3ce547['status'](0x199)[_0x3121da(0x23d)]({'status':_0x1a8b30[_0x3121da(0x276)],'message':_0x1a8b30[_0x3121da(0x212)],'detail':_0x1a8b30['keOic']});continue;case'1':await _0x32cf8f['rollback']();continue;case'2':if(_0x42de9e[_0x3121da(0x225)][_0x3121da(0x184)](_0x1a8b30[_0x3121da(0x245)])||_0x42de9e[_0x3121da(0x225)][_0x3121da(0x184)](_0x1a8b30[_0x3121da(0x180)])||_0x42de9e[_0x3121da(0x225)]['includes'](_0x3121da(0x243))||_0x42de9e[_0x3121da(0x225)]['includes'](_0x1a8b30[_0x3121da(0x283)]))return _0x3ce547[_0x3121da(0x1a3)](0x190)['json']({'status':_0x1a8b30[_0x3121da(0x276)],'message':_0x42de9e[_0x3121da(0x225)]});continue;case'3':console['error'](_0x1a8b30[_0x3121da(0x277)],_0x42de9e);continue;case'4':if(_0x42de9e instanceof DatabaseError)return _0x3ce547[_0x3121da(0x1a3)](0x1f4)[_0x3121da(0x23d)]({'status':_0x1a8b30[_0x3121da(0x276)],'message':_0x3121da(0x15f),'detail':_0x42de9e[_0x3121da(0x225)]});continue;case'5':if(_0x1a8b30['fdrUK'](_0x42de9e,ValidationError))return _0x3ce547[_0x3121da(0x1a3)](0x190)[_0x3121da(0x23d)]({'status':_0x1a8b30['LRbaa'],'message':_0x1a8b30[_0x3121da(0x221)],'detail':_0x42de9e[_0x3121da(0x27e)][_0x3121da(0x1e7)](_0x146a84=>_0x146a84[_0x3121da(0x225)])});continue;case'6':return _0x3ce547[_0x3121da(0x1a3)](0x1f4)['json']({'status':_0x3121da(0x1c7),'message':_0x1a8b30[_0x3121da(0x26d)],'detail':_0x42de9e[_0x3121da(0x225)]});}break;}}},exports[a0_0x1bec63(0x285)]=async(_0x3925b2,_0x2c33e9)=>{const _0x4d46e5=a0_0x1bec63,_0x49014f={'NzJAJ':_0x4d46e5(0x210),'LkgFg':'error','SKHRd':_0x4d46e5(0x1f8),'kIcSc':'Completada','phhXJ':_0x4d46e5(0x1b2),'ZQjMM':function(_0x2d3a5b,_0x5e799b){return _0x2d3a5b===_0x5e799b;},'rRENn':_0x4d46e5(0x166)},_0x329f6a=await sequelize[_0x4d46e5(0x1f2)]();try{const {id:_0xc38660}=_0x3925b2[_0x4d46e5(0x27c)],_0x1f81c1=await Ventas[_0x4d46e5(0x1ce)](_0xc38660,{'include':[{'model':Detalle_Venta,'as':_0x49014f[_0x4d46e5(0x1c4)]}],'transaction':_0x329f6a});if(!_0x1f81c1)return await _0x329f6a['rollback'](),_0x2c33e9[_0x4d46e5(0x1a3)](0x194)['json']({'status':_0x49014f[_0x4d46e5(0x1c3)],'message':_0x49014f[_0x4d46e5(0x265)]});if(_0x1f81c1[_0x4d46e5(0x1e6)]!==0x3)return await _0x329f6a['rollback'](),_0x2c33e9[_0x4d46e5(0x1a3)](0x190)[_0x4d46e5(0x23d)]({'status':_0x4d46e5(0x1c7),'message':_0x4d46e5(0x24f)});await _0x1f81c1[_0x4d46e5(0x141)]({'Estado':0x1,'Fecha_Completado':new Date()},{'transaction':_0x329f6a}),await _0x329f6a[_0x4d46e5(0x154)](),_0x2c33e9[_0x4d46e5(0x23d)]({'status':_0x4d46e5(0x21c),'message':_0x4d46e5(0x1c1),'data':{'Id_Ventas':_0x1f81c1[_0x4d46e5(0x164)],'Estado':_0x1f81c1[_0x4d46e5(0x1e6)],'EstadoDescripcion':_0x49014f[_0x4d46e5(0x178)],'Fecha_Completado':_0x1f81c1[_0x4d46e5(0x274)]}});}catch(_0x1d11db){await _0x329f6a[_0x4d46e5(0x153)](),console[_0x4d46e5(0x1c7)](_0x49014f[_0x4d46e5(0x228)],_0x1d11db),_0x2c33e9[_0x4d46e5(0x1a3)](0x1f4)[_0x4d46e5(0x23d)]({'status':_0x49014f[_0x4d46e5(0x1c3)],'message':_0x49014f[_0x4d46e5(0x273)](process[_0x4d46e5(0x1f7)][_0x4d46e5(0x21d)],_0x4d46e5(0x25d))?_0x4d46e5(0x287)+_0x1d11db['message']:_0x49014f[_0x4d46e5(0x1ee)]});}},exports[a0_0x1bec63(0x26f)]=async(_0x35aaba,_0x3466cf)=>{const _0x656442=a0_0x1bec63,_0x3044ea={'dVkRK':_0x656442(0x1c7),'sRoUE':'Venta\x20no\x20encontrada','LCUaX':function(_0x2e57fc,_0x43414a){return _0x2e57fc!==_0x43414a;},'KnfmA':_0x656442(0x272),'NkeVV':_0x656442(0x21c),'ZGjLJ':'Venta\x20anulada\x20correctamente','tqNrf':_0x656442(0x258),'ugDLt':_0x656442(0x256),'vWsAf':function(_0x17a578,_0x3d1a00){return _0x17a578===_0x3d1a00;},'ktxqd':_0x656442(0x25d),'ONejd':_0x656442(0x169)},_0x3d7c96=await sequelize[_0x656442(0x1f2)]();try{const {id:_0x260426}=_0x35aaba['params'],_0x43075f=await Ventas[_0x656442(0x1ce)](_0x260426,{'include':[{'model':Detalle_Venta,'as':'Detalle_Venta'}],'transaction':_0x3d7c96});if(!_0x43075f)return await _0x3d7c96[_0x656442(0x153)](),_0x3466cf[_0x656442(0x1a3)](0x194)['json']({'status':_0x3044ea[_0x656442(0x275)],'message':_0x3044ea[_0x656442(0x18c)]});if(_0x3044ea[_0x656442(0x267)](_0x43075f['Estado'],0x3))return await _0x3d7c96[_0x656442(0x153)](),_0x3466cf['status'](0x190)['json']({'status':_0x656442(0x1c7),'message':_0x3044ea[_0x656442(0x186)]});await _0x43075f['update']({'Estado':0x2,'Fecha_Anulacion':new Date()},{'transaction':_0x3d7c96}),await _0x3d7c96[_0x656442(0x154)](),_0x3466cf[_0x656442(0x23d)]({'status':_0x3044ea['NkeVV'],'message':_0x3044ea['ZGjLJ'],'data':{'Id_Ventas':_0x43075f[_0x656442(0x164)],'Estado':_0x43075f[_0x656442(0x1e6)],'EstadoDescripcion':_0x3044ea[_0x656442(0x1bb)],'Fecha_Anulacion':_0x43075f[_0x656442(0x279)]}});}catch(_0x302562){await _0x3d7c96[_0x656442(0x153)](),console[_0x656442(0x1c7)](_0x3044ea['ugDLt'],_0x302562),_0x3466cf[_0x656442(0x1a3)](0x1f4)[_0x656442(0x23d)]({'status':_0x3044ea[_0x656442(0x275)],'message':_0x3044ea[_0x656442(0x1fb)](process['env']['NODE_ENV'],_0x3044ea[_0x656442(0x25c)])?_0x656442(0x199)+_0x302562[_0x656442(0x225)]:_0x3044ea[_0x656442(0x185)]});}},exports['validarStock']=async(_0x32779f,_0x160f2e)=>{const _0x2d531e=a0_0x1bec63,_0x556142={'gzQzm':_0x2d531e(0x1c7),'QmjAk':_0x2d531e(0x19a),'XnaSx':function(_0x29ddce,_0x506faa){return _0x29ddce>_0x506faa;},'cBFEm':function(_0x306ee6,_0x2cf5bb){return _0x306ee6(_0x2cf5bb);},'hIAzW':function(_0x50e258,_0x4fcb0a){return _0x50e258>_0x4fcb0a;},'KZzRu':_0x2d531e(0x21c),'ydkxv':_0x2d531e(0x249),'YJPNe':_0x2d531e(0x17b)};try{const {Id_Productos:_0x27a114,Cantidad:_0x5719f8,Tallas:_0x548619,Tamanos:_0x3e80cc}=_0x32779f[_0x2d531e(0x247)];if(!_0x27a114)return _0x160f2e[_0x2d531e(0x1a3)](0x190)[_0x2d531e(0x23d)]({'status':_0x556142[_0x2d531e(0x18b)],'message':_0x556142[_0x2d531e(0x19e)]});const _0x29e522=await Productos[_0x2d531e(0x1ce)](_0x27a114);if(!_0x29e522)return _0x160f2e[_0x2d531e(0x1a3)](0x194)[_0x2d531e(0x23d)]({'status':_0x2d531e(0x1c7),'message':_0x2d531e(0x281)});let _0x1671d4=!![],_0x4d0a7a=[];if(_0x548619&&_0x556142['XnaSx'](_0x548619[_0x2d531e(0x20c)],0x0))for(const _0x142e7a of _0x548619){const _0x152139=_0x142e7a[_0x2d531e(0x18e)]||_0x142e7a['Talla']||_0x142e7a['nombre']||'',_0x1142e5=_0x556142['cBFEm'](Number,_0x142e7a[_0x2d531e(0x15a)]||_0x142e7a[_0x2d531e(0x1f5)]||0x0);if(!_0x152139){_0x1671d4=![],_0x4d0a7a[_0x2d531e(0x150)]('Nombre\x20de\x20talla\x20no\x20válido\x20para\x20el\x20producto\x20'+_0x29e522[_0x2d531e(0x1b0)]);continue;}const _0x1e358e=await _0x548619['findOne']({'where':{'Nombre':_0x152139}});if(!_0x1e358e){_0x1671d4=![],_0x4d0a7a[_0x2d531e(0x150)](_0x2d531e(0x1b8)+_0x152139+_0x2d531e(0x1cd));continue;}const _0x4db307=await Producto_Tallas[_0x2d531e(0x14b)]({'where':{'Id_Productos':_0x29e522[_0x2d531e(0x26e)],'Id_Tallas':_0x1e358e[_0x2d531e(0x1b9)]}});(!_0x4db307||_0x4db307[_0x2d531e(0x194)]<_0x1142e5)&&(_0x1671d4=![],_0x4d0a7a[_0x2d531e(0x150)](_0x2d531e(0x1e8)+_0x152139+_0x2d531e(0x14c)+(_0x4db307?.[_0x2d531e(0x194)]||0x0)+_0x2d531e(0x280)+_0x1142e5));}if(_0x3e80cc&&_0x556142[_0x2d531e(0x1ed)](_0x3e80cc[_0x2d531e(0x20c)],0x0))for(const _0x5a19f4 of _0x3e80cc){const _0x504b1=_0x5a19f4[_0x2d531e(0x219)]||_0x5a19f4[_0x2d531e(0x1b0)]||'';if(!_0x504b1){_0x1671d4=![],_0x4d0a7a[_0x2d531e(0x150)](_0x2d531e(0x231)+_0x29e522[_0x2d531e(0x1b0)]);continue;}const _0x16a825=await Tamano[_0x2d531e(0x14b)]({'where':{'Nombre':_0x504b1}});if(!_0x16a825){_0x1671d4=![],_0x4d0a7a[_0x2d531e(0x150)](_0x2d531e(0x21f)+_0x504b1+_0x2d531e(0x260));continue;}const _0x29820a=await Producto_Tamano[_0x2d531e(0x14b)]({'where':{'Id_Productos':_0x29e522[_0x2d531e(0x26e)],'Id_Tamano':_0x16a825[_0x2d531e(0x1a6)]}});!_0x29820a&&(_0x1671d4=![],_0x4d0a7a['push'](_0x2d531e(0x19d)+_0x29e522[_0x2d531e(0x1b0)]+_0x2d531e(0x177)+_0x504b1+_0x2d531e(0x1a0)));}_0x160f2e[_0x2d531e(0x23d)]({'status':_0x556142[_0x2d531e(0x263)],'data':{'Id_Productos':_0x29e522['Id_Productos'],'Nombre':_0x29e522['Nombre'],'stockDisponible':_0x1671d4,'mensajes':_0x4d0a7a}});}catch(_0xe95ec0){console[_0x2d531e(0x1c7)](_0x556142[_0x2d531e(0x1bd)],_0xe95ec0),_0x160f2e['status'](0x1f4)[_0x2d531e(0x23d)]({'status':_0x556142[_0x2d531e(0x18b)],'message':_0x556142['YJPNe']});}},exports[a0_0x1bec63(0x20a)]=async(_0x552887,_0x274ba9)=>{const _0x1fab6e=a0_0x1bec63,_0x54ef70={'rRfCC':_0x1fab6e(0x215),'tGfTR':_0x1fab6e(0x210),'lhlwG':'Id_Productos_Producto','Ulwaq':_0x1fab6e(0x22f),'mknur':_0x1fab6e(0x1b0),'qhxcX':_0x1fab6e(0x21c),'mZpcK':'Error\x20al\x20generar\x20reporte\x20diario:','snYMs':'error','hjKtP':_0x1fab6e(0x261)};try{const {fecha:_0x3e3b9c}=_0x552887[_0x1fab6e(0x20e)],_0x555f18=_0x3e3b9c?new Date(_0x3e3b9c):new Date(),_0x1e959f=await Ventas[_0x1fab6e(0x167)]({'where':{'Fecha':{[sequelize['Op'][_0x1fab6e(0x17a)]]:[new Date(_0x555f18[_0x1fab6e(0x232)](0x0,0x0,0x0,0x0)),new Date(_0x555f18[_0x1fab6e(0x232)](0x17,0x3b,0x3b,0x3e7))]},'Estado':0x1},'include':[{'model':Detalle_Venta,'as':_0x54ef70['tGfTR'],'include':[{'model':Productos,'as':_0x54ef70[_0x1fab6e(0x23e)]}]},{'model':Empleados,'as':_0x54ef70[_0x1fab6e(0x1e4)],'attributes':[_0x54ef70[_0x1fab6e(0x1e5)]]}]}),_0x2f3dc5=_0x1e959f[_0x1fab6e(0x1af)]((_0x574632,_0x85759a)=>_0x574632+Number(_0x85759a['Total']),0x0),_0x30c990=_0x1e959f['length'],_0x427be0={};_0x1e959f['forEach'](_0x26514b=>{const _0x58cf0d=_0x1fab6e;_0x26514b[_0x58cf0d(0x210)][_0x58cf0d(0x211)](_0x4723a7=>{const _0xfbda76=_0x58cf0d,_0x3099db=_0x4723a7[_0xfbda76(0x26e)],_0x41ad60=_0x4723a7[_0xfbda76(0x235)]?.[_0xfbda76(0x1b0)]||_0x54ef70['rRfCC'];!_0x427be0[_0x3099db]&&(_0x427be0[_0x3099db]={'Id_Productos':_0x3099db,'Nombre':_0x41ad60,'Cantidad':0x0,'Total':0x0}),_0x427be0[_0x3099db][_0xfbda76(0x1f5)]+=_0x4723a7['Cantidad'],_0x427be0[_0x3099db]['Total']+=Number(_0x4723a7[_0xfbda76(0x189)]);});});const _0x5ef3f4=Object['values'](_0x427be0)[_0x1fab6e(0x209)]((_0x298f69,_0x38ff62)=>_0x38ff62[_0x1fab6e(0x1eb)]-_0x298f69[_0x1fab6e(0x1eb)])['slice'](0x0,0x5);_0x274ba9[_0x1fab6e(0x23d)]({'status':_0x54ef70[_0x1fab6e(0x14f)],'data':{'fecha':_0x555f18[_0x1fab6e(0x1ba)]()[_0x1fab6e(0x239)]('T')[0x0],'totalVentas':_0x2f3dc5,'cantidadVentas':_0x30c990,'productosTop':_0x5ef3f4,'ventas':_0x1e959f[_0x1fab6e(0x1e7)](_0x98dd21=>({'Id_Ventas':_0x98dd21['Id_Ventas'],'Total':_0x98dd21['Total'],'Empleado':_0x98dd21[_0x1fab6e(0x22f)]?.['Nombre'],'Fecha':_0x98dd21[_0x1fab6e(0x182)]}))}});}catch(_0x337a7b){console[_0x1fab6e(0x1c7)](_0x54ef70[_0x1fab6e(0x201)],_0x337a7b),_0x274ba9['status'](0x1f4)[_0x1fab6e(0x23d)]({'status':_0x54ef70[_0x1fab6e(0x171)],'message':_0x54ef70[_0x1fab6e(0x16a)]});}},exports[a0_0x1bec63(0x147)]=async(_0x132396,_0x2d92eb)=>{const _0x157c08=a0_0x1bec63,_0x65501a={'qfMAu':function(_0x4d224f,_0x379432){return _0x4d224f(_0x379432);},'RdNOf':_0x157c08(0x1df),'steIy':function(_0xfd895,_0x5bdf91){return _0xfd895(_0x5bdf91);},'Uilga':_0x157c08(0x210),'Lcvno':_0x157c08(0x235),'FyfHh':_0x157c08(0x1b0),'VKjRR':'success','TAzag':function(_0x1fae03,_0x50a8ef){return _0x1fae03/_0x50a8ef;},'hSfea':_0x157c08(0x155),'fzaJn':'error','iRkzh':_0x157c08(0x170)};try{const {mes:_0x4698e6,año:_0x98c53}=_0x132396[_0x157c08(0x20e)],_0x2d5e35=new Date(),_0x11faf0=_0x4698e6?parseInt(_0x4698e6)-0x1:_0x2d5e35[_0x157c08(0x20f)](),_0x56e7f3=_0x98c53?_0x65501a[_0x157c08(0x1ad)](parseInt,_0x98c53):_0x2d5e35['getFullYear'](),_0x36fa93=new Date(_0x56e7f3,_0x11faf0,0x1),_0x2e44af=new Date(_0x56e7f3,_0x11faf0+0x1,0x0,0x17,0x3b,0x3b,0x3e7),_0x5e6c18=await Ventas[_0x157c08(0x167)]({'where':{'Fecha':{[sequelize['Op'][_0x157c08(0x17a)]]:[_0x36fa93,_0x2e44af]},'Estado':0x1},'include':[{'model':Detalle_Venta,'as':_0x65501a['Uilga'],'include':[{'model':Productos,'as':_0x65501a[_0x157c08(0x1a4)]}]},{'model':Empleados,'as':_0x157c08(0x22f),'attributes':[_0x65501a[_0x157c08(0x269)]]}]}),_0x43ee0b=_0x5e6c18[_0x157c08(0x1af)]((_0x2e8444,_0x302360)=>_0x2e8444+Number(_0x302360[_0x157c08(0x1eb)]),0x0),_0xb9b4a4=_0x5e6c18['length'],_0x19cd4c={};_0x5e6c18[_0x157c08(0x211)](_0x217a9a=>{const _0x4a1dec=_0x157c08,_0x1b0287=_0x217a9a['Fecha'][_0x4a1dec(0x1ba)]()[_0x4a1dec(0x239)]('T')[0x0];!_0x19cd4c[_0x1b0287]&&(_0x19cd4c[_0x1b0287]={'total':0x0,'cantidad':0x0}),_0x19cd4c[_0x1b0287]['total']+=_0x65501a[_0x4a1dec(0x13a)](Number,_0x217a9a[_0x4a1dec(0x1eb)]),_0x19cd4c[_0x1b0287][_0x4a1dec(0x15a)]+=0x1;});const _0x3fc808={};_0x5e6c18[_0x157c08(0x211)](_0x21f3d8=>{const _0x36e18c=_0x157c08,_0x4cc7ad=_0x21f3d8[_0x36e18c(0x1b4)],_0x1c0968=_0x21f3d8['Id_Empleados_Empleado']?.[_0x36e18c(0x1b0)]||_0x65501a[_0x36e18c(0x230)];!_0x3fc808[_0x4cc7ad]&&(_0x3fc808[_0x4cc7ad]={'Id_Empleados':_0x4cc7ad,'Nombre':_0x1c0968,'Total':0x0,'Cantidad':0x0}),_0x3fc808[_0x4cc7ad][_0x36e18c(0x1eb)]+=_0x65501a[_0x36e18c(0x13a)](Number,_0x21f3d8[_0x36e18c(0x1eb)]),_0x3fc808[_0x4cc7ad][_0x36e18c(0x1f5)]+=0x1;});const _0x6bf5bb=Object[_0x157c08(0x187)](_0x3fc808)['sort']((_0x1d2cbb,_0x1ee5a4)=>_0x1ee5a4[_0x157c08(0x1eb)]-_0x1d2cbb[_0x157c08(0x1eb)])[_0x157c08(0x1ef)](0x0,0x5);_0x2d92eb[_0x157c08(0x23d)]({'status':_0x65501a[_0x157c08(0x20b)],'data':{'mes':_0x11faf0+0x1,'año':_0x56e7f3,'totalVentas':_0x43ee0b,'cantidadVentas':_0xb9b4a4,'promedioDiario':_0x65501a[_0x157c08(0x248)](_0xb9b4a4,new Date(_0x56e7f3,_0x11faf0+0x1,0x0)['getDate']()),'ventasPorDia':_0x19cd4c,'empleadosTop':_0x6bf5bb}});}catch(_0x1ee2ec){console[_0x157c08(0x1c7)](_0x65501a['hSfea'],_0x1ee2ec),_0x2d92eb[_0x157c08(0x1a3)](0x1f4)[_0x157c08(0x23d)]({'status':_0x65501a[_0x157c08(0x13d)],'message':_0x65501a[_0x157c08(0x16c)]});}},exports[a0_0x1bec63(0x1e3)]=async(_0x501e31,_0x217327)=>{const _0x1b0b4e=a0_0x1bec63,_0x18852e={'XnSJr':function(_0x48757c,_0x32db13){return _0x48757c===_0x32db13;},'Lvncm':_0x1b0b4e(0x1f6),'jCprp':function(_0xf08177,_0x3ed911){return _0xf08177>_0x3ed911;},'dLEig':function(_0x535232,_0x28c150){return _0x535232(_0x28c150);},'yUvre':'talla','ZTWMM':_0x1b0b4e(0x14d),'ILpKd':function(_0x2f4cdf,_0x1e3a3a){return _0x2f4cdf>=_0x1e3a3a;},'mngRE':_0x1b0b4e(0x1ab),'cYHYW':'tamaño','dMSjQ':_0x1b0b4e(0x1c6),'raxOZ':_0x1b0b4e(0x22e),'TbHtU':function(_0x28b764,_0x5487e1){return _0x28b764(_0x5487e1);},'yIzyX':function(_0x59f423,_0x2b037b){return _0x59f423>=_0x2b037b;},'qOFLp':function(_0x18dd85,_0x651be3){return _0x18dd85===_0x651be3;},'XcniG':_0x1b0b4e(0x271),'dYUSq':_0x1b0b4e(0x1b9),'UHnpR':_0x1b0b4e(0x1b0),'EcBSi':_0x1b0b4e(0x23a),'bllmi':function(_0x2fc9d2,_0x449d86){return _0x2fc9d2(_0x449d86);},'gjlPG':function(_0x6ee8ff,_0x3cdadf){return _0x6ee8ff(_0x3cdadf);},'wMVII':function(_0x1fcd06,_0x2f141e){return _0x1fcd06||_0x2f141e;},'EbAsw':'success','nSihu':_0x1b0b4e(0x222),'ZZkop':'error'};try{const {Detalle_Venta:_0x4740e0}=_0x501e31[_0x1b0b4e(0x247)];if(!_0x4740e0||!Array[_0x1b0b4e(0x27a)](_0x4740e0)||_0x18852e[_0x1b0b4e(0x146)](_0x4740e0[_0x1b0b4e(0x20c)],0x0))return _0x217327[_0x1b0b4e(0x1a3)](0x190)[_0x1b0b4e(0x23d)]({'status':_0x1b0b4e(0x1c7),'message':_0x18852e[_0x1b0b4e(0x244)]});const _0xdfd7bc=[];let _0x2d42aa=!![];const _0x4e3dcd=[];for(const _0x2e3114 of _0x4740e0){const {Id_Productos:_0x28a3a5,Cantidad:_0x561a77,Tallas:_0xadb788,Tamanos:_0x14cedf}=_0x2e3114;if(!_0x28a3a5){_0x2d42aa=![],_0x4e3dcd[_0x1b0b4e(0x150)](_0x1b0b4e(0x14e));continue;}const _0x43320b=await Productos[_0x1b0b4e(0x1ce)](_0x28a3a5);if(!_0x43320b){_0x2d42aa=![],_0x4e3dcd['push'](_0x1b0b4e(0x140)+_0x28a3a5+_0x1b0b4e(0x260)),_0xdfd7bc[_0x1b0b4e(0x150)]({'Id_Productos':_0x28a3a5,'Nombre':'Producto\x20no\x20encontrado','stockDisponible':![],'mensajes':[_0x1b0b4e(0x140)+_0x28a3a5+'\x20no\x20encontrado']});continue;}let _0x20feb7=!![],_0x4ed04b=[],_0x395c4c=[];if(_0xadb788&&_0x18852e['jCprp'](_0xadb788['length'],0x0))for(const _0x16b33a of _0xadb788){const _0x1e64ea=_0x16b33a[_0x1b0b4e(0x18e)]||_0x16b33a[_0x1b0b4e(0x165)]||_0x16b33a[_0x1b0b4e(0x219)]||'',_0x5f4ecf=_0x18852e[_0x1b0b4e(0x157)](Number,_0x16b33a['cantidad']||_0x16b33a[_0x1b0b4e(0x1f5)]||0x0);if(!_0x1e64ea){_0x20feb7=![],_0x2d42aa=![],_0x4ed04b[_0x1b0b4e(0x150)](_0x1b0b4e(0x252)+_0x43320b[_0x1b0b4e(0x1b0)]),_0x395c4c['push']({'tipo':_0x18852e[_0x1b0b4e(0x270)],'nombre':'N/A','disponible':0x0,'solicitado':0x0,'suficiente':![],'error':_0x1b0b4e(0x259)});continue;}const _0x3d4f30=await _0xadb788[_0x1b0b4e(0x14b)]({'where':{'Nombre':_0x1e64ea}});if(!_0x3d4f30){_0x20feb7=![],_0x2d42aa=![],_0x4ed04b['push'](_0x1b0b4e(0x1b8)+_0x1e64ea+_0x1b0b4e(0x1cd)),_0x395c4c[_0x1b0b4e(0x150)]({'tipo':_0x18852e[_0x1b0b4e(0x270)],'nombre':_0x1e64ea,'disponible':0x0,'solicitado':_0x5f4ecf,'suficiente':![],'error':_0x18852e[_0x1b0b4e(0x236)]});continue;}const _0x3113d=await Producto_Tallas[_0x1b0b4e(0x14b)]({'where':{'Id_Productos':_0x43320b['Id_Productos'],'Id_Tallas':_0x3d4f30[_0x1b0b4e(0x1b9)]}}),_0x37026b=_0x18852e[_0x1b0b4e(0x157)](Number,_0x3113d?.[_0x1b0b4e(0x194)]||0x0),_0x422ecd=_0x18852e[_0x1b0b4e(0x16e)](_0x37026b,_0x5f4ecf);!_0x422ecd&&(_0x20feb7=![],_0x2d42aa=![],_0x4ed04b[_0x1b0b4e(0x150)](_0x1b0b4e(0x1e8)+_0x1e64ea+_0x1b0b4e(0x14c)+_0x37026b+_0x1b0b4e(0x280)+_0x5f4ecf)),_0x395c4c[_0x1b0b4e(0x150)]({'tipo':_0x1b0b4e(0x18e),'nombre':_0x1e64ea,'disponible':_0x37026b,'solicitado':_0x5f4ecf,'suficiente':_0x422ecd});}if(_0x14cedf&&_0x18852e[_0x1b0b4e(0x21e)](_0x14cedf[_0x1b0b4e(0x20c)],0x0))for(const _0x30b168 of _0x14cedf){const _0x5b698c=_0x30b168[_0x1b0b4e(0x219)]||_0x30b168['Nombre']||'';if(!_0x5b698c){_0x20feb7=![],_0x2d42aa=![],_0x4ed04b['push'](_0x1b0b4e(0x231)+_0x43320b[_0x1b0b4e(0x1b0)]),_0x395c4c[_0x1b0b4e(0x150)]({'tipo':'tamaño','nombre':_0x18852e[_0x1b0b4e(0x1fe)],'disponible':0x0,'solicitado':0x0,'suficiente':![],'error':_0x1b0b4e(0x1b1)});continue;}const _0xec5085=await Tamano[_0x1b0b4e(0x14b)]({'where':{'Nombre':_0x5b698c}});if(!_0xec5085){_0x20feb7=![],_0x2d42aa=![],_0x4ed04b['push'](_0x1b0b4e(0x21f)+_0x5b698c+'\x20no\x20encontrado'),_0x395c4c[_0x1b0b4e(0x150)]({'tipo':_0x18852e['cYHYW'],'nombre':_0x5b698c,'disponible':0x0,'solicitado':0x0,'suficiente':![],'error':_0x18852e[_0x1b0b4e(0x22b)]});continue;}const _0x1ddc67=await Producto_Tamano['findOne']({'where':{'Id_Productos':_0x43320b[_0x1b0b4e(0x26e)],'Id_Tamano':_0xec5085[_0x1b0b4e(0x1a6)]}});if(!_0x1ddc67){_0x20feb7=![],_0x2d42aa=![],_0x4ed04b[_0x1b0b4e(0x150)](_0x1b0b4e(0x19d)+_0x43320b[_0x1b0b4e(0x1b0)]+'\x20no\x20tiene\x20el\x20tamaño\x20'+_0x5b698c+_0x1b0b4e(0x1a0)),_0x395c4c[_0x1b0b4e(0x150)]({'tipo':_0x18852e['cYHYW'],'nombre':_0x5b698c,'disponible':0x0,'solicitado':0x0,'suficiente':![],'error':_0x1b0b4e(0x1ae)});continue;}const _0x16cb98=await Producto_Tamano_Insumos['findAll']({'where':{'Id_Producto_Tamano':_0x1ddc67[_0x1b0b4e(0x1aa)]},'include':[{'model':Insumos,'as':_0x18852e['raxOZ']}]}),_0x409f78=Number(_0x30b168[_0x1b0b4e(0x1f5)]||_0x30b168['cantidad']||0x0);let _0x5862cd=!![];const _0x31a87a=[];for(const _0x1d4a4c of _0x16cb98){const _0x28c335=_0x1d4a4c['Id_Insumos_Insumo'],_0x120609=_0x18852e['TbHtU'](Number,_0x1d4a4c[_0x1b0b4e(0x28a)]||0x0),_0x1159be=_0x120609*_0x409f78,_0x30b696=_0x18852e[_0x1b0b4e(0x157)](Number,_0x28c335[_0x1b0b4e(0x194)]||0x0),_0x589c5b=_0x18852e['yIzyX'](_0x30b696,_0x1159be);!_0x589c5b&&(_0x5862cd=![],_0x20feb7=![],_0x2d42aa=![],_0x4ed04b['push']('Stock\x20insuficiente\x20para\x20insumo\x20'+_0x28c335[_0x1b0b4e(0x1b0)]+_0x1b0b4e(0x23b)+_0x30b696+',\x20Necesario:\x20'+_0x1159be)),_0x31a87a[_0x1b0b4e(0x150)]({'insumo':_0x28c335[_0x1b0b4e(0x1b0)],'disponible':_0x30b696,'necesario':_0x1159be,'suficiente':_0x589c5b});}_0x395c4c[_0x1b0b4e(0x150)]({'tipo':_0x18852e[_0x1b0b4e(0x1f4)],'nombre':_0x5b698c,'cantidad':_0x409f78,'insumos':_0x31a87a,'suficiente':_0x5862cd});}if((!_0xadb788||_0x18852e['qOFLp'](_0xadb788[_0x1b0b4e(0x20c)],0x0))&&(!_0x14cedf||_0x14cedf[_0x1b0b4e(0x20c)]===0x0)){const _0x125994=await Producto_Tallas[_0x1b0b4e(0x167)]({'where':{'Id_Productos':_0x43320b[_0x1b0b4e(0x26e)]},'include':[{'model':_0xadb788,'as':_0x18852e['XcniG'],'attributes':[_0x18852e[_0x1b0b4e(0x173)],_0x18852e[_0x1b0b4e(0x198)]]}]});if(_0x125994&&_0x125994[_0x1b0b4e(0x20c)]>0x0)_0x20feb7=![],_0x2d42aa=![],_0x4ed04b[_0x1b0b4e(0x150)]('El\x20producto\x20'+_0x43320b[_0x1b0b4e(0x1b0)]+_0x1b0b4e(0x1b5)+_0x125994[_0x1b0b4e(0x1e7)](_0x134c7f=>_0x134c7f['Id_Tallas_Talla']?.['Nombre']||'N/A')['join'](',\x20')),_0x395c4c[_0x1b0b4e(0x150)]({'tipo':_0x1b0b4e(0x1c7),'nombre':_0x43320b[_0x1b0b4e(0x1b0)],'disponible':0x0,'solicitado':0x0,'suficiente':![],'error':_0x18852e[_0x1b0b4e(0x13c)]});else{const _0x14bab5=_0x18852e[_0x1b0b4e(0x1c2)](Number,_0x43320b[_0x1b0b4e(0x194)]||0x0),_0x4dd5c2=_0x18852e[_0x1b0b4e(0x156)](Number,_0x18852e[_0x1b0b4e(0x1a7)](_0x561a77,0x0)),_0x3dfe66=_0x18852e['yIzyX'](_0x14bab5,_0x4dd5c2);!_0x3dfe66&&(_0x20feb7=![],_0x2d42aa=![],_0x4ed04b['push'](_0x1b0b4e(0x25b)+_0x43320b[_0x1b0b4e(0x1b0)]+_0x1b0b4e(0x23b)+_0x14bab5+_0x1b0b4e(0x16f)+_0x4dd5c2)),_0x395c4c['push']({'tipo':_0x1b0b4e(0x142),'nombre':_0x43320b[_0x1b0b4e(0x1b0)],'disponible':_0x14bab5,'solicitado':_0x4dd5c2,'suficiente':_0x3dfe66});}}_0xdfd7bc['push']({'Id_Productos':_0x43320b[_0x1b0b4e(0x26e)],'Nombre':_0x43320b[_0x1b0b4e(0x1b0)],'stockDisponible':_0x20feb7,'mensajes':_0x4ed04b,'detallesStock':_0x395c4c});}_0x217327[_0x1b0b4e(0x23d)]({'status':_0x18852e[_0x1b0b4e(0x161)],'data':{'ventaValida':_0x2d42aa,'mensajesGenerales':_0x4e3dcd,'resultados':_0xdfd7bc}});}catch(_0x4ead0){console['error'](_0x18852e[_0x1b0b4e(0x1da)],_0x4ead0),_0x217327[_0x1b0b4e(0x1a3)](0x1f4)['json']({'status':_0x18852e['ZZkop'],'message':_0x1b0b4e(0x23c)});}},exports[a0_0x1bec63(0x1d2)]=async(_0x458729,_0x277354)=>{const _0x48c193=a0_0x1bec63,_0x4565de={'EMiaP':'error','kcBUj':_0x48c193(0x281),'tXzZZ':_0x48c193(0x1b9),'jIqmH':_0x48c193(0x1b0),'Mzyij':'success','WStgv':function(_0x2737dd,_0x465abc){return _0x2737dd>_0x465abc;},'MRBOf':_0x48c193(0x1cf)};try{const {Id_Productos:_0x128af1}=_0x458729[_0x48c193(0x27c)];if(!_0x128af1)return _0x277354[_0x48c193(0x1a3)](0x190)[_0x48c193(0x23d)]({'status':_0x4565de[_0x48c193(0x214)],'message':_0x48c193(0x19a)});const _0x3fe973=await Productos[_0x48c193(0x1ce)](_0x128af1);if(!_0x3fe973)return _0x277354['status'](0x194)[_0x48c193(0x23d)]({'status':_0x4565de[_0x48c193(0x214)],'message':_0x4565de['kcBUj']});const _0x5ee2f3=await Producto_Tallas[_0x48c193(0x167)]({'where':{'Id_Productos':_0x128af1},'include':[{'model':Tallas,'as':_0x48c193(0x271),'attributes':[_0x4565de[_0x48c193(0x1c5)],_0x4565de[_0x48c193(0x24a)]]}]}),_0x305c20=_0x5ee2f3[_0x48c193(0x1e7)](_0x674c7c=>({'Id_Producto_Tallas':_0x674c7c['Id_Producto_Tallas'],'Id_Tallas':_0x674c7c[_0x48c193(0x1b9)],'Nombre_Talla':_0x674c7c[_0x48c193(0x271)]?.[_0x48c193(0x1b0)]||_0x48c193(0x1ab),'Stock':_0x674c7c[_0x48c193(0x194)],'Precio':_0x674c7c['Precio']||0x0}));_0x277354[_0x48c193(0x23d)]({'status':_0x4565de[_0x48c193(0x266)],'data':{'Id_Productos':_0x3fe973['Id_Productos'],'Nombre':_0x3fe973['Nombre'],'tieneTallas':_0x4565de[_0x48c193(0x27b)](_0x305c20[_0x48c193(0x20c)],0x0),'tallasDisponibles':_0x305c20,'totalTallas':_0x305c20['length']}});}catch(_0x1358f5){console['error'](_0x4565de[_0x48c193(0x19b)],_0x1358f5),_0x277354[_0x48c193(0x1a3)](0x1f4)['json']({'status':_0x4565de[_0x48c193(0x214)],'message':_0x48c193(0x237)});}};

// Nando es una perra